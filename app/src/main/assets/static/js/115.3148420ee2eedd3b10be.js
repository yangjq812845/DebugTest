webpackJsonp([115],{"4sSv":function(t,e){},"DV+v":function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return r});var i=n("7+S+"),a={mounted:function(){this.value>=0&&(this.currentIndex=this.value),this.updateIndex()},methods:{updateIndex:function(){if(this.$children&&this.$children.length){this.number=this.$children.length;for(var t=this.$children,e=0;e<t.length;e++)t[e].currentIndex=e,t[e].currentSelected&&(this.index=e)}}},props:{value:Number},watch:{currentIndex:function(t,e){e>-1&&this.$children[e]&&(this.$children[e].currentSelected=!1),t>-1&&this.$children[t]&&(this.$children[t].currentSelected=!0),this.$emit("input",t),this.$emit("on-index-change",t,e)},index:function(t){this.currentIndex=t},value:function(t){this.index=t}},data:function(){return{index:-1,currentIndex:this.index,number:this.$children.length}}},r={props:{selected:{type:Boolean,default:!1}},mounted:function(){this.$parent.updateIndex()},beforeDestroy:function(){var t=this.$parent;this.$nextTick(function(){t.updateIndex()})},methods:{onItemClick:function(t){var e=this;if(this.$parent.preventDefault)return void this.$parent.$emit("on-before-index-change",this.currentIndex);void 0!==this.disabled&&!1!==this.disabled||(this.currentSelected=!0,this.$parent.currentIndex=this.currentIndex,this.$nextTick(function(){e.$emit("on-item-click",e.currentIndex)})),!0===t&&n.i(i.a)(this.link,this.$router)}},watch:{currentSelected:function(t){t&&(this.$parent.index=this.currentIndex)},selected:function(t){this.currentSelected=t}},data:function(){return{currentIndex:-1,currentSelected:this.selected}}}},Im1y:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-tab-item",class:[t.currentSelected?t.activeClass:"",{"vux-tab-selected":t.currentSelected,"vux-tab-disabled":t.disabled}],style:t.style,on:{click:t.onItemClick}},[t._t("default"),t._v(" "),void 0!==t.badgeLabel&&""!==t.badgeLabel?n("span",{staticClass:"vux-tab-item-badge",style:{background:t.badgeBackground,color:t.badgeColor}},[t._v("\n  "+t._s(t.badgeLabel))]):t._e()],2)},a=[],r={render:i,staticRenderFns:a};e.a=r},NdLz:function(t,e,n){"use strict";var i=n("Jwlx"),a=n.n(i),r=n("rVsN"),s=n.n(r),o=n("4YfN"),c=n.n(o),d=n("ZMv9"),l=n("j108"),u=n("inDh"),h=n("CKVb"),p=n("gpPJ"),m=n("jHHs"),f=n("HVJf");c()({},n.i(f.b)("mybranchStore",["isChangeCity","mapList","branchType"])),l.a,u.a,h.a,p.a,m.a},NnCh:function(t,e,n){"use strict";var i=n("DV+v");e.a={name:"tab-item",mixins:[i.a],props:{activeClass:String,disabled:Boolean,badgeBackground:{type:String,default:"#f74c31"},badgeColor:{type:String,default:"#fff"},badgeLabel:String},computed:{style:function(){return{borderWidth:this.$parent.lineWidth+"px",borderColor:this.$parent.activeColor,color:this.currentSelected?this.$parent.activeColor:this.disabled?this.$parent.disabledColor:this.$parent.defaultColor,border:this.$parent.animate?"none":"auto"}}}}},Xf7U:function(t,e,n){"use strict";var i=n("DV+v");i.a,String,Boolean,String,String,String},ZMv9:function(t,e,n){"use strict";e.a={branchMap:function(t){var e=void 0,n=void 0,i=void 0;return n=_.transform(t,function(t,e){"0"==e.wdBranchType&&(e.distance=1*e.distance<1e3?e.distance+"m":(e.distance/1e3).toFixed(2)+"km",t.push(e))}),e=_.transform(t,function(t,e){"1"==e.wdBranchType&&(e.distance=1*e.distance<1e3?e.distance+"m":(e.distance/1e3).toFixed(2)+"km",t.push(e))}),i=_.transform(t,function(t,e){"2"==e.wdBranchType&&(e.distance=1*e.distance<1e3?e.distance+"m":(e.distance/1e3).toFixed(2)+"km",t.push(e))}),{business:e,selfHelp:n,intelligent:i}}}},cWgj:function(t,e,n){t.exports=n.p+"static/img/backToTop.png"},gGmW:function(t,e){},gbx7:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-tab-wrap",class:"top"===t.barPosition?"vux-tab-bar-top":""},[n("div",{staticClass:"vux-tab-container"},[n("div",{ref:"nav",staticClass:"vux-tab",class:[{"vux-tab-no-animate":!t.animate},{scrollable:t.scrollable}]},[t._t("default"),t._v(" "),t.animate?n("div",{staticClass:"vux-tab-ink-bar",class:t.barClass,style:t.barStyle},[t.customBarWidth?n("span",{staticClass:"vux-tab-bar-inner",style:t.innerBarStyle}):t._e()]):t._e()],2)])])},a=[],r={render:i,staticRenderFns:a};e.a=r},idsh:function(t,e,n){"use strict";var i=n("Jwlx"),a=n.n(i),r=n("rVsN"),s=n.n(r),o=n("4YfN"),c=n.n(o),d=n("ZMv9"),l=n("j108"),u=n("inDh"),h=n("CKVb"),p=n("gpPJ"),m=n("jHHs"),f=n("HVJf");e.a={name:"cdbank_branch",data:function(){return{address:"北京市",list:[],backToTopShow:!1,showHideOnBlur:!1,pageNum:1}},computed:c()({},n.i(f.b)("mybranchStore",["isChangeCity","mapList","branchType"])),components:{Tab:l.a,TabItem:u.a,Group:h.a,Cell:p.a,XDialog:m.a},methods:{goBack:function(){this.$store.commit("mybranchStore/setBranchType","business"),window.client.goBack()},invokeMH0186:function(t){console.log(t);var e={tranCode:"MH0186",loopCount:"1",brNo:t,currentBusinessCode:""};return new s.a(function(t,n){window.client.request({url:"/api/MH0186.json",ifpUrl:"/mp/MP1380.do",adapter:"CommonAdapter",procedure:"invokeTrancodeHttp",parameters:e,success:function(e){t(e)}})})},mapDetails:function(t){var e=this;this.invokeMH0186(t.brNo).then(function(n){var i={info:t,proServiceTime:n.IWdxx.proServiceTime,proWaitNo:n.IWdxx.proWaitNo,vipServiceTime:n.IWdxx.vipServiceTime,vipWaitNo:n.IWdxx.vipWaitNo,transTime:n.IWdxx.transTime};e.$router.push({name:"mybranchDetails",params:{param:i}})})},backToTop:function(){},mapSign:function(t){var e=this;window.client.mapLocate({received:function(n){if("200"!==n.status)return void e.$vux.alert.show({text:"由于网络原因，暂时无法定位当前位置，请检查网络后再试",width:"4rem"});var i={title:t.wdBranchName,address:t.wdBranchAddress,latlng:n.invocationResult.latitude+","+n.invocationResult.longitude,type:"开车,公交,步行",fromLocation:n.invocationResult.latitude+","+n.invocationResult.longitude,toLocation:t.wdBranchY+","+t.wdBranchX};console.log(i),window.client.gotoNavBaiduMap({jsonData:i})}}),console.log("导航")},mapSearch:function(t){"0"==t.index?this.$router.replace({name:"mybranchSearch"}):this.allMapSign()},allMapSign:function(){var t=this;console.log("allMapSign"),this.isChangeCity?this.invokeMH0215().then(function(e){console.log("invokeMH0215.......addMarkerToBaiduMap"),window.client.addMarkerToBaiduMap({jsonData:{marker:t.mapInfo(e.root.wdBranchList)}})}):(console.log("addMarkerToBaiduMap"),window.client.addMarkerToBaiduMap({jsonData:{marker:this.mapInfo(this.mapList.business)}}))},baiduMap:function(t){"sortAction"==t.action?this.brandMap(t.data.value):"qiehuandiqu"==t.action?this.$router.push({name:"cities"}):"jumpxiangqing"==t.action||"addressdingwei"==t.action?this.mapDetails(t.data.info):"leftAction"==t.action?this.$router.replace({name:"branch_mybranchList"}):"rightAction"==t.action&&this.$router.replace({name:"mybranchSearch"})},mapInfo:function(t){var e=this,n=[];return t&&t.length>0&&_.forEach(t,function(t,i){var a={title:t.wdBranchName,lanlng:t.wdBranchY+","+t.wdBranchX,address:t.wdBranchAddress,number:t.brNo,discount:"",info:t};e.isChangeCity||(a.distance=t.distance),n.push(a)}),n},handler:function(t){this.$store.commit("mybranchStore/setBranchType",t),this.isChangeCity?this.mapMH0215():this.list=this.mapList[t]},changeAddr:function(){this.showHideOnBlur=!0},switchCity:function(){this.$router.push({name:"cities",params:{name:this.$route.name}})},relocation:function(){var t=this;this.showHideOnBlur=!1,this.$store.commit("mybranchStore/setCityFlag",!1),window.client.mapLocate({received:function(e){"200"===e.status&&(t.address=e.invocationResult.addrStr)}}),this.mapMH0188()},mapLocation:function(t){var e=this;if(this.showHideOnBlur=!1,!t.data.isOpenMap)return void(this.address=JSON.parse(localStorage.getItem("current")).cit_name+"（未开启定位功能）");this.address=t.data.addrStr,this.invokeMH0188().then(function(t){e.mapList=a()(d.a.branchMap(t.commIcoll)),e.list=e.mapList[e.branchType]})},mapMH0188:function(){var t=this;this.invokeMH0188().then(function(e){t.$store.commit("mybranchStore/setMapList",d.a.branchMap(e.commIcoll)),t.list=t.mapList[t.branchType]})},invokeMH0188:function(){var t={};return new s.a(function(e,n){window.client.request({url:"/api/MH0188.json",ifpUrl:"/mp/MP1092.do",adapter:"CommonAdapter",procedure:"invokeTrancodeHttp",parameters:t,success:function(t){e(t)}})})},mapMH0215:function(t){var e=this;this.invokeMH0215(t).then(function(t){e.list=t.wdBranchList})},invokeMH0215:function(t){var e={tranCode:"MH0215",city:encodeURI(this.address),serachKey:t||"",turnPageBeginPos:10*(this.pageNum-1)+1+"",turnPageShowNum:"10",wdBranchType:this.branchType};return new s.a(function(t,n){window.client.request({url:"/api/MH0215.json",ifpUrl:"/mp/MP1315.do",adapter:"CommonAdapter",procedure:"invokeTrancodeHttp",parameters:e,success:function(e){t(e)}})})}},created:function(){var t=this;this.isChangeCity?this.address=JSON.parse(localStorage.getItem("current")).cit_name:window.client.mapLocate({received:function(e){"200"===e.status&&(t.address=e.invocationResult.addrStr)}});var e=this.$route.params.serachKey?this.$route.params.serachKey:"";if(e)return void this.mapMH0215(e);this.isChangeCity?this.mapMH0215():this.mapMH0188(),document.addEventListener("mapLocation",this.mapLocation,!1),document.addEventListener("baiduMap",this.baiduMap,!1)},beforeDestroy:function(){document.removeEventListener("mapLocation",this.mapLocation,!1),document.removeEventListener("baiduMap",this.baiduMap,!1)}}},inDh:function(t,e,n){"use strict";var i=(n("Xf7U"),n("NnCh")),a=n("Im1y"),r=n("C7Lr"),s=r(i.a,a.a,!1,null,null,null);e.a=s.exports},j108:function(t,e,n){"use strict";function i(t){n("4sSv")}var a=(n("vftf"),n("uAUY")),r=n("gbx7"),s=n("C7Lr"),o=i,c=s(a.a,r.a,!1,o,null,null);e.a=c.exports},pYIR:function(t,e,n){"use strict";function i(t){n("gGmW")}Object.defineProperty(e,"__esModule",{value:!0});var a=(n("NdLz"),n("idsh")),r=n("yoxj"),s=n("C7Lr"),o=i,c=s(a.a,r.a,!1,o,null,null);e.default=c.exports},uAUY:function(t,e,n){"use strict";var i=n("DV+v");e.a={name:"tab",mixins:[i.b],mounted:function(){var t=this;this.$nextTick(function(){setTimeout(function(){t.hasReady=!0},0)})},props:{lineWidth:{type:Number,default:3},activeColor:String,barActiveColor:String,defaultColor:String,disabledColor:String,animate:{type:Boolean,default:!0},customBarWidth:[Function,String],preventDefault:Boolean,scrollThreshold:{type:Number,default:4},barPosition:{type:String,default:"bottom",validator:function(t){return-1!==["bottom","top"].indexOf(t)}}},computed:{barLeft:function(){if(this.hasReady){var t=this.scrollable?window.innerWidth/this.$children[this.currentIndex||0].$el.getBoundingClientRect().width:this.number;return this.currentIndex*(100/t)+"%"}},barRight:function(){if(this.hasReady){var t=this.scrollable?window.innerWidth/this.$children[this.currentIndex||0].$el.getBoundingClientRect().width:this.number;return(t-this.currentIndex-1)*(100/t)+"%"}},innerBarStyle:function(){return{width:"function"==typeof this.customBarWidth?this.customBarWidth(this.currentIndex):this.customBarWidth,backgroundColor:this.barActiveColor||this.activeColor}},barStyle:function(){var t={left:this.barLeft,right:this.barRight,display:"block",height:this.lineWidth+"px",transition:this.hasReady?null:"none"};return this.customBarWidth?t.backgroundColor="transparent":t.backgroundColor=this.barActiveColor||this.activeColor,t},barClass:function(){return{"vux-tab-ink-bar-transition-forward":"forward"===this.direction,"vux-tab-ink-bar-transition-backward":"backward"===this.direction}},scrollable:function(){return this.number>this.scrollThreshold}},watch:{currentIndex:function(t,e){this.direction=t>e?"forward":"backward",this.$emit("on-index-change",t,e),this.hasReady&&this.scrollToActiveTab()}},data:function(){return{direction:"forward",right:"100%",hasReady:!1}},methods:{scrollToActiveTab:function(){var t=this;if(this.scrollable&&this.$children&&this.$children.length){var e=this.$children[this.currentIndex].$el,n=0,i=function i(){var a=t.$refs.nav;a.scrollLeft+=(e.offsetLeft-(a.offsetWidth-e.offsetWidth)/2-a.scrollLeft)/15,++n<15&&window.requestAnimationFrame(i)};window.requestAnimationFrame(i)}}}}},vftf:function(t,e,n){"use strict";var i=n("DV+v");i.b,Number,String,String,String,String,Boolean,Function,String,Boolean,Number,String},yoxj:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("xcgb-box",[i("xcgb-head",{attrs:{title:"网点",keepAlive:!1,leftOptions:[{type:"left_arrow_black",preventGoBack:!0}],rightOptions:[{type:"search_black"},{type:"nav_bar_icon_mab_more"}]},on:{leftHandler:t.goBack,rightHandler:t.mapSearch}}),t._v(" "),i("tab",{attrs:{"active-color":"red","line-width":0}},[i("tab-item",{attrs:{selected:"business"==t.branchType},on:{"on-item-click":function(e){t.handler("business")}}},[t._v("营业网点")]),t._v(" "),i("tab-item",{attrs:{selected:"intelligent"==t.branchType},on:{"on-item-click":function(e){t.handler("intelligent")}}},[t._v("智能银行")]),t._v(" "),i("tab-item",{attrs:{selected:"selfHelp"==t.branchType},on:{"on-item-click":function(e){t.handler("selfHelp")}}},[t._v("自助银行")])],1),t._v(" "),i("div",{staticClass:"main"},[t.list.length>0?i("group",{attrs:{gutter:0}},t._l(t.list,function(e,n){return i("cell",{key:n,attrs:{title:e.wdBranchName,"inline-desc":e.wdBranchAddress},nativeOn:{click:function(n){t.mapDetails(e)}}},[i("div",{staticClass:"mapSign",attrs:{slot:"default"},on:{click:function(n){n.stopPropagation(),t.mapSign(e)}},slot:"default"},[i("span",[t._v(t._s(e.distance))]),t._v(" "),i("span",{staticClass:"icon"})])])})):i("div",{staticClass:"notData"}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.backToTopShow,expression:"backToTopShow"}],staticClass:"backToTop"},[i("img",{attrs:{src:n("cWgj"),alt:""},on:{click:t.backToTop}})])],1),t._v(" "),i("div",{staticClass:"changeAddr"},[i("span",{staticClass:"addr"},[i("i",[t._v(t._s(t.address))])]),t._v(" "),i("span",{staticClass:"change",on:{click:t.changeAddr}},[i("i",[t._v("更换")])])]),t._v(" "),i("x-dialog",{attrs:{"hide-on-blur":""},model:{value:t.showHideOnBlur,callback:function(e){t.showHideOnBlur=e},expression:"showHideOnBlur"}},[i("div",{staticClass:"mapchange"},[i("p",{staticClass:"tips"},[t._v("请选择")]),t._v(" "),i("p",{staticClass:"selectAddr",on:{click:t.switchCity}},[t._v("切换地区")]),t._v(" "),i("p",{staticClass:"selectAddr",on:{click:t.relocation}},[t._v("重新定位")]),t._v(" "),i("p",{on:{click:function(e){t.showHideOnBlur=!1}}},[t._v("取消")])]),t._v(" "),i("div",{on:{click:function(e){t.showHideOnBlur=!1}}},[i("span",{staticClass:"vux-close"})])])],1)},a=[],r={render:i,staticRenderFns:a};e.a=r}});