webpackJsonp([181],{Aub5:function(e,t,o){"use strict";var n=o("CKVb"),r=o("fvyU"),a=o("V5xh"),s=o("vp6S"),c=o("9r/T");o.n(c),n.a,r.a},BCjQ:function(e,t,o){"use strict";function n(e){o("umiq")}Object.defineProperty(t,"__esModule",{value:!0});var r=(o("Aub5"),o("kuuB")),a=o("UUoC"),s=o("C7Lr"),c=n,i=s(r.a,a.a,!1,c,null,null);t.default=i.exports},"H5x+":function(e,t,o){e.exports=o.p+"static/img/jiHuoLiuCheng1.png"},UUoC:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("xcgb-box",[n("xcgb-head",{attrs:{title:"激活卡片",keepAlive:!1,leftOptions:[{type:"left_arrow_black"}]}}),e._v(" "),n("div",{staticClass:"main"},[e.hasCard?e._l(e.cardList,function(t,r){return n("div",{key:r,staticClass:"showCardArea"},[n("div",{class:{flexItem:0!==t.state}},[n("p",{staticClass:"top"},[e._v("\n            "+e._s(t.cardName)+" "),n("span",[e._v("("+e._s(t.cardNum)+")")])]),e._v(" "),0!==t.state?n("span",{staticClass:"status",class:{invali:1!==t.state}},[e._v("\n            "+e._s(1===t.state?"已激活":"已过激活日期")+"\n          ")]):e._e()]),e._v(" "),"v"===t.cardType||"x"===t.cardType?n("div",[n("p",{staticClass:"secondLine"},[e._v("\n            审批时间： "),n("span",[e._v(e._s(t.examine))])])]):e._e(),e._v(" "),"v"===t.cardType?n("div",{staticClass:"flexItem"},[n("x-button",{staticClass:"cardAreaBtn viewInfoBtn",on:{clickHandler:function(o){e.viewVCardInfo(t)}}},[e._t("default",[e._v("\n              查看卡片信息\n              "),n("img",{attrs:{src:o("vczA"),alt:""}})])],2),e._v(" "),n("x-button",{staticClass:"cardAreaBtn openUpBtn",on:{clickHandler:function(t){e.openSwipCard()}}},[e._t("default",[e._v("开通刷卡功能")])],2)],1):e._e(),e._v(" "),"x"===t.cardType?n("div",{staticClass:"flexItem"},[n("p",{staticClass:"thirdLine bottom"},[e._v("\n            距失效剩余时间："),n("span",[e._v(e._s(t.restDate))]),e._v("天\n          ")]),e._v(" "),n("x-button",{staticClass:"cardAreaBtn activateBtn",on:{clickHandler:function(o){e.judgeAct(t)}}},[e._t("default",[e._v("激活")])],2)],1):e._e(),e._v(" "),"x"!==t.cardType&&"v"!==t.cardType?n("div",{staticClass:"flexItem"},[n("p",{staticClass:"secondLine bottom"},[e._v("\n            审批时间： "),n("span",[e._v(e._s(t.examine))]),e._v("天\n          ")]),e._v(" "),n("x-button",{staticClass:"cardAreaBtn activateBtn",on:{clickHandler:function(o){e.judgeAct(t)}}},[e._t("default",[e._v("激活")])],2)],1):e._e()])}):e._e(),e._v(" "),e.hasCard?e._e():[n("div",{staticClass:"noneCard"},[n("img",{staticClass:"noneActCard",attrs:{src:o("H5x+")}}),e._v(" "),n("p",[e._v("暂无待激活的卡片")]),e._v(" "),n("p",[e._v("想获得更多卡片申请进度？")]),e._v(" "),n("x-button",{staticClass:"queryCardApply",attrs:{plain:!0},on:{clickHandler:e.queryApply}},[e._t("default",[e._v("查询申卡进度")])],2)],1)]],2)],1)},r=[],a={render:n,staticRenderFns:r};t.a=a},V5xh:function(e,t,o){"use strict";o.d(t,"c",function(){return r}),o.d(t,"e",function(){return a}),o.d(t,"b",function(){return s}),o.d(t,"d",function(){return c}),o.d(t,"a",function(){return i});var n=o("vp6S"),r=function(e,t){o.i(n.c)(e.cardNo).then(function(o){if("6086"===e.judgeInfo.cardCode)console.log("后续流程请参看E秒购卡激活流程");else if("8234"===e.judgeInfo.cardCode){console.log("后续流程请参看极客卡激活流程");window.client.request({url:"/api/CAMH0365.json",adapter:"CommonAdapter",procedure:"MH0365",parameters:[],success:function(e){var o="";if("1"===e.body.ec){var n=e.body.em;window.client.request({url:"/api/CAMH0364.json",adapter:"CommonAdapter",procedure:"MH0364",parameters:[],success:function(e){"1"===e.body.ec?"0"===n?o="0":"1"===n&&(o="1"):"0"===e.body.ec&&(console.log("什么毛病"),o="2",console.error("需要调用客户端方法判断是否开启了定位"),t.$router.push({name:"card_face_geekCardCantVerifyGather",params:{status:o}}))}})}else"0"===e.body.ec&&(o="3")}})}else"8235"===e.judgeInfo.cardCode?console.log("该卡为摆范卡"):"r"===e.judgeInfo.rOrV?"00"===o?(console.log("进入R标卡自助激活"),t.$router.push({name:"card_face_rCardSelfAct"})):"02"===o?console.log("R标卡进入网电卡无卡激活流程"):(t.$vux.alert.show({title:"预激活校验失败",content:"该卡无法线上激活"}),console.error("此处待确定怎么走")):"v"===e.judgeInfo.rOrV?window.client.invokeOcr().then(function(o){o===e.cardNum?t.$router.push({name:"card_face_vCardActVerify",params:{cardNum:e.cardNum}}):t.$vux.alert.show({title:"扫描失败",content:"当前扫描的卡号与待激活的卡号不一致",onShow:function(){console.error("返回原生OCR页面，暂缺")}})}):(console.log("进入普通实体卡预激活校验"),"00"===o?(console.log("进入第三步"),t.$router.push({name:"card_face_commonCardActOnline"})):"02"===o?console.log("进入网电卡有卡激活流程"):t.$router.push({name:"card_face_commonCardCantActOnline"}))})},a=function(e,t){window.client.request({url:"/api/CAMH0322.json",adapter:"CommonAdapter",procedure:"MH0322",parameters:[e],success:function(e){"00"===e.body.returnCode?t.$vux.toast.show({type:"text",text:"短信验证码错误",width:"3rem"}):"01"===e.body.returnCode?t.$vux.toast.show({type:"cancel",text:"卡片信息不匹配",width:"3rem"}):"03"===e.body.returnCode?t.$vux.alert.show({title:"激活失败",content:"系统返回错误原因",onHide:function(){console.log("返回激活页面")}}):"10"===e.body.returnCode?t.$router.push({name:"card_face_commonCardActRes",params:{btnText:"添加卡片",successTips:"卡片激活成功",showPro:!0,showBottom:!0}}):"11"===e.body.returnCode&&t.$router.push({name:"card_face_commonCardActRes",params:{btnText:"同步注册并添加卡片",successTips:"卡片激活成功",showPro:!1,showBottom:!1}})}})},s=function(e){var t={tranCode:"MH0240",srcChannle:"MH",transferFlowNoNew:"440682199407156331",busCode:"PW",SMSID:"M1",TEMPLATEID:"081M100104",STDINFOTYP:encodeURI("您的验证码是"),smsLimitFlag:"Y",SMSFlag:"1"};window.client.request({url:"/api/CAMH0240.json",adapter:"CommonAdapter",procedure:"MH0240",parameters:[t],success:function(t){"0"===t.body.ec&&e.$vux.toast.show({type:"text",text:"已发送验证码"}),console.log("此处还需优化，倒计时应在toast后开始")}})},c=function(e){return!!/^\d{6}$/.test(e)},i=function(e){var t={mobileNo:"",busCode:"CA",SMSID:"F6",TEMPLATEID:"057F600258",STDINFOTYP:encodeURI("激活信用卡"),smsLimitFlag:"Y",SMSFlag:"1",TRADETYPE:encodeURI("发现精彩")};window.client.request({url:"/api/CAMH0314.json",adapter:"CommonAdapter",procedure:"MH0314",parameters:[t],success:function(t){e.$vux.toast.show({type:"text",text:"验证码已发送",width:"4rem"})}})}},kuuB:function(e,t,o){"use strict";var n=o("CKVb"),r=o("fvyU"),a=o("V5xh"),s=o("vp6S"),c=o("9r/T");o.n(c);t.a={name:"showCard",data:function(){return{cardList:[],hasCard:!0}},computed:{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data}},components:{Group:n.a,XInput:r.a},methods:{openSwipCard:function(){var e=this;window.client.invokeOCR().then(function(t){console.log(t),o.i(c.setTimeout)(function(){e.$router.push({name:"card_face_vCardScanError"})},2e3)})},renderPage:function(){var e=this,t="";"query"===this.$route.params.source?(console.log(this.$route.params.certNo),t=this.$route.params.certNo):t=this.getUserInfo.certNo;var n=this.getUserInfo.mobileNo;o.i(s.e)(n,t).then(function(o){var n=o.showCard,r=o.cardInfos;!1===n?(e.hasCard=!1,console.log(t)):(e.cardList=r,console.log(r))})},rCardActApply:function(){var e=this,t="",o={tranCode:"MH0310",srcChannel:"MH",transferFlowNoNew:"",mobileNo:"",customerId:"",accountNo:"",validDate:""};window.client.request({url:"/api/CAMH0310.json",adapter:"CommonAdapter",procedure:"MH0310",parameters:[o],success:function(e){"0"===e.body.ec&&(t=e.body.CVV2)}});var n={tranCode:"MH0312",srcChannel:"MH",transferFlowNoNew:"",mobileNo:"",customerId:"",smsCode:"",busCode:"",CVV2:t,validDate:"",accountNo:"",tranRange:"",safeToolType:""};window.client.request({url:"/api/CAMH0312.json",adapter:"CommonAdapter",procedure:"MH0312",parameters:[n],success:function(t){"0"===t.body.ec?e.$router.push({name:"card_face_rCardActAndAdd"}):"1"===t.body.ec?e.$router.push({name:"card_face_rCardOnlyAct"}):"2"===t.body.ec?e.$vux.toast.show({type:"text",text:"验证码错误",width:"4rem"}):"3"===t.body.ec&&e.$vux.alert.show({title:"激活失败",content:"系统返回错误原因",buttonText:"我知道了"})}})},judgeAct:function(e){o.i(a.c)(e,this)},getVcode:function(){var e=this,t={mobileNo:"",busCode:"CA",SMSID:"F6",TEMPLATEID:"057F600258",STDINFOTYP:encodeURI("激活信用卡"),smsLimitFlag:"Y",SMSFlag:"1",TRADETYPE:encodeURI("发现精彩")};window.client.request({url:"/api/CAMH0314.json",adapter:"CommonAdapter",procedure:"MH0314",parameters:[t],success:function(t){e.$vux.toast.show({type:"text",text:"验证码已发送",width:"4rem"})}})},viewVCardInfo:function(){var e=this;window.client.request({url:"/api/CAMH0639.json",adapter:"CommonAdapter",procedure:"MH0639",parameters:[],success:function(t){"0"===t.body.ec?e.$router.push({name:"card_face_vCardViewRes",params:{status:"hasInfo"}}):"1"===t.body.ec?e.$router.push({name:"card_face_vCardViewRes",params:{status:"noneInfo"}}):"2"===t.body.ec&&e.$router.push({name:"card_face_vCardViewRes",params:{status:"overTime"}})}})},queryApply:function(){console.log("跳转到卡片申请模块")}},created:function(){this.renderPage()}}},umiq:function(e,t){},vczA:function(e,t,o){e.exports=o.p+"static/img/tips.png"},vp6S:function(e,t,o){"use strict";o.d(t,"e",function(){return c}),o.d(t,"c",function(){return i}),o.d(t,"d",function(){return u}),o.d(t,"a",function(){return d}),o.d(t,"b",function(){return l});var n=o("4YfN"),r=o.n(n),a=o("rVsN"),s=o.n(a),c=function(e,t){return new s.a(function(o,n){var a={url:"/api/CAMH0638.json",adapter:"CommonAdapter",funName:"",parameters:{tranCode:"MH0638",srcChannel:"MH",transferFlowNoNew:"",mobileNo:e,customerId:t,custName:"",endTime:"",startTime:""}};window.client.request(r()({},a,{success:function(e){var t=e.header,r=e.body;if("0"===t.errorCode){var a=r.showCard,s=r.cardInfos;o({showCard:a,cardInfos:s})}else n(r.em)}}))})},i=function(e){return new s.a(function(t,o){var n={url:"api/CAMH0234.json",adapter:"CommonAdapter",funName:"second_MH0234",isLogin:!0,parameters:{tranCode:"MH0234",srcChannel:"MH",cardNo:e}};window.client.request(r()({},n,{success:function(e){var n=e.header,r=e.body;"0"===n.errorCode?t(r.cardActiveCheck):o(r.em)}}))})},u=function(){return new s.a(function(e,t){var o={url:"api/CAMH0314.json",adapter:"CommonAdapter",funName:"",isLogin:!0,parameters:{mobileNo:"",busCode:"CA",SMSID:"F6",TEMPLATEID:"057F600258",STDINFOTYP:encodeURI("激活信用卡"),smsLimitFlag:"Y",SMSFlag:"1",TRADETYPE:encodeURI("发现精彩")}};window.client.request(r()({},o,{success:function(o){var n=o.header,r=o.body;"0"===n.errorCode&&"0"===r.ec?(e(r.mobileNo),console.log("R卡激活发送验证码")):t(r.em)}}))})},d=function(e){return new s.a(function(t,o){var n={url:"api/CAMH0083.json",adapter:"CommonAdapter",funName:"MH0083_unlogin",isLogin:!0,parameters:{tranCode:"MH0083",srcChannel:"MH",creditCardNo:"",certType:"",certNo:"",cardValidPeriod:"",cvv2Code:"",mobile:"",isNeedFlag:"1"}};window.client.request(r()({},n,{success:function(o){var n=o.header,r=o.body;"0"===n.errorCode&&"0"===r.ec?(t(),console.log("R卡校验成功正式激活")):e.$vux.toast.show({type:"text",text:r.em})}}))})},l=function(){return new s.a(function(e,t){var o={url:"api/CAMH0083.json",adapter:"CommonAdapter",funName:"MH0311_unlogin",isLogin:!0,parameters:{mobileNo:"",smsCode:"",busCode:"CO",safeToolType:"",accountNo:"",tranRange:"",validDate:"",CVV2:""}};window.client.request(r()({},o,{success:function(e){var t=e.header,o=e.body;"0"===t.errorCode&&"0"===o.ec?jQuery.goPage("cdbank_marketingCard","cdbank_marketingCard_open_body"):"PP010110"==o.ec||"PP010109"==o.ec?that.$vux.toast.show({type:"text",text:o.em}):that.$vux.alert.show({title:"卡片开通失败",content:"失败原因：系统错误",buttonText:"确认"})}}))})}}});