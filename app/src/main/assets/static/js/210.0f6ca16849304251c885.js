webpackJsonp([210],{"8Qoa":function(t,e,a){"use strict";function o(t){a("LHlW")}Object.defineProperty(e,"__esModule",{value:!0});var r=(a("T4xr"),a("EwOW")),n=a("i5jg"),s=a("C7Lr"),c=o,i=s(r.a,n.a,!1,c,null,null);e.default=i.exports},EwOW:function(t,e,a){"use strict";var o=a("4YfN"),r=a.n(o),n=a("aA9S"),s=a.n(n),c=a("JGLT"),i=a("gpPJ"),d=a("CKVb"),u=a("fvyU"),l=a("IXui"),p=a("f4gh"),m=a("HVJf");e.a={name:"add_details",data:function(){return{phoneNo:"",checkedIcon:!0,identifyingCode:"",countting:!1,showToast:!1,toastText:"",ADDCREDITVIEW04:{},pageParams:this.routerParams,getCodeText:"获取"}},methods:{goBack:function(){window.client.goBack()},getCode:function(){console.log("调用相机")},goAgreement:function(){this.$router.push({name:"user_protocol"})},getParams:function(){this.routerParams=this.$route.params.newCard,console.log(routerParams)},creditAddConfirm:function(){var t=this,e={tranCode:"",srcChannel:"",merId:"",transType:"",data:"",signData:"",remark:"",accNo:this.pageParams.virtualCardNo,phone:this.phoneNo};window.client.request({url:"api/MH0345.json",adapter:"CommonAdapter",procedure:"second_MH0345",parameters:[e],success:function(e){var a=e.invocationResult,o=a.root;if("0"==o.ec){t.ADDCREDITVIEW04=s()({},t.ADDCREDITVIEW04,{orderId:o.cd.orderId,merId:o.cd.merId,txnTime:o.cd.txnTime,encryptCertId:o.cd.encryptCertId,certId:o.cd.certId,customerInfo:o.cd.customerInfoMo});var r={linkType:3,picsLink:o.cd.url,url:o.cd.url,accNo:decodeURIComponent(o.cd.accNo),accType:o.cd.accType,accessType:o.cd.accessType,backUrl:o.cd.backUrl,bizType:o.cd.bizType,certId:o.cd.certId,channelType:o.cd.channelType,customerInfo:decodeURIComponent(o.cd.customerInfoMo),encoding:o.cd.encoding,frontUrl:o.cd.frontUrl,merId:o.cd.merId,orderId:o.cd.orderId,payTimeout:o.cd.payTimeout,signMethod:o.cd.signMethod,tokenPayData:o.cd.tokenPayData,txnSubType:o.cd.txnSubType,txnTime:o.cd.txnTime,txnType:o.cd.txnType,version:o.cd.version,encryptCertId:o.cd.encryptCertId,signature:decodeURIComponent(o.cd.signData)};window.client.navigate(r),t.newThirdPartyEvent()}else t.showToastFunc(o.em)}})},newThirdPartyEvent:function(){var t=this,e=this.pageParams,a=e.virtualCardNo.substr(0,6),o=e.virtualCardNo.substr(e.virtualCardNo.length-4,4),r={};r.tranCode="",r.srcChannel="",r.mobileNo="",r.txnType="",r.txnSubType="",r.bizType="",r.accessType="",r.channelType="",r.acqInsCode="",r.merId="",r.merName="",r.merAbbr="",r.subMerId="",r.subMerName="",r.subMerAbbr="",r.orderId="",r.txnTime="",r.accNo="",r.customerInfo="",r.encryptCertId="",r.encryptCard=e.virtualCardNo,r.cardFrontNo=a,r.cardEndNo=o,r.accType="",window.client.request({url:"api/MH0346.json",adapter:"CommonAdapter",procedure:"second_MH0346",parameters:[r]}).then(function(e){var a=e.invocationResult;t.$store.commit("addCreditStore/setPageData",{key:"delta_status",value:-3});var o=a.root;t.$router.push({name:"add_details_success",params:{cardNo:t.pageParams.virtualCardNo,status:o.ec,error:o.em,activateStatus:o.cd.activateStatus,setPayPwdInfo_Random:o.cd.setPayPwdInfo_Random}})})},protocolChoosed:function(){this.checkedIcon=!this.checkedIcon},showPswKeyboard:function(){window.client.showPswKeyboard({isSpecialPassWordRequired:!0,maxSize:"6",ps:"AE0"})},showToastFunc:function(t){this.toastText=t,this.showToast=!0},onHide:function(){this.showToast=!1}},computed:r()({},a.i(m.b)(["invocationResult","iosPlatform"]),{status:function(){return!/^[1][3,4,5,7,8][0-9]{9}$/.test(this.phoneNo)},getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data")}}),components:{Confirm:c.a,Cell:i.a,Group:d.a,XInput:u.a,XButton:l.a,Toast:p.a},created:function(){var t=this.getUserInfo.data.customerNameCN,e=this.getUserInfo.data.certType,a=this.getUserInfo.data.certNo,o="0"===e?"身份证":"其他类型",r=this.$store.state.addCreditStore.addDetails;this.pageParams=s()(r,{certType:o,customerNameCN:t,certNo:a}),console.log(this.pageParams)},beforeDestroy:function(){},directives:{},filters:{noFilter:function(t){if(t)return t.substr(0,4)+"****"+t.substr(t.length-4,4)},nameFilter:function(t){if(t){var e=t.split(" ");return e[0]+"*"+e[e.length-1]}return t}}}},LHlW:function(t,e){},T4xr:function(t,e,a){"use strict";var o=a("4YfN"),r=a.n(o),n=a("aA9S"),s=a.n(n),c=a("JGLT"),i=a("gpPJ"),d=a("CKVb"),u=a("fvyU"),l=a("IXui"),p=a("f4gh"),m=a("HVJf");r()({},a.i(m.b)(["invocationResult","iosPlatform"]),{status:function(){return!/^[1][3,4,5,7,8][0-9]{9}$/.test(this.phoneNo)},getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data")}}),c.a,i.a,d.a,u.a,l.a,p.a},XKrT:function(t,e,a){t.exports=a.p+"static/img/protocolChoosed.png"},i5jg:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("xcgb-box",[o("xcgb-head",{attrs:{keepAlive:!1,title:"添加卡片",leftOptions:[{type:"left_arrow_black"}]},on:{leftHandler:t.goBack}}),t._v(" "),o("div",{staticClass:"main add_details"},[o("group",{attrs:{"label-width":"6em",title:"请绑定持卡人本人的银行卡"}},[o("cell",{attrs:{title:"卡号",value:t._f("noFilter")(t.pageParams.virtualCardNo)}}),t._v(" "),o("cell",{attrs:{title:"姓名",value:t._f("nameFilter")(t.pageParams.customerNameCN)}}),t._v(" "),o("cell",{attrs:{title:"证件",value:t.pageParams.certType}}),t._v(" "),o("cell",{attrs:{title:"证件号",value:t._f("noFilter")(t.pageParams.certNo)}})],1),t._v(" "),o("group",[o("x-input",{attrs:{max:11,placeholder:"银行预留手机号",type:"tel"},model:{value:t.phoneNo,callback:function(e){t.phoneNo=e},expression:"phoneNo"}})],1),t._v(" "),o("div",{staticClass:"add_credit_xieyi"},[o("img",{directives:[{name:"show",rawName:"v-show",value:t.checkedIcon,expression:"checkedIcon"}],staticClass:"add_credit_images2",attrs:{src:a("XKrT")},on:{click:t.protocolChoosed}}),t._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:!t.checkedIcon,expression:"!checkedIcon"}],staticClass:"add_credit_images1",attrs:{src:a("ltTk")},on:{click:t.protocolChoosed}}),t._v(" "),o("div",{staticClass:"add_credit_tongyi"},[t._v("\n        我已阅读并同意\n        "),o("span",{staticClass:"add_credit_gogogo",on:{click:function(e){t.goAgreement()}}},[t._v("《广发银行发现精彩客户端协议》")])]),t._v(" "),o("div",{staticClass:"add_credit-xbtn"},[o("x-button",{attrs:{"action-type":"button",disabled:!!t.status,type:[t.status?"default":"warn"]},nativeOn:{click:function(e){return t.creditAddConfirm(e)}}},[t._v("下一步")])],1),t._v(" "),o("toast",{attrs:{type:"text",width:"auto"},on:{"on-hide":t.onHide},model:{value:t.showToast,callback:function(e){t.showToast=e},expression:"showToast"}},[o("p",{staticClass:"toast-tips"},[t._v(t._s(t.toastText))])])],1)],1)],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},ltTk:function(t,e,a){t.exports=a.p+"static/img/protocolNotChoose.png"}});