webpackJsonp([138],{"/rlA":function(e,t,o){"use strict";function n(e){o("t435")}var r=(o("o0jH"),o("bK72")),a=o("aWTp"),c=o("C7Lr"),s=n,i=c(r.a,a.a,!1,s,null,null);t.a=i.exports},"0Xid":function(e,t,o){"use strict";var n=o("CKVb"),r=o("fvyU"),a=o("gpPJ"),c=o("/rlA"),s=o("V5xh");t.a={name:"commonCardActOnline",data:function(){return{title:"广发聪明卡（5968）",cvv2Val:"",vcode:""}},computed:{clickContrl:function(){var e=/^\w{3}$/,t=/^\w{6}$/,o=e.test(this.cvv2Val),n=t.test(this.vcode);return o&&n}},components:{Group:n.a,XInput:r.a,getVcodeBtn:c.a,Cell:a.a},methods:{affirmAct:function(){var e={tranCode:"MH0322",srcChannel:"MH",transferFlowNoNew:"",mobileNo:"18825142063",customerId:"",validDate:"",cvv2Code:this.cvv2Val,accountNo:"",certType:"",certNo:"",addCardFlag:"",busCode:"",smsCode:this.vcode,equipment_id:""};o.i(s.e)(e,this)},getVcode:function(){console.log("改了")}}}},"70sW":function(e,t){},V5xh:function(e,t,o){"use strict";o.d(t,"c",function(){return r}),o.d(t,"e",function(){return a}),o.d(t,"b",function(){return c}),o.d(t,"d",function(){return s}),o.d(t,"a",function(){return i});var n=o("vp6S"),r=function(e,t){o.i(n.c)(e.cardNo).then(function(o){if("6086"===e.judgeInfo.cardCode)console.log("后续流程请参看E秒购卡激活流程");else if("8234"===e.judgeInfo.cardCode){console.log("后续流程请参看极客卡激活流程");window.client.request({url:"/api/CAMH0365.json",adapter:"CommonAdapter",procedure:"MH0365",parameters:[],success:function(e){var o="";if("1"===e.body.ec){var n=e.body.em;window.client.request({url:"/api/CAMH0364.json",adapter:"CommonAdapter",procedure:"MH0364",parameters:[],success:function(e){"1"===e.body.ec?"0"===n?o="0":"1"===n&&(o="1"):"0"===e.body.ec&&(console.log("什么毛病"),o="2",console.error("需要调用客户端方法判断是否开启了定位"),t.$router.push({name:"card_face_geekCardCantVerifyGather",params:{status:o}}))}})}else"0"===e.body.ec&&(o="3")}})}else"8235"===e.judgeInfo.cardCode?console.log("该卡为摆范卡"):"r"===e.judgeInfo.rOrV?"00"===o?(console.log("进入R标卡自助激活"),t.$router.push({name:"card_face_rCardSelfAct"})):"02"===o?console.log("R标卡进入网电卡无卡激活流程"):(t.$vux.alert.show({title:"预激活校验失败",content:"该卡无法线上激活"}),console.error("此处待确定怎么走")):"v"===e.judgeInfo.rOrV?window.client.invokeOcr().then(function(o){o===e.cardNum?t.$router.push({name:"card_face_vCardActVerify",params:{cardNum:e.cardNum}}):t.$vux.alert.show({title:"扫描失败",content:"当前扫描的卡号与待激活的卡号不一致",onShow:function(){console.error("返回原生OCR页面，暂缺")}})}):(console.log("进入普通实体卡预激活校验"),"00"===o?(console.log("进入第三步"),t.$router.push({name:"card_face_commonCardActOnline"})):"02"===o?console.log("进入网电卡有卡激活流程"):t.$router.push({name:"card_face_commonCardCantActOnline"}))})},a=function(e,t){window.client.request({url:"/api/CAMH0322.json",adapter:"CommonAdapter",procedure:"MH0322",parameters:[e],success:function(e){"00"===e.body.returnCode?t.$vux.toast.show({type:"text",text:"短信验证码错误",width:"3rem"}):"01"===e.body.returnCode?t.$vux.toast.show({type:"cancel",text:"卡片信息不匹配",width:"3rem"}):"03"===e.body.returnCode?t.$vux.alert.show({title:"激活失败",content:"系统返回错误原因",onHide:function(){console.log("返回激活页面")}}):"10"===e.body.returnCode?t.$router.push({name:"card_face_commonCardActRes",params:{btnText:"添加卡片",successTips:"卡片激活成功",showPro:!0,showBottom:!0}}):"11"===e.body.returnCode&&t.$router.push({name:"card_face_commonCardActRes",params:{btnText:"同步注册并添加卡片",successTips:"卡片激活成功",showPro:!1,showBottom:!1}})}})},c=function(e){var t={tranCode:"MH0240",srcChannle:"MH",transferFlowNoNew:"440682199407156331",busCode:"PW",SMSID:"M1",TEMPLATEID:"081M100104",STDINFOTYP:encodeURI("您的验证码是"),smsLimitFlag:"Y",SMSFlag:"1"};window.client.request({url:"/api/CAMH0240.json",adapter:"CommonAdapter",procedure:"MH0240",parameters:[t],success:function(t){"0"===t.body.ec&&e.$vux.toast.show({type:"text",text:"已发送验证码"}),console.log("此处还需优化，倒计时应在toast后开始")}})},s=function(e){return!!/^\d{6}$/.test(e)},i=function(e){var t={mobileNo:"",busCode:"CA",SMSID:"F6",TEMPLATEID:"057F600258",STDINFOTYP:encodeURI("激活信用卡"),smsLimitFlag:"Y",SMSFlag:"1",TRADETYPE:encodeURI("发现精彩")};window.client.request({url:"/api/CAMH0314.json",adapter:"CommonAdapter",procedure:"MH0314",parameters:[t],success:function(t){e.$vux.toast.show({type:"text",text:"验证码已发送",width:"4rem"})}})}},aWTp:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("x-button",{staticClass:"getVcodeBtn",attrs:{type:"",disabled:e.clickControl,mini:""},nativeOn:{click:function(t){return e.getVcode(t)}}},[e.sendMsg?o("span",{staticClass:"count_backwards"},[e._v(e._s(e.time+"s"))]):e._e(),e._v(" "),e.sendMsg?e._e():o("span",[e._v("获取")])])},r=[],a={render:n,staticRenderFns:r};t.a=a},bK72:function(e,t,o){"use strict";var n=o("rVsN"),r=o.n(n),a=o("IXui"),c=o("vp6S");t.a={name:"getVcodeBtn",data:function(){return{clickControl:!1,sendMsg:!1,time:59}},props:["vcodeFlag"],components:{XButton:a.a},methods:{getVcode:function(){var e=this,t=function(t){return new r.a(function(o,n){var r=t.slice(t.length-4,t.length-1);e.$vux.toast.show({type:"text",text:"已向尾号为 "+r+" 的手机号发送验证码",width:"4rem"}),o()})},n=function(){e.sendMsg=!0,e.clickControl=!0,e.$emit("getVcodeFun");var t=setInterval(function(){e.time--<=0&&(e.time=60,e.sendMsg=!1,e.clickControl=!1,window.clearInterval(t))},1e3)};console.log(this.vcodeFlag),"rCardSelfAct"!==this.vcodeFlag&&"vCardOpenSwip"!==this.vcodeFlag||o.i(c.d)().then(t).then(n)}}}},"d+9e":function(e,t,o){"use strict";var n=o("CKVb"),r=o("fvyU"),a=o("gpPJ"),c=o("/rlA"),s=o("V5xh");n.a,r.a,c.a,a.a},f8vy:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("xcgb-box",[n("xcgb-head",{attrs:{title:"激活卡片",keepAlive:!1,leftOptions:[{type:"left_arrow_black"}]}}),e._v(" "),n("div",{staticClass:"main"},[n("group",{attrs:{gutter:"0"}},[n("cell",{staticClass:"title",attrs:{title:e.title}})],1),e._v(" "),n("group",{staticClass:"input",attrs:{gutter:"0"}},[n("x-input",{attrs:{max:3,title:"CVV2",placeholder:"输入卡背面签名栏末3位数"},model:{value:e.cvv2Val,callback:function(t){e.cvv2Val=t},expression:"cvv2Val"}},[n("img",{staticClass:"help",attrs:{slot:"right",src:o("vczA")},slot:"right"})]),e._v(" "),n("x-input",{attrs:{title:"验证码",placeholder:"输入短信验证码",max:6},model:{value:e.vcode,callback:function(t){e.vcode=t},expression:"vcode"}},[n("get-vcode-btn",{attrs:{slot:"right"},on:{getVcodeFun:e.getVcode},slot:"right"})],1)],1),e._v(" "),n("div",{staticClass:"bottom"},[n("x-button",{staticClass:"agree",attrs:{disabled:!e.clickContrl,plain:!1},on:{clickHandler:e.affirmAct}},[e._t("default",[e._v("确认激活")])],2),e._v(" "),n("div",{staticClass:"warnTips"},[n("p",[e._v("温馨提示")]),e._v(" "),n("p",[e._v("\n          如卡片为白金卡，开通当天将扣收年费。"),n("span",[e._v("收费标准>>")])]),e._v(" "),n("p",[e._v("1.新发卡（电话营销，网络营销卡除外）")]),e._v(" "),n("p",[e._v("1.新发卡（电话营销，网络营销卡除外）")])])],1)],1)],1)},r=[],a={render:n,staticRenderFns:r};t.a=a},o0jH:function(e,t,o){"use strict";var n=o("rVsN"),r=o.n(n),a=o("IXui"),c=o("vp6S");a.a},t435:function(e,t){},uybj:function(e,t,o){"use strict";function n(e){o("70sW")}Object.defineProperty(t,"__esModule",{value:!0});var r=(o("d+9e"),o("0Xid")),a=o("f8vy"),c=o("C7Lr"),s=n,i=c(r.a,a.a,!1,s,null,null);t.default=i.exports},vczA:function(e,t,o){e.exports=o.p+"static/img/tips.png"},vp6S:function(e,t,o){"use strict";o.d(t,"e",function(){return s}),o.d(t,"c",function(){return i}),o.d(t,"d",function(){return u}),o.d(t,"a",function(){return d}),o.d(t,"b",function(){return l});var n=o("4YfN"),r=o.n(n),a=o("rVsN"),c=o.n(a),s=function(e,t){return new c.a(function(o,n){var a={url:"/api/CAMH0638.json",adapter:"CommonAdapter",funName:"",parameters:{tranCode:"MH0638",srcChannel:"MH",transferFlowNoNew:"",mobileNo:e,customerId:t,custName:"",endTime:"",startTime:""}};window.client.request(r()({},a,{success:function(e){var t=e.header,r=e.body;if("0"===t.errorCode){var a=r.showCard,c=r.cardInfos;o({showCard:a,cardInfos:c})}else n(r.em)}}))})},i=function(e){return new c.a(function(t,o){var n={url:"api/CAMH0234.json",adapter:"CommonAdapter",funName:"second_MH0234",isLogin:!0,parameters:{tranCode:"MH0234",srcChannel:"MH",cardNo:e}};window.client.request(r()({},n,{success:function(e){var n=e.header,r=e.body;"0"===n.errorCode?t(r.cardActiveCheck):o(r.em)}}))})},u=function(){return new c.a(function(e,t){var o={url:"api/CAMH0314.json",adapter:"CommonAdapter",funName:"",isLogin:!0,parameters:{mobileNo:"",busCode:"CA",SMSID:"F6",TEMPLATEID:"057F600258",STDINFOTYP:encodeURI("激活信用卡"),smsLimitFlag:"Y",SMSFlag:"1",TRADETYPE:encodeURI("发现精彩")}};window.client.request(r()({},o,{success:function(o){var n=o.header,r=o.body;"0"===n.errorCode&&"0"===r.ec?(e(r.mobileNo),console.log("R卡激活发送验证码")):t(r.em)}}))})},d=function(e){return new c.a(function(t,o){var n={url:"api/CAMH0083.json",adapter:"CommonAdapter",funName:"MH0083_unlogin",isLogin:!0,parameters:{tranCode:"MH0083",srcChannel:"MH",creditCardNo:"",certType:"",certNo:"",cardValidPeriod:"",cvv2Code:"",mobile:"",isNeedFlag:"1"}};window.client.request(r()({},n,{success:function(o){var n=o.header,r=o.body;"0"===n.errorCode&&"0"===r.ec?(t(),console.log("R卡校验成功正式激活")):e.$vux.toast.show({type:"text",text:r.em})}}))})},l=function(){return new c.a(function(e,t){var o={url:"api/CAMH0083.json",adapter:"CommonAdapter",funName:"MH0311_unlogin",isLogin:!0,parameters:{mobileNo:"",smsCode:"",busCode:"CO",safeToolType:"",accountNo:"",tranRange:"",validDate:"",CVV2:""}};window.client.request(r()({},o,{success:function(e){var t=e.header,o=e.body;"0"===t.errorCode&&"0"===o.ec?jQuery.goPage("cdbank_marketingCard","cdbank_marketingCard_open_body"):"PP010110"==o.ec||"PP010109"==o.ec?that.$vux.toast.show({type:"text",text:o.em}):that.$vux.alert.show({title:"卡片开通失败",content:"失败原因：系统错误",buttonText:"确认"})}}))})}}});