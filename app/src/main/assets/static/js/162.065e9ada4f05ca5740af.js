webpackJsonp([162],{"/sJ3":function(t,e,o){"use strict";var s=o("f4gh"),n=o("Nqtu"),a=o("NeOf");e.a={name:"getToken",props:["mobileNo"],data:function(){return{token:"",time:60,start:!1,showToastFlag:!1,text:""}},components:{Toast:s.a,Countdown:n.a},watch:{token:function(t,e){t&&6==t.length&&this.$emit("isToken",t)}},methods:{finish2:function(t){this.start=!1,this.time=60},showToast:function(t){this.showToastFlag=!0,this.text=t},noToken:function(){this.$router.push({name:"sign_noToken"})},getToken:function(){var t=this,e=/^[1][0-9]{10}$/;if(!this.mobileNo)return void this.showToast("请输入手机号！");if(!e.test(this.mobileNo))return void this.showToast("输入手机号不正确！");var o=a.a.DES.encrypt(this.mobileNo,"cgbbank.credit.card.project.2016");window.client.request({url:"/api/token.json",adapter:"CommonAdapter",procedure:"control_unlogin",parameters:{value:o.toString(),funName:"second_MH0318",type:"json"},success:function(e){var o=e.invocationResult,s=o.root;s.ec?s.cd.optionFlag?t.start=!0:t.showToast("请勿重复获取短信验证码！"):t.showToast(s.em)}})}}}},"2h1c":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("xcgb-box",[s("xcgb-head",{attrs:{title:"登录/注册",keepAlive:!1,leftOptions:[{type:"left_arrow_black"}]}}),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"sign_register"},[s("p",{staticClass:"register-account"},[s("img",{attrs:{src:o("D7k5")}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mobileNo,expression:"mobileNo"}],staticClass:"needsclick",attrs:{type:"text",name:"account",placeholder:"输入手机号码",maxlength:"20"},domProps:{value:t.mobileNo},on:{input:function(e){e.target.composing||(t.mobileNo=e.target.value)}}})]),t._v(" "),s("get-token",{attrs:{mobileNo:t.mobileNo},on:{isToken:t.checkToken}}),t._v(" "),s("x-button",{attrs:{"action-type":"button",disabled:!t.status},nativeOn:{click:function(e){return t.toNext(e)}}},[t._v("下一步")]),t._v(" "),s("toast",{attrs:{type:"text",width:"auto"},model:{value:t.showToastFlag,callback:function(e){t.showToastFlag=e},expression:"showToastFlag"}},[s("p",{staticClass:"tips"},[t._v(t._s(t.text))])])],1)])],1)},n=[],a={render:s,staticRenderFns:n};e.a=a},"93hd":function(t,e){},"9jWZ":function(t,e,o){"use strict";function s(t){o("ZdpQ")}Object.defineProperty(e,"__esModule",{value:!0});var n=(o("OlqI"),o("jDNB")),a=o("2h1c"),i=o("C7Lr"),r=s,c=i(n.a,a.a,!1,r,null,null);e.default=c.exports},OlqI:function(t,e,o){"use strict";var s=o("f9VB"),n=o("IXui"),a=o("f4gh");n.a,a.a,s.a},ZdpQ:function(t,e){},"f+h1":function(t,e,o){"use strict";var s=o("f4gh"),n=o("Nqtu"),a=o("NeOf");s.a,n.a},f9VB:function(t,e,o){"use strict";function s(t){o("93hd")}var n=(o("f+h1"),o("/sJ3")),a=o("tT4m"),i=o("C7Lr"),r=s,c=i(n.a,a.a,!1,r,null,null);e.a=c.exports},jDNB:function(t,e,o){"use strict";var s=o("f9VB"),n=o("IXui"),a=o("f4gh");e.a={name:"register",data:function(){return{mobileNo:"",tokenFlag:"",showToastFlag:!1,text:""}},computed:{status:function(){return this.mobileNo&&this.tokenFlag&&this.tokenFlag.length>5}},components:{XButton:n.a,Toast:a.a,getToken:s.a},methods:{showToast:function(t){this.showToastFlag=!0,this.text=t},toNext:function(){var t=this;if(this.tokenFlag.length>6||!/^[0-9]{6}$/.test(this.tokenFlag))return void this.showToast("请输入6位数字的验证码");window.client.request({url:"api/second_MH0420.json",adapter:"CommonAdapter",procedure:"second_MH0420",parameters:{mobileNo:this.mobileNo,smsCode:this.token,transferFlowNoNew:(new Date).getTime(),tranCode:"MH0420",busCode:"JY"},success:function(e){var o=e.invocationResult.root;"0"==o.ec?t.$router.push({name:"sign_quickRegister",params:{mobileNo:t.mobileNo,signStr:o.signStr}}):"EBJY4007"==o.ec?(t.$store.commit("loginStore/setNo",t.mobileNo),t.$router.push({name:"sign_login"})):t.showToast(o.em)}})},checkToken:function(t){this.tokenFlag=t}}}},tT4m:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"get-token"},[s("p",{staticClass:"register-password"},[s("span",[s("img",{attrs:{src:o("+J6o")}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.token,expression:"token"}],staticClass:"needsclick",attrs:{type:"text",name:"password",placeholder:"输入短信验证码",maxlength:"12"},domProps:{value:t.token},on:{input:function(e){e.target.composing||(t.token=e.target.value)}}})]),t._v(" "),s("span",{staticClass:"get-message",on:{click:t.getToken}},[t.start?t._e():s("i",[t._v("获取")]),t._v(" "),t.start?s("countdown",{attrs:{start:t.start},on:{"on-finish":t.finish2},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}):t._e(),t._v(" "),t.start?s("i",[t._v("s")]):t._e()],1)]),t._v(" "),s("div",{staticClass:"register-tips"},[s("p"),t._v(" "),s("p",{on:{click:t.noToken}},[t._v("收不到验证码")])]),t._v(" "),s("toast",{attrs:{type:"text",width:"auto"},model:{value:t.showToastFlag,callback:function(e){t.showToastFlag=e},expression:"showToastFlag"}},[s("p",{staticClass:"tips"},[t._v(t._s(t.text))])])],1)},n=[],a={render:s,staticRenderFns:n};e.a=a}});