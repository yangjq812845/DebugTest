webpackJsonp([268],{"6sBI":function(t,e,o){"use strict";function s(t){o("ayTy")}Object.defineProperty(e,"__esModule",{value:!0});var a=(o("i4vk"),o("ovbU")),i=o("PFbb"),n=o("C7Lr"),r=s,c=n(a.a,i.a,!1,r,null,null);e.default=c.exports},PFbb:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("xcgb-box",{staticClass:"scedule_container"},[s("xcgb-head",{attrs:{title:"申请进度查询",keepAlive:!1,leftOptions:[{type:"left_arrow_black"}]}}),t._v(" "),s("div",{staticClass:"main"},[s("ul",{staticClass:"scedul_content"},[s("li",{staticClass:"sceduAcct"},[s("span",[t._v("证件号")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.certNo,expression:"certNo"}],class:{addRed:t.idChangeRed},attrs:{type:"text",name:"caac",placeholder:"请输入证件号码",maxlength:"18"},domProps:{value:t.certNo},on:{focus:t.onfocus,input:function(e){e.target.composing||(t.certNo=e.target.value)}}}),s("img",{attrs:{src:o("Wq38"),alt:"相机"},on:{click:t.scanIDCard}})]),t._v(" "),s("li",{staticClass:"sceduAcct"},[s("span",[t._v("手机号")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mobileNo,expression:"mobileNo"}],class:{addRed:t.phChangeRed},attrs:{type:"text",name:"phon",placeholder:"请输入银行预留手机号",maxlength:"13"},domProps:{value:t.mobileNo},on:{focus:t.onfocus,input:function(e){e.target.composing||(t.mobileNo=e.target.value)}}})]),t._v(" "),s("li",{staticClass:"sceduAcct"},[s("span",[t._v("验证码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.token,expression:"token"}],attrs:{type:"text",name:"Verific",placeholder:"请输入短信验证码",maxlength:"6"},domProps:{value:t.token},on:{focus:t.onfocus,input:function(e){e.target.composing||(t.token=e.target.value)}}}),t._v(" "),s("span",{staticClass:"get_code",on:{click:t.getCode}},[t.start?t._e():s("i",[t._v("获取")]),t._v(" "),t.start?s("countdown",{attrs:{start:t.start},on:{"on-finish":t.finish2},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}):t._e(),t._v(" "),t.start?s("span",[t._v("s")]):t._e()],1)]),t._v(" "),s("x-button",{attrs:{"action-type":"button",disabled:!t.status},nativeOn:{click:function(e){return t.applicat(e)}}},[t._v("查询")])],1),t._v(" "),s("div",{staticClass:"cards_minder"},[s("h3",[t._v("温馨提示")]),t._v(" "),s("p",[t._v("1、请使用申请信用卡时所填写的证件号码和手机号进行查询;")]),t._v(" "),s("p",[t._v("2、可查询时间：一般在申请提交10个工作日后;")]),t._v(" "),s("p",[t._v("3、限查次数：每人每天3次,每月10次;")]),t._v(" "),s("p",[t._v("4、可查询寄送进度时间：非航空类新发卡，收到批核成功短信通知2-3个工作日后;航空类新发卡因需要配置会员号,在收到批核成功短信通知12个工作日后方可查询。")])]),t._v(" "),s("toast",{attrs:{value:t.showToastFlag,type:"text",width:"auto"},on:{"on-hide":t.onHide}},[s("p",{staticClass:"tips"},[t._v(t._s(t.text))])])],1)],1)},a=[],i={render:s,staticRenderFns:a};e.a=i},Wq38:function(t,e,o){t.exports=o.p+"static/img/xiangji.png"},ayTy:function(t,e){},i4vk:function(t,e,o){"use strict";var s=o("4YfN"),a=o.n(s),i=o("f4gh"),n=o("IXui"),r=o("Nqtu"),c=o("jHHs"),l=o("HVJf");i.a,n.a,r.a,c.a,a()({status:function(){return this.mobileNo&&this.token&&this.certNo&&this.token.length>5}},o.i(l.b)(["loginStatus"]),{getKey:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data.creditCardList","WL-Authentication-Success.UserInfoAuthRealm.attributes.data.defaultAccountNo","WL-Authentication-Success.UserInfoAuthRealm.attributes.data.creditCardList[0].accountNo")}})},ovbU:function(t,e,o){"use strict";var s=o("4YfN"),a=o.n(s),i=o("f4gh"),n=o("IXui"),r=o("Nqtu"),c=o("jHHs"),l=o("HVJf");e.a={name:"scedule",data:function(){return{certNo:"",mobileNo:"",token:"",idChangeRed:!1,phChangeRed:!1,time:60,start:!1,showToastFlag:!1,text:"",ec:""}},components:{Toast:i.a,XButton:n.a,Countdown:r.a,XDialog:c.a},computed:a()({status:function(){return this.mobileNo&&this.token&&this.certNo&&this.token.length>5}},o.i(l.b)(["loginStatus"]),{getKey:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data.creditCardList","WL-Authentication-Success.UserInfoAuthRealm.attributes.data.defaultAccountNo","WL-Authentication-Success.UserInfoAuthRealm.attributes.data.creditCardList[0].accountNo")}}),created:function(){this.getKey.creditCardList;this.loginStatus?this.loginStatus?this.$router.push({name:""}):cgbGetTip(""):this.cgbCreditList(function(){var t=this,e={tranCode:"MH0179",srcChannel:"MH",cardNo:""},o=this.getKey.defaultAccountNo;e.cardNo=void 0!=o&&""!=o?o:getKey.accountNo,window.client.request({url:"api/MH0179.json",adapter:"CommonAdapter",procedure:"second_MH0179",parameters:'[{"type":"json"}]',success:function(e){var o=e.root.ec;e.root.em;if("0"!=o)return void t.showToast(that.em);var s=e.root.cd.firmMobile;""!=s&&void 0!=s||(s=t.getKey.mobileNo),t.cgbGetTip(s)}})}),document.addEventListener("leftHandler",this.goBack,!1)},methods:{finish2:function(t){this.start=!1,this.time=60},onfocus:function(t){this.value=t.target.value},showToast:function(t){this.showToastFlag=!0,this.text=t},onHide:function(){this.showToastFlag=!1},scanIDCard:function(){window.client.showCamera({}).then(function(t){})},transformEm:function(t,e){var o="";switch(t){case"EBMB9018":o="当前业务您已连续获取10次短信验证码未验证通过了，请您明天再来。";break;case"PP010110":case"EBMB2055":case"EMSBNULL":case"PA040304":o="短信验证码输入有误，请重新输入。";break;case"PP010109":o="您的短信验证码输入有误或已超时，请重新输入。";break;case"EBMB2054":o="短信验证码已超时，请重新获取，谢谢！";break;case"CW0000P7":case"CW0000P9":case"CW0000P8":o="亲，您的美元账户有欠款或存款，无法开通人民币世界通服务。";break;case"CW000045":o="亲，您的卡片目前已超额，请还款后再申请哦!";break;default:o=e}return o},cgbCreditList:function(t){var e=this.getKey;if(""==e||void 0==e);else if(e.length>0)if(1==e.length){var o=e[0].accountNo,s=e[0].currencyType;"2"==o.substr(6,1)||"156"!=s&&"99"!=s&&"999"!=s&&"01"!=s&&"88"!=s||t.call(this)}else if(e.length>1){for(var a=0,i=0;i<e.length;i++){var n=e[i].accountNo,r=e[i].currencyType;"2"==n.substr(6,1)||"156"!=r&&"99"!=r&&"999"!=r&&"01"!=r&&"88"!=r||(a+=1)}a>=1&&t.call(this)}},cgbGetTip:function(t){var e=this,o=(this.checkTrancode("MH0016"),{});o.tranCode="MH0016",o.srcChannel="MH",o.pactNo="MH100034",window.client.request({url:"api/MH0016.json",adapter:"CommonAdapter",procedure:"second_MH0016",parameters:"[{}]",success:function(t){var o="";o="0"!=t.invocationResult.root.ec?"1. 请使用申请信用卡时所填写的证件号码和手机号进行查询；<br/>2. 可查询时间：一般在申请提交10个工作日后；<br/>3. 限查次数：每人每天3次，每月10次；<br/>4. 可查询寄送进度时间：非航空类新发卡，收到批核成功短信通知2-3个工作日后；航空类新发卡因需配置会员号，在收到批核成功短信通知12个工作日后方可查询。":t.invocationResult.root.cd.pactText;o.split("<br/>");e.$router.push({name:"applicat_progress_inquire_detaile"})}})},checkTrancode:function(t){return this.loginStatus?t+"_unlogin":t},applicat:function(){var t=this,e=this.getCertNoLocal(),o=e.certNo,s=(this.getMobileNoLocal(),{tranCode:"MH0183",srcChannel:"MH",busCode:"15",businessCode:"MH",mobileNo:"mobileNo",smsCode:"smsCode"});"0"==e.flag?s.customerCertNo="":"1"==e.flag&&(s.customerCertNo=o),window.client.request({url:"api/MH0183.json",adapter:"CommonAdapter",procedure:"second_MH0183",parameters:'[{"mobileNo": "'+this.mobileNo+'","certNo": "'+this.certNo+'","smsCode": "'+this.token+'"}]',success:function(e){if(console.log(e.invocationResult.root.ec),"0"!=e.invocationResult.root.ec){var o=t.transformEm(e.invocationResult.root.ec,e.invocationResult.root.em);return void t.showToast(o)}var s=e.invocationResult.root.cd;if(0!=s.flag)return 2==s.flag||3==s.flag?void t.showToast("亲，您输入的信息有误或资料尚未录入，请重新输入。"):1==s.flag?void t.showToast("亲，您当日查询次数超过限制。"):4==s.flag?void t.showToast("亲，您当月查询次数超过限制。"):void t.showToast(s.errorMessage);scedule_inquire_MH0100()}}),this.$router.push({name:"applicat_progress_inquire_detaile"})},getCode:function(){var t=this,e=this.certNo,o=this.mobileNo,s=o.substr(7,11),a=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,i=/^[1][3,4,5,7,8][0-9]{9}$/;if(!e)return this.showToast("证件号不能为空，请重新输入。"),!1;if(!a.test(this.certNo))return this.idChangeRed=!0,this.showToast("您输入的身份证号不正确，请重新输入。"),!1;if(this.idChangeRed=!1,localStorage.setItem("certNo",e),!o)return this.showToast("手机号不能为空，请重新输入。"),!1;if(!i.test(this.mobileNo))return this.phChangeRed=!0,this.showToast("手机号不正确，请重新输入。"),!1;this.phChangeRed=!1,this.showToast("已经向尾号为"+s+"的手机号发送验证码，60s后方能重新获取，短信验证码120s内有效。"),localStorage.setItem("mobileNo",o);this.checkTrancode("MH0099");window.client.request({url:"/api/MH0099.json",adapter:"CommonAdapter",procedure:"second_MH0099",parameters:'[{"type":"json","mobileNo":"mobileNo","certNo":"certNo"}]',success:function(e){if("0"!=e.invocationResult.root.ec){var o=t.transformEm(e.invocationResult.root.ec,data.invocationResult.root.em);return void t.showToast(o)}0==e.invocationResult.root.cd.optionFlag?t.getMsgCode():1==data.invocationResult.root.cd.optionFlag&&t.showToast("您刚已获取了短信验证码，无需重新获取。")}})},getMsgCode:function(){},getCertNoLocal:function(){var t="",e="";return(t=this.certNo="")?(t=localStorage.getItem("certNo"),e="0"):(t=this.certNo,e="1"),t=t.replace(/x/g,"X"),{certNo:t,flag:e}},getMobileNoLocal:function(){console.log(this.mobileNo);return(this.mobileNo="")?localStorage.getItem("mobileNo"):this.mobileNo},standardData:function(t,e){var o={result:{kColl:[]}};if(t.result.length>1){for(var s=0;s<t.result.length;s++)if(t.result[s].id==e){void 0==t.result[s].kColl?jQuery.rytLog(t.result[s].id):t.result[s].kColl.length>1?o.result.kColl=t.result[s].kColl:o.result.kColl.push(t.result[s].kColl);break}}else void 0==t.result.kColl?jQuery.rytLog(t.result.id):t.result.kColl.length>1?o.result.kColl=t.result.kColl:o.result.kColl.push(t.result.kColl);for(var s in t)"result"!=s&&(o[s]=t[s]);return o},scedule_inquire_MH0100:function(){var t=this,e=getCertNoLocal(),o=e.certNo,s=(getCertNoLocal(),checkTrancode("MH0100"),{tranCode:"MH0100",srcChannel:"MH",channelType:"CS"});"0"==e.flag?s.certNo="":"1"==e.flag&&(s.certNo=o),window.client.request({url:"api/MH0100.json",adapter:"CommonAdapter",procedure:"second_MH0100",success:function(e){if("0"!=e.invocationResult.root.ec)return void t.showToast(e.invocationResult.root.em,"iApplyProgressListTemp");0==standardData(e.invocationResult.root.cd).result.kColl.length?t.showToast("没有查询到您的办卡信息"):t.$router.push({name:""})}})}},beforeDestroy:function(){document.removeEventListener("leftHandler",this.goBack,!1)}}}});