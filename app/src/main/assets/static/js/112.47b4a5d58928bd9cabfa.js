webpackJsonp([112],{"1Aa/":function(t,e,n){var r=n("adiS"),a=n("biYF")("iterator"),i=n("ZVlJ");t.exports=n("AKd3").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||i.hasOwnProperty(r(e))}},"9OCy":function(t,e,n){"use strict";var r=n("HzJ8"),a=n.n(r),i=n("KH7x"),s=n.n(i);e.a={name:"selectCardComp",data:function(){return{selectedCard:{iconType:"",key:""},selelctCardArr:{normal:[]},showSelectCard:!1}},computed:{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data}},methods:{clickNormalItem:function(t){this.selectedCard=t,this.$emit("callback",t)}},created:function(){var t=[],e=this.getUserInfo.creditCardList,n=this.getUserInfo.defaultAccountNo,r=!0,i=!1,c=void 0;try{for(var o,u=a()(e.entries());!(r=(o=u.next()).done);r=!0){var d=o.value,l=s()(d,2),p=(l[0],l[1]),v=p.cardType+"("+p.accountNo.substr(p.accountNo.length-4,4)+")",f=p.accountNo;t.push({key:v,value:f,iconType:"CGB",selected:!1,cardName:p.cardType})}}catch(t){i=!0,c=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw c}}if(""===n||void 0===n)t[0].selected=!0,this.selectedCard=t[0];else{var h=!0,_=!1,C=void 0;try{for(var y,g=a()(e.entries());!(h=(y=g.next()).done);h=!0){var m=y.value,b=s()(m,2),w=b[0];n===b[1].accountNo&&(t[w].selected=!0,this.selectedCard=t[w])}}catch(t){_=!0,C=t}finally{try{!h&&g.return&&g.return()}finally{if(_)throw C}}}this.selelctCardArr.normal=t}}},"C/3g":function(t,e,n){t.exports=n.p+"static/img/quick_repay_img08_subsCard.png"},KH7x:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n("MGgt"),i=r(a),s=n("HzJ8"),c=r(s);e.default=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=(0,c.default)(t);!(r=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&o.return&&o.return()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,i.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},MGgt:function(t,e,n){t.exports={default:n("hWTF"),__esModule:!0}},NmnV:function(t,e,n){"use strict";var r=n("HzJ8"),a=(n.n(r),n("KH7x"));n.n(a)},OVlH:function(t,e,n){"use strict";function r(t){n("dt33")}Object.defineProperty(e,"__esModule",{value:!0});var a=(n("ZcQu"),n("XLxX")),i=n("qwQX"),s=n("C7Lr"),c=r,o=s(a.a,i.a,!1,c,null,null);e.default=o.exports},XLxX:function(t,e,n){"use strict";var r=n("HzJ8"),a=n.n(r),i=n("KH7x"),s=n.n(i),c=n("IHPB"),o=n.n(c),u=n("4YfN"),d=n.n(u),l=n("txMd"),p=n("CKVb"),v=n("gpPJ"),f=n("IXui"),h=n("cTn1"),_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.funName.split("_")[1]||t.funName,n=d()({url:"/api/"+e+".json",adapter:"CommonAdapter",isLogin:!0,funName:"",encrypt:!0,parameters:{},success:function(){}},t);console.log(n),window.client.request(n)},C=new Array(9).fill(!1),y=[[]].concat(o()(C),["",""]),g=y[0],m=y[1],b=y[2],w=y[3],T=y[4],N=y[5],z=y[6],x=y[7],L=y[8],P=y[9],$=y[10],k=y[11],I="广发基金钱袋子自动还款",S="银联跨行自动还款";e.a={name:"settingEntry",data:function(){return{showPopup:!1,unsignPopup:!1,cardList:[],selectCardList:[],defaultCard:{},currentCard:"",currentCardName:"",outCard:"",inCard:"",reqChannel:"",accountType:0,currentCardPltProdLevl1:"",auxiliary:!1,signTypeList:[{road:""}],compareYorN:!1,signStatus:!1}},computed:{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data}},components:{Group:p.a,Cell:v.a,selectCardComp:l.a,XButton:f.a,Popup:h.a},watch:{currentCard:function(t){this.currentCardName=this.selectCardList.find(function(e){return e.value==t}).key.split(" ")[1],"2"==t.slice(6,7)?this.auxiliary=!0:this.auxiliary=!1,this.currentCardPltProdLevl1=this.selectCardList.find(function(e){return e.value==t}).pltProdLevl1,"062"==this.currentCardPltProdLevl1&&(this.accountType=1),w="479928"==t.substr(0,6)||"534602"==t.substr(0,6),this.checkDoubleType(t)}},methods:{goSignPage:function(t){var e={ts_cardType:b,ts_ht_cardType:w,bh_bzw:T,th_zd_bzw:N,qdz_bzw:z,th_zz_bzw:x,bh_zd_bzw_two:L,bh_zd_bzw_double:P,select_cardName:this.currentCardName,qr_accountType:this.accountType,billDate:$,currentRtLmtDate:k,doubleBi:m,currenType:g,select_cardVal:this.currentCard};this.$router.push({name:t,params:e})},goDetail:function(t){var e=d()({},t,{ts_cardType:b,ts_ht_cardType:w,bh_bzw:T,th_zd_bzw:N,qdz_bzw:z,th_zz_bzw:x,bh_zd_bzw_two:L,bh_zd_bzw_double:P,select_cardName:this.currentCardName,qr_accountType:this.accountType,billDate:$,currentRtLmtDate:k,doubleBi:m,currenType:g,select_cardVal:this.currentCard});this.$store.commit("repaySettingStore/setDetailParams",e),this.$router.push({name:"repay_setting_detail",params:e})},unSign:function(){var t=this;!function(e){t.$vux.toast.show({text:"解绑成功",onHide:function(){t.unsignPopup=!1,t.showPopup=!0}})}()},changeSignWay:function(){this.unsignPopup=!0},openSign:function(){console.log("opensign"),this.showPopup=!0},_goSignPage:function(t,e){var n={ts_cardType:b,ts_ht_cardType:w,bh_bzw:T,th_zd_bzw:N,qdz_bzw:z,th_zz_bzw:x,bh_zd_bzw_two:L,bh_zd_bzw_double:P,select_cardName:this.currentCardName,qr_accountType:this.accountType,billDate:$,currentRtLmtDate:k,doubleBi:m,currenType:g,select_cardVal:this.currentCard,modified:!0};if(console.log(g),e)return void this.$router.push({name:t,params:d()({},e.modifiedObj,n)||{}});var r="",a="请先撤销您尾号"+this.inCard.substr(this.inCard.length-4,4)+"的广发卡的<%type%>后再办理",i="同一张信用卡仅可办理一项自动还款业务，如需选择<%chooseType%>，请先撤销<%cancelType%>。",s=/(\w*)<%chooseType%>(.*)<%cancelType%>(.*)/g;if("repay_setting_bhRepay"==t){if(z&&this.compareYorN?r=a.replace("<%type%>",I):z?r=i.replace(s,"$1本行自动还款$2"+I+"$3"):N&&this.compareYorN?r=a.replace("<%type%>",S):N&&(r=i.replace(s,"$1本行自动还款$2银联跨行自动还款$3")),r)return void this.$vux.alert.show(r);var c=this.signTypeList.filter(function(t){return"本行"==t.name});if(T)return P=L,void this.$router.push({name:t,params:d()({bzw:"0",zrbin:c[0].inType,zcbin:c[0].outType},n)});if(L)return void this.$router.push({name:t,params:d()({bzw:"1",zrbin:c[1].inType,zcbin:c[1].outType},n)})}if("repay_setting_thRepay"==t){if(w)return void this.$vux.alert.show("该信用卡无法办理本业务。");if(N||x)return void this.$router.push({name:t,params:n})}if("repay_setting_qdzRepay"==t){if(T?r=i.replace(s,"$1"+I+"$2本行自动还款$3"):N&&this.compareYorN?r=a.replace("<%type%>",S):N&&(r=i.replace(s,"$1"+I+"$2"+S+"$3")),r)return void this.$vux.alert.show(r);if(z)return void this.$router.push({name:t,params:d()({convert:"0"==this.signTypeList.filter(function(t){return"银联"==t.name}).convert?"1":"0"},n)})}this.$router.push({name:t,params:d()({},n,{modified:!1})})},handleSelectCard:function(t){this.currentCard=t.value},checkDoubleType:function(t){var e=this,n=function(){_({funName:"second_MH0037_3",params:{accountNo:t},success:function(t){var n=t.invocationResult.root;if("0"==n.ec)return void($=n.cd.billDate);e.$vux.alert.show(n.em)}})},r=function(){_({funName:"second_MH0223",params:{tranCode:"MH0223",channelCode:"007",customerId:e.getUserInfo.customerId,creditCardNo:t},success:function(n){var r=n.status,a=n.convert,i=n.boundType;if(e.inCard=n.CreditCardNo,"0"==r){e.compareYorN=!1;var s={name:"钱袋子",router:"repay_setting_qdzRepay",payway:"最低还款",inCard:"已签约广发基金钱袋子自动还款",road:"广发基金钱袋子自动还款",modifiedObj:{convert:"0"==a?"1":"0"},origin:n};t!=e.inCard&&(s.inCard="已签约广发基金钱袋子自动还款（尾号"+e.inCard.substr(e.inCard.length-4,4)+"）",e.compareYorN=!0),"0"==i&&"0"==a&&(s.payway="最低还款  开通购汇"),"1"==i&&"0"==a&&(s.payway="全额还款  开通购汇"),"1"==i&&"1"==a&&(s.payway="全额还款"),e.signTypeList.push(s),z=!0}else x||(e.signStatus=!0)}})},a=function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=g[a],s=a?"美元":"人民币";_({funName:"second_MH0066",params:{tranCode:"MH0066",srcChannel:"MH",currencyType:i,cardNo:t},success:function(n){var r=n.repaymentStyle,c=n.boundFlag;n.autoTranBank,n.currencyType;if(e.outCard=n.accountNo,e.inCard=n.cardNo,1==c){e.compareYorN=!1;var o={name:"本行",router:"repay_setting_bhRepay",payway:"最低还款",inType:"人民币",outType:"人民币",road:"储蓄卡自动还款（"+s+"）",outCard:e.$store.getters.getProtect(e.outCard),inCard:"已签约本行自动还款（"+s+"）",origin:n};"1"!=r&&"3"!=r||(o.payway="全额还款"),"0"!=r&&"1"!=r||"840"!=i||(o.outType="美元"),"13"==i&&(o.inType="港币"),"840"==i&&(o.inType="美元"),t!=e.inCard&&(o.inCard="已签约本行自动还款（"+s+"）（尾号"+e.inCard.substr(e.inCard.length-4,4)+"）",e.compareYorN=!0),a||(T=!0),a&&(L=!0),o.modifiedObj={bzw:a,zrbin:o.inType,zcbin:o.outType},e.signTypeList.push(o)}},processException:function(t){if(m&&!a)return void n(1);T||L||r()}})},i=function(){_({funName:"second_MH0068",params:{tranCode:"MH0068",srcChannel:"MH",channelCode:"007",customerId:e.getUserInfo.customerId,creditCardNo:t},success:function(n){var r=n.MH0068.driverBankSignInfo[0],i=r.status,s=r.convert,c=r.boundType,o=r.paychannelCode,u=(r.custName,r.debitCardNo),d=r.creditCardNo;console.log(r),e.inCard=d,e.outCard=u;var l="已签约银联跨行还款";if(e.compareYorN=!1,t!=e.inCard&&(l="已签约银联跨行还款（尾号"+e.inCard.substr(e.inCard.length-4,4)+"）",e.compareYorN=!0),"0"==i){var p={name:"银联",router:"repay_setting_thRepay",payway:"0"==s?"全额还款  开通购汇":"全额还款",convert:s,road:"储蓄卡自动还款",outCard:e.$store.getters.getProtect(e.outCard),inCard:l,origin:r};"0"==c&&(p.payway="0"==s?"最低还款  开通购汇":"最低还款"),e.signTypeList=[p],"000|999"==o?(x=!0,N=!0):"000"==o?N=!0:"999"==o?(x=!0,a()):a()}},processException:function(t){a()}})};_({funName:"second_MH0038",params:{accountNo:t,customerId:this.getUserInfo.customerId},success:function(t){if("00000000"==t.billDate?n():$=t.billDate.substr(t.billDate.length-2,2),k=t.currentRtLmtDate,g=[],t.iCreditCardList&&t.iCreditCardList.length){(t.iCreditCardList.filter(function(t){g.push(t.currencyType);var e=t.accountTypeSign;return"P"==e||"S1"==e||"S2"==e})||[]).length>=2&&(m=!0)}else g.push(t.iCreditCardList.currencyType);i()}})}},created:function(){var t=this;this.cardList=this.getUserInfo.cardList;var e=this.getUserInfo.freeLoansCardList||[],n=[].concat(o()(this.getUserInfo.creditCardList),o()(e));if(!n.length)return void this.$vux.confirm.show({content:"尊敬的用户，您还未添加我行信用卡，请先进行添加。",onCancel:function(){t.$router.go(-1)},onConfirm:function(){t.$router.push({name:"cdbank_add_credit"})}});var r=!0,i=!1,c=void 0;try{for(var u,d=a()(n.entries());!(r=(u=d.next()).done);r=!0){var l=u.value,p=s()(l,2),v=(p[0],p[1]);!function(n,r){t.selectCardList.push({key:t.$store.getters.getProtect(r.accountNo)+" "+r.cardType,value:r.accountNo,iconType:"CGB",pltProdLevl1:(e.find(function(t){return t.accountNo==r.accountNo})||{}).pltProdLevl1||""})}(0,v)}}catch(t){i=!0,c=t}finally{try{!r&&d.return&&d.return()}finally{if(i)throw c}}var f=this.$route.params.accountNo;if(f)return void(this.currentCard=this.selectCardList.find(function(t){return t.value==f}).value);this.getUserInfo.defaultAccountNo?this.currentCard=this.selectCardList.find(function(e){return e.value==t.getUserInfo.defaultAccountNo}).value:this.currentCard=this.selectCardList[0].value,this.selectCardList[this.selectCardList.findIndex(function(e){return e.value==t.currentCard})].selected=!0,this.defaultCard=this.selectCardList.find(function(t){return t.selected}),_({funName:"second_PB1013",success:function(e){var n=e.invocationResult.root;if("0"==n.ec)return void(t.reqChannel=n.cd.reqChannel);t.$vux.alert.show(n.em)}})}}},ZcQu:function(t,e,n){"use strict";var r=n("HzJ8"),a=n.n(r),i=n("KH7x"),s=n.n(i),c=n("IHPB"),o=n.n(c),u=n("4YfN"),d=n.n(u),l=n("txMd"),p=n("CKVb"),v=n("gpPJ"),f=n("IXui"),h=n("cTn1"),_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.funName.split("_")[1]||t.funName,n=d()({url:"/api/"+e+".json",adapter:"CommonAdapter",isLogin:!0,funName:"",encrypt:!0,parameters:{},success:function(){}},t);console.log(n),window.client.request(n)},C=new Array(9).fill(!1),y=[[]].concat(o()(C),["",""]),g=y[0],m=y[1],b=y[2],w=y[3],T=y[4],N=y[5],z=y[6],x=y[7],L=y[8],P=y[9],$=y[10],k=y[11],I="广发基金钱袋子自动还款",S="银联跨行自动还款";p.a,v.a,l.a,f.a,h.a},dt33:function(t,e){},hWTF:function(t,e,n){n("A1pn"),n("IsPG"),t.exports=n("1Aa/")},jU10:function(t,e,n){t.exports=n.p+"static/img/change_card.png"},qDwv:function(t,e){},qwQX:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("xcgb-box",[r("xcgb-head",{attrs:{title:"自动还款",keepAlive:!1,leftOptions:[{type:"left_arrow_black"}]}}),t._v(" "),r("div",{staticClass:"main"},[r("select-card-comp",{staticClass:"select-card-comp",on:{callback:t.handleSelectCard}}),t._v(" "),t.auxiliary?r("div",{staticClass:"auxiliary-card"},[r("img",{attrs:{src:n("C/3g")}}),t._v(" "),r("div",[t._v("附属卡暂不符合办理该业务")])]):r("div",[t.signStatus?r("div",{staticClass:"tips"},[r("img",{attrs:{src:n("C/3g")}}),t._v(" "),r("p",[t._v("工作太忙，忘记还款？")]),t._v(" "),r("div",[t._v("绑定自动还款，省心省力，不再担心忘记还款啦~")]),t._v(" "),r("x-button",{staticClass:"sign-btn",attrs:{type:"warn"},nativeOn:{click:function(e){t.openSign()}}},[t._v("马上开通自动还款")])],1):r("div",{staticClass:"sign"},[r("div",{staticClass:"sign-tips"},[t._v("已开通自动还款")]),t._v(" "),t._l(t.signTypeList,function(e){return r("div",{staticClass:"each-sign",on:{click:function(n){t.goDetail(e)}}},[r("div",[r("div",{staticClass:"sign-road"},[r("span",[t._v(t._s(e.road))])]),t._v(" "),e.outCard?r("div",{staticClass:"sign-desc"},[r("span",[t._v("扣款账户：")]),r("span",[t._v(t._s(e.outCard))])]):t._e(),t._v(" "),r("div",{staticClass:"sign-desc"},[r("span",[t._v("扣款金额：")]),r("span",[t._v("每月账单金额")])])]),t._v(" "),r("div",{staticClass:"right-arrow"},[r("img",{attrs:{src:n("jU10")}})])])}),t._v(" "),r("div",{staticClass:"change-repay-way",on:{click:function(e){t.changeSignWay()}}},[t._v("更换自动还款方式")])],2),t._v(" "),r("popup",{model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[r("div",{staticClass:"popup-title"},[r("img",{attrs:{src:n("x0Ou"),alt:""},on:{click:function(e){t.showPopup=!1}}}),t._v(" "),r("span",[t._v("选取还款方式")])]),t._v(" "),r("div",{staticClass:"popup-content"},[r("div",{staticClass:"sign-type",on:{click:function(e){t.goSignPage("repay_setting_cxkRepay")}}},[r("div",{staticClass:"icon"},[t._v("icon")]),t._v(" "),r("div",[r("div",{staticClass:"title"},[t._v("储蓄卡自动还款")]),t._v(" "),r("div",{staticClass:"desc"},[t._v("支持本行，他行储蓄卡")])])]),t._v(" "),r("div",{staticClass:"sign-type"},[r("div",{staticClass:"icon"},[t._v("icon")]),t._v(" "),r("div",[r("div",{staticClass:"title"},[t._v("理财自动还款")]),t._v(" "),r("div",{staticClass:"desc"},[t._v("提前还款的金额转入购买基金挣收益，还款日系统自动将在扣除还款金额")])])]),t._v(" "),r("div",{staticClass:"sign-type",on:{click:function(e){t.goSignPage("repay_setting_qdzRepay")}}},[r("div",{staticClass:"icon"},[t._v("icon")]),t._v(" "),r("div",[r("div",{staticClass:"title"},[t._v("广发基金钱袋子自动还款")]),t._v(" "),r("div",{staticClass:"desc"},[t._v("享有广发基金钱袋子的客户可使用该还款方式")])])])])]),t._v(" "),r("popup",{model:{value:t.unsignPopup,callback:function(e){t.unsignPopup=e},expression:"unsignPopup"}},[r("div",{staticClass:"popup-title"},[r("img",{attrs:{src:n("x0Ou"),alt:""},on:{click:function(e){t.unsignPopup=!1}}}),t._v(" "),r("span",[t._v("更换自动还款方式")])]),t._v(" "),r("div",{staticClass:"popup-content"},[r("div",{staticClass:"tips"},[r("div",[t._v("需先解除绑定"+t._s(t.signTypeList[0].road))]),t._v(" "),t.signTypeList[0].outCard?r("div",[t._v("卡号："+t._s(t.signTypeList[0].outCard))]):t._e(),t._v(" "),r("div",[t._v("一个信用卡账户只能绑定一张自动扣款卡片")])]),t._v(" "),r("x-button",{staticClass:"sign-btn",attrs:{type:"warn"},nativeOn:{click:function(e){t.unSign()}}},[t._v("确认解绑")])],1)])],1)],1)],1)},a=[],i={render:r,staticRenderFns:a};e.a=i},txMd:function(t,e,n){"use strict";function r(t){n("qDwv")}var a=(n("NmnV"),n("9OCy")),i=n("wsjw"),s=n("C7Lr"),c=r,o=s(a.a,i.a,!1,c,null,null);e.a=o.exports},wsjw:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"selectCardBox",on:{click:function(e){t.showSelectCard=!0}}},[t.selectedCard.iconType?n("i",{staticClass:"bank-icon",class:t.selectedCard.iconType}):t._e(),t._v(" "),n("span",[t._v(t._s(t.selectedCard.key))]),t._v(" "),n("i",{staticClass:"arrow"})]),t._v(" "),n("select-card",{attrs:{cardList:t.selelctCardArr},on:{clickNormalItem:t.clickNormalItem},model:{value:t.showSelectCard,callback:function(e){t.showSelectCard=e},expression:"showSelectCard"}})],1)},a=[],i={render:r,staticRenderFns:a};e.a=i},x0Ou:function(t,e,n){t.exports=n.p+"static/img/nav_icon_close.png"}});