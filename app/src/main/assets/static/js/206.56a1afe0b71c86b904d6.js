webpackJsonp([206],{"1/mQ":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("xcgb-box",[s("xcgb-head",{attrs:{keepAlive:!1,title:"创建电子帐户",leftOptions:[{type:"left_arrow_black"}]}}),t._v(" "),s("div",{staticClass:"main"},[s("p",{staticClass:"title"},[t._v("首次借款需创建还款电子账户")]),t._v(" "),s("div",{staticClass:"tips"},[t._v("用于Free贷借款、查询与还款，"),s("br"),t._v("暂不具备其他金融交易功能\n      "),s("img",{attrs:{src:a("Kebp"),alt:""}})]),t._v(" "),s("div",{staticClass:"card"},[s("p",{staticClass:"flex"},[s("img",{attrs:{src:a("p/qU"),alt:""}}),t._v("广发银行Free贷卡")]),t._v(" "),s("div",{staticClass:"data"},[s("div",[s("span",[t._v("最迟还款日")]),t._v(" | "),s("span",[t._v("每月"+t._s(t.accountInfo.dueDate)+"号")])]),t._v(" "),s("div",[s("span",[t._v("账单日")]),t._v(" | "),s("span",[t._v("每月"+t._s(t.accountInfo.billDate)+"号")])])])]),t._v(" "),t.pageParams.isNormalLoan?s("button",{staticClass:"primary",on:{click:function(e){t.createFreeCard()}}},[t._v("确认创建")]):t._e(),t._v(" "),t.pageParams.isNormalLoan?t._e():s("button",{staticClass:"gold",on:{click:function(e){t.createFreeCard()}}},[t._v("确认创建")]),t._v(" "),s("confirm",{attrs:{title:"提示","confirm-text":"我知道了"},model:{value:t.showComfirm,callback:function(e){t.showComfirm=e},expression:"showComfirm"}},[s("p",[t._v(t._s(t.text))])]),t._v(" "),s("confirm",{attrs:{title:"验证身份","confirm-text":"确认办理"},on:{"on-confirm":t.comfirmBtn},model:{value:t.keyBoard,callback:function(e){t.keyBoard=e},expression:"keyBoard"}},[s("p",[t._v("验证码："),s("input",{directives:[{name:"model",rawName:"v-model",value:t.smsCode,expression:"smsCode"}],staticClass:"size",attrs:{maxlength:"6",placeholder:"请输入验证码"},domProps:{value:t.smsCode},on:{input:function(e){e.target.composing||(t.smsCode=e.target.value)}}}),t._v(" "),s("span",{staticClass:"time",on:{click:t.timer}},[t._v(t._s(t.verification))])])])],1)],1)},o=[],i={render:s,staticRenderFns:o};e.a=i},Kebp:function(t,e,a){t.exports=a.p+"static/img/item_icon_about.png"},Z52N:function(t,e,a){"use strict";function s(t){a("rFa0")}Object.defineProperty(e,"__esModule",{value:!0});var o=(a("cqVT"),a("ns1G")),i=a("1/mQ"),n=a("C7Lr"),r=s,c=n(o.a,i.a,!1,r,null,null);e.default=c.exports},cqVT:function(t,e,a){"use strict";var s=a("f4gh"),o=a("JGLT");o.a,s.a},ns1G:function(t,e,a){"use strict";var s=a("f4gh"),o=a("JGLT");e.a={name:"freeLoansCreateEaccount",data:function(){return{showComfirm:!1,keyBoard:!1,pageParams:"",accountInfo:{billDate:"",branchNo:"",billType:"",cardName:"",cbsSex:"",birthday:"",regCnty:""},dueDateList:{1:27,2:28,3:1,4:2,5:3,6:1,7:2,8:3,9:4,10:5,11:6,12:7,13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:20,26:21,27:22,28:23},bigSFlag:"",setVerification:!0,text:"",smsCode:"",verification:"获取",count:""}},computed:{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data}},methods:{toast:function(t){this.showComfirm=!0,this.text=t},Toast:function(t){this.$vux.toast.show({type:"text",text:t})},getDueDateAndBillDate:function(t){var e=this;this.$vux.loading.show({text:"载入中"}),window.client.request({url:"/api/MH0604.json",adapter:"CommonAdapter",procedure:"MH0604",parameters:{cardNo:t},success:function(t){var a=t.invocationResult;e.$vux.loading.hide();var s=a.root;if("0"===s.ec){for(var o in e.accountInfo)e.accountInfo[o]=s.cd[o];e.accountInfo.dueDate=e.dueDateList[parseInt(s.cd.billDate)],console.log(e.accountInfo)}else e.toast(s.em)},error:function(){e.$vux.loading.hide()}})},createFreeCard:function(){this.showKeyBoard(),this.keyBoard=!0},showKeyBoard:function(){console.log("调用数字键盘")},timer:function(){var t=this;if(this.setVerification&&(this.setVerification=!1,"获取"==this.verification)){var e=60;this.count=setInterval(function(){t.verification=e+"s",--e<=0&&(clearInterval(t.count),t.verification="获取",t.setVerification=!0,e=0)},1e3);var a={tranCode:"MH0403",busCode:this.pageParams.busCode,SMSID:"F6",TEMPLATEID:"057F600290",smsLimitFlag:"Y",SMSFlag:"1",TRADETYPE:this.pageParams.loan,mobileNo:this.getUserInfo.mobileNo};window.client.request({url:"/api/MH0403.json",adapter:"CommonAdapter",procedure:"second_MH0403",parameters:a,success:function(e){var a=e.invocationResult,s=a.root;"0"===s.ec?"1"===s.cd.optionFlag?(t.Toast("您已获取过短信验证码，无需重复获取"),t.clear()):t.Toast("已向尾号为"+t.getUserInfo.mobileNo.slice(7)+"的手机发送短信"):(t.Toast(s.em),t.clear())},error:function(){t.clear()}})}},clear:function(){clearInterval(this.count),this.verification="获取",this.setVerification=!0},comfirmBtn:function(){var t=this;if(6!==this.smsCode.length||""==this.smsCode||"undefined"==this.smsCode)return void this.Toast("验证码格式错误");this.$vux.loading.show({text:"载入中"});var e={brNo:this.accountInfo.branchNo,BusinessSum:this.pageParams.loan,amtUsage:this.pageParams.amtUsage,bigSFlag:this.bigSFlag,selfBankCode:this.pageParams.selfBankCode,maddType:this.accountInfo.billType,bankCodeNO:this.pageParams.bankCodeNO,newDebitCardNo:this.pageParams.newDebitCardNo,intoBank:this.pageParams.intoBank,busCode:this.pageParams.busCode,sex:this.accountInfo.cbsSex,pinyin:this.accountInfo.cardName,birthday:this.accountInfo.birthday,smsCode:this.smsCode};window.client.request({url:"/api/MH0606.json",adapter:"CommonAdapter",procedure:"MH0606",parameters:e,success:function(e){var a=e.invocationResult;t.$vux.loading.hide();var s=a.root;if("0"===s.ec){var o={title:"等待审核",isOk:"wait",resultHeader:"申请已提交",resultMain:"<p>&nbsp;&nbsp;&nbsp;&nbsp;2日工作内，Free贷卡将有审批结果</p><p>若审批通过,您的申请款项<span style='color:#f59d18'>100000元</span>会转入您指定的收款账户，请留意短信通知</p>",from_page_str:"eaccount"};t.$router.push({name:"free_loans_result",params:o})}else s.em.indexOf("重复进件")>-1?t.toast("您好，您的Free贷卡正在审核中，请勿一个月内重复申请。"):"PA040304"===s.ec||"PP010110"===s.ec?t.Toast("短信验证码错误"):"PP010109"===s.ec?t.Toast("短信验证码不存在或已超时"):t.Toast("小发正在努力加载中，请稍候再试")},error:function(){t.$vux.loading.hide()}})}},components:{Confirm:o.a,Toast:s.a},created:function(){this.pageParams=this.$route.params,this.getDueDateAndBillDate(this.pageParams.cardNo),this.bigSFlag="2501"===this.pageParams.bigSNo?"B":"S"}}},"p/qU":function(t,e,a){t.exports=a.p+"static/img/logo.png"},rFa0:function(t,e){}});