webpackJsonp([158],{"07ai":function(e,t,n){"use strict";function a(e){n("yasi")}var s=(n("BFky"),n("7uf+")),r=n("EuNY"),o=n("C7Lr"),i=a,c=o(s.a,r.a,!1,i,null,null);t.a=c.exports},"7uf+":function(e,t,n){"use strict";var a=n("CKVb"),s=n("gpPJ");t.a={name:"",data:function(){return{cardFlag:!1,cardNoAndName:""}},components:{Group:a.a,Cell:s.a},computed:{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data},cardArr:function(){var e={};e.normal=[];for(var t=this.getUserInfo.creditCardList,n=0;n<t.length;n++){var a={};a.value=t[n].accountNo,a.key=t[n].accountNo.substr(0,4)+"****"+t[n].accountNo.substr(t[n].accountNo.length-4,4)+" "+t[n].cardType,a.iconType="CGB",a.selected=!1,e.normal.push(a)}return e}},methods:{clickNormalCard:function(e){this.cardNoAndName=e.key,this.$emit("card",e)},selectCard:function(){this.cardFlag=!0}},created:function(){var e=JSON.parse(sessionStorage.getItem("information"));null==this.pname?(this.cardNoAndName=this.cardArr.normal[0].key,this.$emit("card",this.cardArr.normal)):(this.cardNoAndName=e.cardNoAndName,this.$emit("card",e))}}},"88HT":function(e,t,n){"use strict";var a=n("fvyU"),s=n("IXui"),r=n("gpPJ"),o=n("CKVb"),i=n("Nqtu"),c=n("GGmk"),u=n("07ai");t.a={name:"instantRevoke",data:function(){return{params:"",mobile:"",token:"",start:!1,time:60}},computed:{status:function(){return!(_.legalMobile(this.mobile)&&6==this.token.length)}},components:{XInput:a.a,XButton:s.a,Group:o.a,Cell:r.a,Countdown:i.a,Esel:u.a},methods:{next:function(){var e=this;n.i(c.f)({accountNo:this.params.currentCardNo,mobileNo:this.mobile,smsCode:this.token}).then(function(t){"瞬时通业务撤销成功！"==t.successDes?e.$router.push({name:"instant_remind_instantSuccess",params:t}):"瞬时通业务撤销失败！"==t.successDes&&e.$router.push({name:"instant_remind_instantFail",params:t})}).catch(function(e){n.i(c.b)(e)})},esel:function(e){var t=this;this.params=e,n.i(c.e)({}).then(function(e){return!0}).catch(function(e){n.i(c.b)(e),setInterval(function(){t.$router.push({name:"instant_remind_instantPass",params:t.params})},2e3)})},getToken:function(){var e=this;_.legalMobile(this.mobile)?n.i(c.a)({accountNo:this.params.currentCardNo,flag:"1"}).then(function(t){if(n.i(c.b)(t),!e.start){e.start=!e.start;var a=60;setInterval(function(){if(a-=1,e.time=a,"1"==e.time)return e.start=!1,!1},1e3)}}).catch(function(e){n.i(c.b)(e)}):n.i(c.b)("您的手机号输入有误,请重新输入")}},created:function(){this.params=JSON.parse(sessionStorage.getItem("information")),this.cardNoAndName=this.params.cardNoAndName}}},BFky:function(e,t,n){"use strict";var a=n("CKVb"),s=n("gpPJ");a.a,s.a},EuNY:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("group",{attrs:{gutter:0}},[n("cell",{attrs:{"is-link":""},nativeOn:{click:function(t){return e.selectCard(t)}}},[n("i",{attrs:{slot:"title"},slot:"title"}),e._v(" "),n("span",{staticClass:"curCard",attrs:{slot:"title"},slot:"title"},[e._v("\n        "+e._s(e.cardNoAndName)+"\n      ")])])],1),e._v(" "),n("select-card",{attrs:{cardList:e.cardArr},on:{clickNormalItem:e.clickNormalCard},model:{value:e.cardFlag,callback:function(t){e.cardFlag=t},expression:"cardFlag"}})],1)},s=[],r={render:a,staticRenderFns:s};t.a=r},Fmqz:function(e,t,n){"use strict";var a=n("fvyU"),s=n("IXui"),r=n("gpPJ"),o=n("CKVb"),i=n("Nqtu"),c=n("GGmk"),u=n("07ai");a.a,s.a,o.a,r.a,i.a,u.a},GGmk:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"f",function(){return d}),n.d(t,"d",function(){return u});var a=n("rVsN"),s=n.n(a),r=function(e){var t=e.params;return new s.a(function(e,n){window.client.request({ifpUrl:"/mp/MP1080.do",url:"/api/MH0161li.json",adapterName:"CommonAdapter",isLogin:!0,funName:"second_MH0161_15",parameters:t,success:function(t){if("0"==t.ec){t.mobileNo;e(!0)}else n(t.em)},error:function(){console.log("MH0161接口错误")}})})},o=function(){return new s.a(function(e,t){window.client.request({ifpUrl:"/mp/MP1085.do",url:"/api/MH0166li.json",adapterName:"CommonAdapter",isLogin:!0,parameters:{},success:function(n){"0"==n.ec?e(n):t(n.em)},error:function(){console.log("MH0166接口错误")}})})},i=function(e){__Vue__.$vux.toast.show({text:e,type:"text",height:"10rem",width:"60%"})},c=function(e){var t=e.pname,n=e.params;return new s.a(function(e,a){r({params:t}).then(function(t){t&&o().then(function(t){console.log(t);for(var s=t.customerSmsServiceList,r=0;r<s.length;r++)if(s[r].smsFeeAccNo==n.cardNo&&s[r].smsSignAccNo==n.cardNo)if("4"==s[r].smsStatus&&"11"==s[r].smsId)n.mobileNo=t.mobileNo,n.id="1",e(n);else if("1"==s[r].smsStatus||"0"==s[r].smsStatus){if("11"==s[r].smsId){var o=s[r].smsFeeType,i="";i="01"==o?"包月(3元/月)":"包月(36元/年)";var c=s[r].smsIncomeFireAmount/100,u=s[r].smsPayFireAmount/100,l=s[r].smsMobile,m=l.slice(0,3)+"****"+l.slice(l.length-4),d={};d.currentCardNo=n.cardNo,d.smsFeeType=o,d.comboDes=i,d.cash_in=c,d.cash_out=u,d.mobileNo=l,d.mobileNoStr=m,d.cardNoAndName=n.cardNoAndName,d.id="0",e(d)}}else a("对扣费失败的服务进行冻结或对到期未补签协议的服务进行暂停")}).catch(function(e){a(e)})}).catch(function(e){a(e)})})},u=function(e){return new s.a(function(t,n){window.client.request({ifpUrl:"/mp/MP1084.do",url:"/api/MH0165li.json",adapterName:"CommonAdapter",isLogin:!0,funName:"second_MH0165",parameters:e,success:function(e){if("0"==e.ec)t(e);else if("PP010110"==e.ec||"PP010109"==e.ec||"EMSBNULL"==e.ec||"PA040304"==e.ec){var a=m({ec:e.ec,em:e.em});n(a)}else t("0")}})})},l=function(e){var t=e.accountNo,n=e.flag;return new s.a(function(e,a){window.client.request({ifpUrl:"/mp/MP1098.do",url:"/api/MH0210li.json",adapterName:"CommonAdapter",isLogin:!0,funName:"second_MH0210",parameters:{accountNo:t,flag:n},success:function(t){if("0"==t.ec)if("0"==t.optionFlag){var n="已向尾号为"+t.mobileNo.substr(6,4)+"的手机号码发送验证码";e(n)}else a("您刚已获取了短信验证码，无需重新获取");else if("EBMB9018"==t.ec){m({ec:t.ec,em:t.em})}else a(t.em)},error:function(){console.log("MH0210接口错误!")}})})},m=function(e){var t=e.ec,n=e.em,a="";switch(t){case"EBMB9018":a="当前业务您已连续获取10次短信验证码未验证通过了，请您明天再来。";break;case"PP010110":case"EBMB2055":case"EMSBNULL":case"PA040304":a="短信验证码输入有误，请重新输入。";break;case"PP010109":a="您的短信验证码输入有误或已超时，请重新输入。";break;case"EBMB2054":a="短信验证码已超时，请重新获取，谢谢！";break;case"CW0000P7":case"CW0000P9":case"CW0000P8":a="亲，您的美元账户有欠款或存款，无法开通人民币世界通服务。";break;case"CW000045":a="亲，您的卡片目前已超额，请还款后再申请哦!";break;default:a=n}return a},d=function(e){var t=e.accountNo,n=e.mobileNo,a=e.smsCode;return new s.a(function(e,s){window.client.request({ifpUrl:"/mp/MP1086.do",url:"/api/MH0168li.json",adapterName:"CommonAdapter",isLogin:!0,funName:"second_MH0168",parameters:{accountNo:t,mobileNo:n,smsCode:a},success:function(t){if("0"==t.ec){e({changeFlag:"撤销",successDes:"瞬时通业务撤销成功！",flag:"1"})}else if(""==t.ec||""==t.ec||""==t.ec||""==t.ec){var n=m({ec:t.ec,em:t.em});s(n)}else{var a={successDes:"瞬时通业务撤销失败！",errorCode:t.ec,errorMsg:t.em,flag:"1"};e(a)}},error:function(){console.log("MH0168接口错误")}})})}},LBQq:function(e,t){},azll:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("xcgb-box",[n("xcgb-head",{attrs:{title:"瞬时通",keepAlive:!1,leftOptions:[{type:"left_arrow_black"}],rightOptions:[{type:"service_white"}]}}),e._v(" "),n("div",{staticClass:"main"},[n("esel",{on:{card:e.esel}}),e._v(" "),n("group",[n("x-input",{attrs:{title:"手机号码",type:"tel",max:11,placeholder:"请输入银行预留手机号"},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}}),e._v(" "),n("x-input",{staticClass:"weui-vcode",attrs:{title:"验证码",placeholder:"请输入短信验证码",max:6},model:{value:e.token,callback:function(t){e.token=t},expression:"token"}},[n("x-button",{staticClass:"getVcode",attrs:{slot:"right",type:"",mini:"",disabled:e.start},nativeOn:{click:function(t){return e.getToken(t)}},slot:"right"},[e.start?e._e():n("i",[e._v("获取")]),e._v(" "),e.start?n("countdown",{attrs:{start:e.start},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}):e._e(),e._v(" "),e.start?n("i",[e._v("s")]):e._e()],1)],1)],1),e._v(" "),n("x-button",{staticClass:"confirmCancel",attrs:{"action-type":"button",disabled:e.status},nativeOn:{click:function(t){return e.next(t)}}},[e._v("确认取消")])],1)],1)},s=[],r={render:a,staticRenderFns:s};t.a=r},nA8H:function(e,t,n){"use strict";function a(e){n("LBQq")}Object.defineProperty(t,"__esModule",{value:!0});var s=(n("Fmqz"),n("88HT")),r=n("azll"),o=n("C7Lr"),i=a,c=o(s.a,r.a,!1,i,null,null);t.default=c.exports},yasi:function(e,t){}});