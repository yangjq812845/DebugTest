webpackJsonp([95],{"/N/h":function(t,e,s){"use strict";var o=s("a3Yh"),a=s.n(o),n=s("4YfN"),i=s.n(n),r=s("JGLT"),c=s("CKVb"),u=s("gpPJ"),l=s("fvyU"),d=s("IXui"),h=s("f4gh"),p=s("Jp5S"),m=s("HVJf"),f=s("QlY8");i()({},s.i(m.b)(["invocationResult","iosPlatform"]),{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data")},nextStepButton:function(){var t=this.PageData.cardNo,e=this.smsCode,s=this.pwd,o=this.phoneNo;return!(""===t||""===e||6!=e.length||""===s||!_.isMobile(o)||!_.isIDNumber(this.certNo)||""===this.name)}}),a()({init:function(){var t=/^1[3|4|5|7|8][0-9]{9}$/;11===this.phoneNo.length&&t.test(this.phoneNo)?this.checkMobile=!1:(this.phoneNo="",this.checkMobile=!0),this.PageData=this.getMessage()},showPswKeyboard:function(){console.log("调用密码键盘"),window.client.showPswKeyboard({isSpecialPassWordRequired:!0,maxSize:"6",ps:"AE0"})},hidePswKeyboard:function(){console.log("隐藏密码键盘"),window.client.hidePswKeyboard()},showToastFunc:function(t){this.toastText=t,this.showToast=!0},initTradeTimestamp:function(){var t=new Date,e=t.getTime();localStorage.setItem("tradetimestamp",e)},resetTradeTimestamp:function(){var t=this,e=setTimeout(function(){t.initTradeTimestamp(),clearTimeout(e)},500)},getTradeTimestamp:function(t){return t.tradetimestamp=localStorage.getItem("tradetimestamp"),t},getSmsCode:function(){var t=this;if(!this.countting){var e=60;this.getCodeText=e+"s";var s=setInterval(function(){t.getCodeText=--e+"s",e||(clearInterval(s),t.countting=!1,t.getCodeText="获取")},1e3);this.countting=!0,this.getDebitSmsCode()}},nextStep:function(){var t=this;window.client.request({url:"api/MH0321.json",adapter:"CommonAdapter",parameters:"[{'tranCode':'MH0321','srcChannel':'MH','accountNo':"+this.PageData.cardNo+",'accName':"+encodeURI(this.name)+",'certType':'"+this.option1+"','certNo':"+this.certNo+",'busCode':'AC','smsCode':"+this.smsCode+",'tempFlag':'N','pushType':'Y','mobileNo':"+this.getUserInfo.data.mobileNo+"}]",success:function(e){t.MH0321Data=e.body,"0"==t.MH0321Data.ec?(t.$vux.toast.show({text:"添加成功",type:"text",height:"10rem",width:"60%"}),setTimeout(function(){sessionStorage.setItem("status","0"),t.$router.push({name:"registerSuccess",params:{activateStatus:"1"}})},3e3)):t.$vux.toast.show({text:"银行卡添加失败,"+t.MH0321Data.em,type:"text",height:"10rem",width:"60%"})},error:function(){console.log("MH0321接口错误!")}})},checkCardNo:function(){this.hidePswKeyboard();var t=this.pageParams.virtualCardNo||this.cardNo;""!=t&&null!=t&&0!=t.length&&t&&"undefined"!=t?t.length<16?this.showToastFunc("卡号不能低于16位，请重新输入"):t.match('[#\\~\\$\\@\\!\\*\\^\\<\\>\\"%\\&]')?this.showToastFunc("卡号只能为数字，请重新输入"):t.match("[0-9]")||this.showToastFunc("卡号只能为数字，请重新输入"):this.showToastFunc("卡号不能为空")},checkPhoneNo:function(){var t=/^1[3|4|5|7|8][0-9]{9}$/;return 11===this.phoneNo.length&&t.test(this.phoneNo)?this.checkMobile=!1:this.checkMobile=!0},phoneToast:function(){var t=/^1[3|4|5|7|8][0-9]{9}$/;11===this.phoneNo.length&&t.test(this.phoneNo)||this.showToastFunc("手机号输入不正确，请重新输入！")},checkSmsCode:function(t){this.hidePswKeyboard(),""==t?this.showToastFunc("短信验证码或取款密码不能为空"):isNaN(t)?this.showToastFunc("短信验证码只能为数字，请重新输入"):t.match('[#\\~\\$\\@\\!\\*\\^\\<\\>\\"%\\&]')?this.showToastFunc("短信验证码只能为数字，请重新输入"):6!=t.length&&this.showToastFunc("短信验证码长度为6位，请重新输入")},getDebitSmsCode:function(){var t=this;window.client.request({url:"/api/MH0087.json",adapter:"CommonAdapter",procedure:"second_MH0320",parameters:'[{"SMSID":"F6","TEMPLATEID":"057F600229","busCode":"AC","accountNo":'+this.PageData.cardNo+',"PARAM2":'+encodeURI("借记卡")+',"PARAM3":'+encodeURI("发现精彩")+',"mobileNo":'+this.phoneNo+"}]",success:function(e){console.log(e);var s=e.invocationResult.root;"0"==s.ec?"0"==s.cd.optionFlag?t.showToastFunc("已向尾号为"+t.phoneNo.substring(7,11)+"的手机号发送验证码，60s后方能重新获取，短信验证码120s内有效。"):"0"!=s.cd.optionFlag&&t.showToastFunc("您刚已获取了短信验证码，无需重新获取。"):t.showToastFunc(s.ec+":"+s.em)},error:function(){}})},certNo_Format:function(t,e){return"护照"==t?e.substr(0,4)+"****"+e.substr(6):"军官证"==t||"士兵证"==t||"警官证"==t?e.substr(0,3)+"****"+e.substr(4):"港澳来往内地通行证"==t?e.substr(0,4)+"****"+e.substr(6):"台湾同胞来往内地通行证"==t?e.substr(0,3)+"****"+e.substr(5):"外国人居留证"==t?e.substr(0,9)+"****"+e.substr(12):e.substr(0,4)+"****"+e.substr(e.length-4,4)},getMessage:function(){var t=this.$route.params,e=this.getUserInfo,s=e.data.customerNameCN,o=(e.data.certType,t.certName),a=e.data.certNo;a=this.certNo_Format(o,a);var n=this.numStrFormat(t.virtualCardNo,"1");return{name:this.getSurname(s)+"*",certNo:a,certName:o,cardNo:n,debitName:"广发银行 储蓄卡"}},numStrFormat:function(t,e){var s="";switch(t+="",e){case"1":s=t.replace(/(\d{4})/g,"$1 ");break;case"2":s=t.split(" ").join("");break;case"3":s=t.substr(0,4)+"****"+t.substr(t.length-4,4);break;default:s=t}return s},getSurname:function(t){var e=["欧阳","太史","端木","上官","司马","东方","独孤","南宫","万俟","闻人","夏侯","诸葛","尉迟","公羊","赫连","澹台","皇甫","宗政","濮阳","公冶","太叔","申屠","公孙","慕容","仲孙","钟离","长孙","宇文","司徒","鲜于","司空","闾丘","子车","亓官","司寇","巫马","公西","颛孙","壤驷","公良","漆雕","乐正","宰父","谷梁","拓跋","夹谷","轩辕","令狐","段干","百里","呼延","东郭","南门","羊舌","微生","公户","公玉","公仪","梁丘","公仲","公上","公门","公山","公坚","左丘","公伯","西门","公祖","第五","公乘","贯丘","公皙","南荣","东里","东宫","仲长","子书","子桑","即墨","达奚","褚师"];return-1==this.inArray(t.substr(0,2),e)?t.charAt(0):t.substr(0,2)},inArray:function(t,e,s){if(t.indexOf&&!s)return t.indexOf(e);for(var o=0;o<t.length;){if(s&&t[o][s]==e||!s&&t[o]===e)return o;o++}return-1},requestMH0348:function(){var t={};window.client.request({url:"/api/MHMH0348.json",adapter:"CommonAdapter",procedure:"second_MH0348",parameters:t,success:function(t){"0"==t.root.ec&&t.root.cd.pswdStatus}})},addDebitsubmit:function(){var t=this,e=this.cardNo;e=numStrFormat(e,"2");var s=this.getUserInfo.data.mobileNo,o=this.smsCode,a=this.pwd,n={smsCode:o,accountNo:e,mobileNo:s,password:pwd||a,flag:"D"};window.client.request({url:"/api/MH0087.json",adapter:"CommonAdapter",procedure:"second_MH0087",parameters:this.getTradeTimestamp(n),success:function(e){t.resetTradeTimestamp();var s=e.root;if("0"==s.ec){var o=t.pageParms;t.requestMH0348(function(t){t?this.$router.push({name:"add_debit_success",pageParms:o}):this.$router.push({name:"add_debit_success",params:n})})}else if("EBMB2105"==s.em);else{var a=t.pageParms;a&&void 0!=a.CardType&&a.CardType}}})}},"requestMH0348",function(){var t={};window.client.request({url:"/api/MHMH0348.json",adapter:"CommonAdapter",procedure:"second_MH0348",parameters:t,success:function(t){"0"==t.root.ec?t.root.cd.pswdStatus:t.root.em}})}),r.a,l.a,c.a,u.a,d.a,h.a,p.a,f.a,p.a},"44WN":function(t,e,s){"use strict";e.a=function(){return{options:{type:Array,required:!0},value:[String,Number],fillMode:{type:Boolean,default:!1},fillPlaceholder:{type:String,default:"其他"},fillLabel:{type:String,default:"其他"},disabled:Boolean,selectedLabelStyle:Object}}},Fcdg:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("xcgb-box",[s("xcgb-head",{attrs:{title:"添加借记卡",keepAlive:!1,leftOptions:[{type:"left_arrow_black"}]}}),t._v(" "),s("div",{staticClass:"main"},[s("group",{attrs:{"label-width":"6em",title:"请绑定持卡人本人的银行卡"}},[s("cell",{attrs:{"value-align":"right",title:"卡类型",value:t.PageData.certName}}),t._v(" "),s("x-input",{staticClass:"name_certNo",attrs:{title:"卡号",value:t.PageData.cardNo,"text-align":"right",placeholder:"请输入银行卡号",min:16,disabled:""},on:{"on-focus":t.showPswKeyboard,"on-blur":t.checkCardNo}}),t._v(" "),s("x-input",{attrs:{title:"持卡人",placeholder:"请输入持卡人"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),s("div",{staticClass:"cardGroup"},[s("group",{attrs:{gutter:0}},[s("span",{staticClass:"paperType"},[t._v("证件类型")]),t._v(" "),s("popup-radio",{style:{textAlign:"right"},attrs:{options:t.options1,show1:!1},scopedSlots:t._u([{key:"each-item",fn:function(e){return[s("p",[t._v(t._s(e.label))])]}}]),model:{value:t.option1,callback:function(e){t.option1=e},expression:"option1"}})],1)],1),t._v(" "),s("x-input",{attrs:{title:"证件号码",max:18,placeholder:"请输入证件号"},model:{value:t.certNo,callback:function(e){t.certNo=e},expression:"certNo"}}),t._v(" "),s("x-input",{staticClass:"name_certNo",attrs:{title:"取款密码",type:"password",placeholder:"请输入银行密码",max:6},on:{"on-focus":t.showPswKeyboard,"on-blur":t.checkSmsCode},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}}),t._v(" "),s("cell",{attrs:{"value-align":"right",title:"手机号",value:t.getUserInfo.data.mobileNo}}),t._v(" "),s("x-input",{staticClass:"weui-vcode",attrs:{id:"smsCode",title:"短信验证码",placeholder:"请输入短信验证码",max:6},on:{"on-focus":t.hidePswKeyboard,"on-blur":t.checkSmsCode},model:{value:t.smsCode,callback:function(e){t.smsCode=e},expression:"smsCode"}},[s("x-button",{attrs:{slot:"right",type:[t.countting||t.checkMobile?"default":"warn"],disabled:t.countting||t.checkMobile,mini:""},nativeOn:{click:function(e){return t.getSmsCode(e)}},slot:"right"},[t._v(t._s(t.getCodeText))])],1)],1),t._v(" "),s("x-button",{class:[t.nextStepButton?"clickNextStep":"nextStep"],attrs:{type:[t.nextStepButton?"warn":"submit"],disabled:!t.nextStepButton,"action-type":"button",plain:""},nativeOn:{click:function(e){return t.nextStep(e)}}},[t._v("确认添加")]),t._v(" "),s("toast",{attrs:{width:"5rem",type:"text",time:2e3,isShowMask:"",position:"middle"},model:{value:t.showToast,callback:function(e){t.showToast=e},expression:"showToast"}},[t._v(t._s(t.toastText))])],1)],1)},a=[],n={render:o,staticRenderFns:a};e.a=n},J4oA:function(t,e,s){"use strict";var o=s("hRKE"),a=s.n(o),n=s("4YfN"),i=s.n(n),r=s("r0Vc"),c=s("Y9TT"),u=s.n(c),l=s("CKVb"),d=s("gpPJ"),h=s("cTn1"),p=s("sm8H"),m=s("Jp5S");delete r.a.value;m.a,i()({placeholder:String,readonly:Boolean},r.a,r.b,{showAddCard:{type:Boolean,default:!1}}),l.a,h.a,p.a,d.a},JwlZ:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"weui-cells_radio",class:t.disabled?"vux-radio-disabled":""},[t._l(t.options,function(e,o){return s("label",{staticClass:"weui-cell weui-cell_radio weui-check__label",attrs:{for:"radio_"+t.uuid+"_"+o}},[s("div",{staticClass:"weui-cell__bd"},[t._t("each-item",[s("p",[s("img",{directives:[{name:"show",rawName:"v-show",value:e&&e.icon,expression:"one && one.icon"}],staticClass:"vux-radio-icon",attrs:{src:e.icon}}),t._v(" "),s("span",{staticClass:"vux-radio-label",style:t.currentValue===t.getKey(e)?t.selectedLabelStyle||"":""},[t._v(t._s(t._f("getValue")(e)))])])],{icon:e.icon,label:t.getValue(e),index:o,selected:t.currentValue===t.getKey(e)})],2),t._v(" "),s("div",{staticClass:"weui-cell__ft"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticClass:"weui-check",attrs:{type:"radio",id:t.disabled?"":"radio_"+t.uuid+"_"+o},domProps:{value:t.getKey(e),checked:t._q(t.currentValue,t.getKey(e))},on:{change:function(s){t.currentValue=t.getKey(e)}}}),t._v(" "),s("span",{staticClass:"weui-icon-checked"})])])}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.fillMode,expression:"fillMode"}],staticClass:"weui-cell"},[s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label",attrs:{for:""}},[t._v(t._s(t.fillLabel))])]),t._v(" "),s("div",{staticClass:"weui-cell__bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.fillValue,expression:"fillValue"}],staticClass:"weui-input needsclick",attrs:{type:"text",placeholder:t.fillPlaceholder},domProps:{value:t.fillValue},on:{blur:function(e){t.isFocus=!1},focus:function(e){t.onFocus()},input:function(e){e.target.composing||(t.fillValue=e.target.value)}}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:""===t.value&&!t.isFocus,expression:"value==='' && !isFocus"}],staticClass:"weui-cell__ft"},[s("i",{staticClass:"weui-icon-warn"})])])],2)},a=[],n={render:o,staticRenderFns:a};e.a=n},"KB/y":function(t,e){},QlY8:function(t,e,s){"use strict";function o(t){s("Y0kP")}var a=(s("J4oA"),s("UDD/")),n=s("RKJx"),i=s("C7Lr"),r=o,c=i(a.a,n.a,!1,r,null,null);e.a=c.exports},RKJx:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("cell",{staticClass:"select-card",attrs:{title:t.displayValue,value:t.currentValue,"is-link":!t.readonly,"value-align":t.valueAlign},nativeOn:{click:function(e){return t.show(e)}}},[!t.displayValue&&t.placeholder?o("span",{staticClass:"vux-cell-placeholder"},[t._v(t._s(t.placeholder))]):t._e(),t._v(" "),o("span",{attrs:{slot:"icon"},slot:"icon"},[t._t("icon")],2),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{staticClass:"select-card-popup",staticStyle:{"background-color":"#f6f6f6"},on:{"on-hide":function(e){t.$emit("on-hide")},"on-show":function(e){t.$emit("on-show")}},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[t._t("popup-header",null,{options:t.options,value:t.currentValue}),t._v(" "),o("div",{staticClass:"popup-title"},[o("img",{attrs:{src:s("x0Ou"),alt:""},on:{click:t.hide}}),t._v(" "),o("span",[t._v("请选择")])]),t._v(" "),o("radio",{staticStyle:{"background-color":"#fff"},attrs:{options:t.options,"fill-mode":!1},on:{"on-change":t.onValueChange},scopedSlots:t._u([{key:"each-item",fn:function(e){return[t._t("each-item",[o("p",[o("img",{directives:[{name:"show",rawName:"v-show",value:e.icon,expression:"props.icon"}],staticClass:"vux-radio-icon",attrs:{src:e.icon}}),t._v(" "),o("span",{staticClass:"vux-radio-label"},[t._v(t._s(e.label))])])],{icon:e.icon,label:e.label,index:e.index})]}}]),model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}}),t._v(" "),t.showAddCard?o("group",{attrs:{gutter:10}},[o("cell",{attrs:{title:"添加卡片",isLink:!0},nativeOn:{click:function(e){return t.toAddCard(e)}}})],1):t._e()],2)],1)])},a=[],n={render:o,staticRenderFns:a};e.a=n},"UDD/":function(t,e,s){"use strict";var o=s("hRKE"),a=s.n(o),n=s("4YfN"),i=s.n(n),r=s("r0Vc"),c=s("Y9TT"),u=s.n(c),l=s("CKVb"),d=s("gpPJ"),h=s("cTn1"),p=s("sm8H"),m=s("Jp5S");delete r.a.value,e.a={name:"selectCard",directives:{TransferDom:m.a},props:i()({placeholder:String,readonly:Boolean},r.a,r.b,{showAddCard:{type:Boolean,default:!1}}),data:function(){return{showPopup:!1,currentValue:this.value}},computed:{displayValue:function(){var t=this;if(!this.options.length)return"";if("object"===a()(this.options[0])){var e=u()(this.options,function(e){return e.key===t.currentValue});if(e)return e.value}return this.currentValue}},components:{Group:l.a,Popup:h.a,Radio:p.a,Cell:d.a},watch:{value:function(t){this.currentValue=t},currentValue:function(t){this.$emit("input",t),this.$emit("on-change",t)}},methods:{onValueChange:function(t){this.hide()},show:function(){this.readonly||(this.showPopup=!0)},hide:function(){this.showPopup=!1},toAddCard:function(){this.showPopup=!1,this.$router.push({name:"cdbank_add_credit"})}}}},"XLg/":function(t,e,s){"use strict";function o(t){s("KB/y")}Object.defineProperty(e,"__esModule",{value:!0});var a=(s("/N/h"),s("k6kc")),n=s("Fcdg"),i=s("C7Lr"),r=o,c=i(a.a,n.a,!1,r,null,null);e.default=c.exports},Y0kP:function(t,e){},Y9TT:function(t,e){function s(t,e,s){if("function"==typeof Array.prototype.find)return t.find(e,s);s=s||this;var o,a=t.length;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(o=0;o<a;o++)if(e.call(s,t[o],o,t))return t[o]}t.exports=s},dl3a:function(t,e,s){"use strict";s.d(e,"a",function(){return n}),s.d(e,"b",function(){return i}),s.d(e,"c",function(){return r});var o=s("hRKE"),a=s.n(o),n=function(t){return"object"===(void 0===t?"undefined":a()(t))?t.value:t},i=function(t){return"object"===(void 0===t?"undefined":a()(t))?t.key:t},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];if(!t.length)return e;if("string"==typeof t[0])return e;var s=t.filter(function(t){return t.key===e});return s.length?s[0].value||s[0].label:e}},jf31:function(t,e,s){"use strict";function o(t,e){for(var s=t.length;s--;)if(t[s]===e)return!0;return!1}var a=s("qWCq"),n=s("dl3a"),i=s("44WN");e.a={name:"radio",mixins:[a.a],filters:{getValue:n.a,getKey:n.b},props:s.i(i.a)(),created:function(){this.handleChangeEvent=!0},methods:{getValue:n.a,getKey:n.b,onFocus:function(){this.currentValue=this.fillValue||"",this.isFocus=!0}},watch:{value:function(t){this.currentValue=t},currentValue:function(t){var e=o(this.options,t);""!==t&&e&&(this.fillValue=""),this.$emit("on-change",t,s.i(n.c)(this.options,t)),this.$emit("input",t)},fillValue:function(t){this.fillMode&&this.isFocus&&(this.currentValue=t)}},data:function(){return{fillValue:"",isFocus:!1,currentValue:this.value}}}},k6kc:function(t,e,s){"use strict";var o=s("a3Yh"),a=s.n(o),n=s("4YfN"),i=s.n(n),r=s("JGLT"),c=s("CKVb"),u=s("gpPJ"),l=s("fvyU"),d=s("IXui"),h=s("f4gh"),p=s("Jp5S"),m=s("HVJf"),f=s("QlY8");e.a={name:"add_debit",data:function(){return{phoneNo:"",checkMobile:!1,cardNo:"",smsCode:"",pwd:"",showToast:!1,toastText:"",getCodeText:"获取",countting:!1,PageData:"",pageParams:this.$route.params,option1:"身份证",options1:["身份证"],show1:!1,certNo:"",name:"",MH0321Data:""}},computed:i()({},s.i(m.b)(["invocationResult","iosPlatform"]),{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data")},nextStepButton:function(){var t=this.PageData.cardNo,e=this.smsCode,s=this.pwd,o=this.phoneNo;return!(""===t||""===e||6!=e.length||""===s||!_.isMobile(o)||!_.isIDNumber(this.certNo)||""===this.name)}}),methods:a()({init:function(){var t=/^1[3|4|5|7|8][0-9]{9}$/;11===this.phoneNo.length&&t.test(this.phoneNo)?this.checkMobile=!1:(this.phoneNo="",this.checkMobile=!0),this.PageData=this.getMessage()},showPswKeyboard:function(){console.log("调用密码键盘"),window.client.showPswKeyboard({isSpecialPassWordRequired:!0,maxSize:"6",ps:"AE0"})},hidePswKeyboard:function(){console.log("隐藏密码键盘"),window.client.hidePswKeyboard()},showToastFunc:function(t){this.toastText=t,this.showToast=!0},initTradeTimestamp:function(){var t=new Date,e=t.getTime();localStorage.setItem("tradetimestamp",e)},resetTradeTimestamp:function(){var t=this,e=setTimeout(function(){t.initTradeTimestamp(),clearTimeout(e)},500)},getTradeTimestamp:function(t){return t.tradetimestamp=localStorage.getItem("tradetimestamp"),t},getSmsCode:function(){var t=this;if(!this.countting){var e=60;this.getCodeText=e+"s";var s=setInterval(function(){t.getCodeText=--e+"s",e||(clearInterval(s),t.countting=!1,t.getCodeText="获取")},1e3);this.countting=!0,this.getDebitSmsCode()}},nextStep:function(){var t=this;window.client.request({url:"api/MH0321.json",adapter:"CommonAdapter",parameters:"[{'tranCode':'MH0321','srcChannel':'MH','accountNo':"+this.PageData.cardNo+",'accName':"+encodeURI(this.name)+",'certType':'"+this.option1+"','certNo':"+this.certNo+",'busCode':'AC','smsCode':"+this.smsCode+",'tempFlag':'N','pushType':'Y','mobileNo':"+this.getUserInfo.data.mobileNo+"}]",success:function(e){t.MH0321Data=e.body,"0"==t.MH0321Data.ec?(t.$vux.toast.show({text:"添加成功",type:"text",height:"10rem",width:"60%"}),setTimeout(function(){sessionStorage.setItem("status","0"),t.$router.push({name:"registerSuccess",params:{activateStatus:"1"}})},3e3)):t.$vux.toast.show({text:"银行卡添加失败,"+t.MH0321Data.em,type:"text",height:"10rem",width:"60%"})},error:function(){console.log("MH0321接口错误!")}})},checkCardNo:function(){this.hidePswKeyboard();var t=this.pageParams.virtualCardNo||this.cardNo;""!=t&&null!=t&&0!=t.length&&t&&"undefined"!=t?t.length<16?this.showToastFunc("卡号不能低于16位，请重新输入"):t.match('[#\\~\\$\\@\\!\\*\\^\\<\\>\\"%\\&]')?this.showToastFunc("卡号只能为数字，请重新输入"):t.match("[0-9]")||this.showToastFunc("卡号只能为数字，请重新输入"):this.showToastFunc("卡号不能为空")},checkPhoneNo:function(){var t=/^1[3|4|5|7|8][0-9]{9}$/;return 11===this.phoneNo.length&&t.test(this.phoneNo)?this.checkMobile=!1:this.checkMobile=!0},phoneToast:function(){var t=/^1[3|4|5|7|8][0-9]{9}$/;11===this.phoneNo.length&&t.test(this.phoneNo)||this.showToastFunc("手机号输入不正确，请重新输入！")},checkSmsCode:function(t){this.hidePswKeyboard(),""==t?this.showToastFunc("短信验证码或取款密码不能为空"):isNaN(t)?this.showToastFunc("短信验证码只能为数字，请重新输入"):t.match('[#\\~\\$\\@\\!\\*\\^\\<\\>\\"%\\&]')?this.showToastFunc("短信验证码只能为数字，请重新输入"):6!=t.length&&this.showToastFunc("短信验证码长度为6位，请重新输入")},getDebitSmsCode:function(){var t=this;window.client.request({url:"/api/MH0087.json",adapter:"CommonAdapter",procedure:"second_MH0320",parameters:'[{"SMSID":"F6","TEMPLATEID":"057F600229","busCode":"AC","accountNo":'+this.PageData.cardNo+',"PARAM2":'+encodeURI("借记卡")+',"PARAM3":'+encodeURI("发现精彩")+',"mobileNo":'+this.phoneNo+"}]",success:function(e){console.log(e);var s=e.invocationResult.root;"0"==s.ec?"0"==s.cd.optionFlag?t.showToastFunc("已向尾号为"+t.phoneNo.substring(7,11)+"的手机号发送验证码，60s后方能重新获取，短信验证码120s内有效。"):"0"!=s.cd.optionFlag&&t.showToastFunc("您刚已获取了短信验证码，无需重新获取。"):t.showToastFunc(s.ec+":"+s.em)},error:function(){}})},certNo_Format:function(t,e){return"护照"==t?e.substr(0,4)+"****"+e.substr(6):"军官证"==t||"士兵证"==t||"警官证"==t?e.substr(0,3)+"****"+e.substr(4):"港澳来往内地通行证"==t?e.substr(0,4)+"****"+e.substr(6):"台湾同胞来往内地通行证"==t?e.substr(0,3)+"****"+e.substr(5):"外国人居留证"==t?e.substr(0,9)+"****"+e.substr(12):e.substr(0,4)+"****"+e.substr(e.length-4,4)},getMessage:function(){var t=this.$route.params,e=this.getUserInfo,s=e.data.customerNameCN,o=(e.data.certType,t.certName),a=e.data.certNo;a=this.certNo_Format(o,a);var n=this.numStrFormat(t.virtualCardNo,"1");return{name:this.getSurname(s)+"*",certNo:a,certName:o,cardNo:n,debitName:"广发银行 储蓄卡"}},numStrFormat:function(t,e){var s="";switch(t+="",e){case"1":s=t.replace(/(\d{4})/g,"$1 ");break;case"2":s=t.split(" ").join("");break;case"3":s=t.substr(0,4)+"****"+t.substr(t.length-4,4);break;default:s=t}return s},getSurname:function(t){var e=["欧阳","太史","端木","上官","司马","东方","独孤","南宫","万俟","闻人","夏侯","诸葛","尉迟","公羊","赫连","澹台","皇甫","宗政","濮阳","公冶","太叔","申屠","公孙","慕容","仲孙","钟离","长孙","宇文","司徒","鲜于","司空","闾丘","子车","亓官","司寇","巫马","公西","颛孙","壤驷","公良","漆雕","乐正","宰父","谷梁","拓跋","夹谷","轩辕","令狐","段干","百里","呼延","东郭","南门","羊舌","微生","公户","公玉","公仪","梁丘","公仲","公上","公门","公山","公坚","左丘","公伯","西门","公祖","第五","公乘","贯丘","公皙","南荣","东里","东宫","仲长","子书","子桑","即墨","达奚","褚师"];return-1==this.inArray(t.substr(0,2),e)?t.charAt(0):t.substr(0,2)},inArray:function(t,e,s){if(t.indexOf&&!s)return t.indexOf(e);for(var o=0;o<t.length;){if(s&&t[o][s]==e||!s&&t[o]===e)return o;o++}return-1},requestMH0348:function(){var t={};window.client.request({url:"/api/MHMH0348.json",adapter:"CommonAdapter",procedure:"second_MH0348",parameters:t,success:function(t){"0"==t.root.ec&&t.root.cd.pswdStatus}})},addDebitsubmit:function(){var t=this,e=this.cardNo;e=numStrFormat(e,"2");var s=this.getUserInfo.data.mobileNo,o=this.smsCode,a=this.pwd,n={smsCode:o,accountNo:e,mobileNo:s,password:pwd||a,flag:"D"};window.client.request({url:"/api/MH0087.json",adapter:"CommonAdapter",procedure:"second_MH0087",parameters:this.getTradeTimestamp(n),success:function(e){t.resetTradeTimestamp();var s=e.root;if("0"==s.ec){var o=t.pageParms;t.requestMH0348(function(t){t?this.$router.push({name:"add_debit_success",pageParms:o}):this.$router.push({name:"add_debit_success",params:n})})}else if("EBMB2105"==s.em);else{var a=t.pageParms;a&&void 0!=a.CardType&&a.CardType}}})}},"requestMH0348",function(){var t={};window.client.request({url:"/api/MHMH0348.json",adapter:"CommonAdapter",procedure:"second_MH0348",parameters:t,success:function(t){"0"==t.root.ec?t.root.cd.pswdStatus:t.root.em}})}),components:{Confirm:r.a,XInput:l.a,Group:c.a,Cell:u.a,XButton:d.a,Toast:h.a,TransferDom:p.a,PopupRadio:f.a},directives:{TransferDom:p.a},mounted:function(){this.init()},created:function(){this.phoneNo=this.getUserInfo.data.mobileNo}}},qyAu:function(t,e,s){"use strict";function o(t,e){for(var s=t.length;s--;)if(t[s]===e)return!0;return!1}var a=s("qWCq"),n=s("dl3a"),i=s("44WN");a.a,n.a,n.b,s.i(i.a)(),n.a,n.b},r0Vc:function(t,e,s){"use strict";s.d(e,"b",function(){return o}),s.d(e,"a",function(){return a});var o={options:{type:Array,required:!0},value:[String,Number],fillMode:{type:Boolean,default:!1},fillPlaceholder:{type:String,default:"其他"},fillLabel:{type:String,default:"其他"},disabled:Boolean,selectedLabelStyle:Object},a={title:[String,Number],value:[String,Number,Array],isLink:Boolean,isLoading:Boolean,inlineDesc:[String,Number],primary:{type:String,default:"title"},link:[String,Object],valueAlign:[String,Boolean,Number],borderIntent:{type:Boolean,default:!0},disabled:Boolean,arrowDirection:String,alignItems:String}},r36s:function(t,e){},sm8H:function(t,e,s){"use strict";function o(t){s("r36s")}var a=(s("qyAu"),s("jf31")),n=s("JwlZ"),i=s("C7Lr"),r=o,c=i(a.a,n.a,!1,r,null,null);e.a=c.exports},x0Ou:function(t,e,s){t.exports=s.p+"static/img/nav_icon_close.png"}});