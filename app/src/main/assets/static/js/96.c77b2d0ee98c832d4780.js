webpackJsonp([96],{"44WN":function(e,t,s){"use strict";t.a=function(){return{options:{type:Array,required:!0},value:[String,Number],fillMode:{type:Boolean,default:!1},fillPlaceholder:{type:String,default:"其他"},fillLabel:{type:String,default:"其他"},disabled:Boolean,selectedLabelStyle:Object}}},EDq6:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("xcgb-box",[s("xcgb-head",{attrs:{title:"添加借记卡",keepAlive:!1,leftOptions:[{type:"left_arrow_black"}]},on:{leftHandler:e.goBack}}),e._v(" "),s("div",{staticClass:"main"},[s("group",{attrs:{"label-width":"6em",title:"请绑定持卡人本人的银行卡"}},[s("cell",{attrs:{"value-align":"right",title:"卡类型",value:e.PageData.certName}}),e._v(" "),s("x-input",{attrs:{title:"卡号",value:e.PageData.cardNo,"text-align":"right",placeholder:"请输入银行卡号",min:16,disabled:""},on:{"on-focus":e.showPswKeyboard,"on-blur":e.checkCardNo}}),e._v(" "),s("cell",{attrs:{"value-align":"right",title:"持卡人",value:e.PageData.name}}),e._v(" "),s("div",{staticClass:"cardGroup"},[s("group",{attrs:{gutter:0}},[s("span",{staticClass:"paperType"},[e._v("证件类型")]),e._v(" "),s("popup-radio",{style:{textAlign:"right"},attrs:{options:e.options1,show1:!1},scopedSlots:e._u([{key:"each-item",fn:function(t){return[s("p",[e._v(e._s(t.label))])]}}]),model:{value:e.option1,callback:function(t){e.option1=t},expression:"option1"}})],1)],1),e._v(" "),s("cell",{attrs:{"value-align":"right",title:"证件号码",value:e.PageData.certNo}}),e._v(" "),s("x-input",{attrs:{title:"取款密码",type:"password",placeholder:"请输入银行密码",max:6},on:{"on-focus":e.showPswKeyboard,"on-blur":e.checkSmsCode},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}}),e._v(" "),s("x-input",{attrs:{title:"手机号",placeholder:"请输入银行预留手机号",max:11},on:{"on-focus":e.hidePswKeyboard,"on-blur":e.phoneToast,input:e.checkPhoneNo},model:{value:e.phoneNo,callback:function(t){e.phoneNo=t},expression:"phoneNo"}}),e._v(" "),s("x-input",{staticClass:"weui-vcode",attrs:{id:"smsCode",title:"短信验证码",placeholder:"请输入短信验证码",max:6},on:{"on-focus":e.hidePswKeyboard,"on-blur":e.checkSmsCode},model:{value:e.smsCode,callback:function(t){e.smsCode=t},expression:"smsCode"}},[s("x-button",{attrs:{slot:"right",type:[e.countting||e.checkMobile?"default":"warn"],disabled:e.countting||e.checkMobile,mini:""},nativeOn:{click:function(t){return e.getSmsCode(t)}},slot:"right"},[e._v(e._s(e.getCodeText))])],1)],1),e._v(" "),s("x-button",{attrs:{id:"nextStep",type:[e.nextStepButton?"warn":"submit"],disabled:!e.nextStepButton,"action-type":"button",plain:""},nativeOn:{click:function(t){return e.nextStep(t)}}},[e._v("下一步")]),e._v(" "),s("toast",{attrs:{width:"5rem",type:"text",time:2e3,isShowMask:"",position:"middle"},model:{value:e.showToast,callback:function(t){e.showToast=t},expression:"showToast"}},[e._v(e._s(e.toastText))])],1)],1)},o=[],n={render:a,staticRenderFns:o};t.a=n},IlVe:function(e,t,s){"use strict";function a(e){s("uJdE")}Object.defineProperty(t,"__esModule",{value:!0});var o=(s("fPtN"),s("tcYz")),n=s("EDq6"),r=s("C7Lr"),i=a,c=r(o.a,n.a,!1,i,null,null);t.default=c.exports},J4oA:function(e,t,s){"use strict";var a=s("hRKE"),o=s.n(a),n=s("4YfN"),r=s.n(n),i=s("r0Vc"),c=s("Y9TT"),u=s.n(c),d=s("CKVb"),l=s("gpPJ"),h=s("cTn1"),p=s("sm8H"),m=s("Jp5S");delete i.a.value;m.a,r()({placeholder:String,readonly:Boolean},i.a,i.b,{showAddCard:{type:Boolean,default:!1}}),d.a,h.a,p.a,l.a},JwlZ:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"weui-cells_radio",class:e.disabled?"vux-radio-disabled":""},[e._l(e.options,function(t,a){return s("label",{staticClass:"weui-cell weui-cell_radio weui-check__label",attrs:{for:"radio_"+e.uuid+"_"+a}},[s("div",{staticClass:"weui-cell__bd"},[e._t("each-item",[s("p",[s("img",{directives:[{name:"show",rawName:"v-show",value:t&&t.icon,expression:"one && one.icon"}],staticClass:"vux-radio-icon",attrs:{src:t.icon}}),e._v(" "),s("span",{staticClass:"vux-radio-label",style:e.currentValue===e.getKey(t)?e.selectedLabelStyle||"":""},[e._v(e._s(e._f("getValue")(t)))])])],{icon:t.icon,label:e.getValue(t),index:a,selected:e.currentValue===e.getKey(t)})],2),e._v(" "),s("div",{staticClass:"weui-cell__ft"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"weui-check",attrs:{type:"radio",id:e.disabled?"":"radio_"+e.uuid+"_"+a},domProps:{value:e.getKey(t),checked:e._q(e.currentValue,e.getKey(t))},on:{change:function(s){e.currentValue=e.getKey(t)}}}),e._v(" "),s("span",{staticClass:"weui-icon-checked"})])])}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.fillMode,expression:"fillMode"}],staticClass:"weui-cell"},[s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label",attrs:{for:""}},[e._v(e._s(e.fillLabel))])]),e._v(" "),s("div",{staticClass:"weui-cell__bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.fillValue,expression:"fillValue"}],staticClass:"weui-input needsclick",attrs:{type:"text",placeholder:e.fillPlaceholder},domProps:{value:e.fillValue},on:{blur:function(t){e.isFocus=!1},focus:function(t){e.onFocus()},input:function(t){t.target.composing||(e.fillValue=t.target.value)}}})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:""===e.value&&!e.isFocus,expression:"value==='' && !isFocus"}],staticClass:"weui-cell__ft"},[s("i",{staticClass:"weui-icon-warn"})])])],2)},o=[],n={render:a,staticRenderFns:o};t.a=n},QlY8:function(e,t,s){"use strict";function a(e){s("Y0kP")}var o=(s("J4oA"),s("UDD/")),n=s("RKJx"),r=s("C7Lr"),i=a,c=r(o.a,n.a,!1,i,null,null);t.a=c.exports},RKJx:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("cell",{staticClass:"select-card",attrs:{title:e.displayValue,value:e.currentValue,"is-link":!e.readonly,"value-align":e.valueAlign},nativeOn:{click:function(t){return e.show(t)}}},[!e.displayValue&&e.placeholder?a("span",{staticClass:"vux-cell-placeholder"},[e._v(e._s(e.placeholder))]):e._e(),e._v(" "),a("span",{attrs:{slot:"icon"},slot:"icon"},[e._t("icon")],2),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{staticClass:"select-card-popup",staticStyle:{"background-color":"#f6f6f6"},on:{"on-hide":function(t){e.$emit("on-hide")},"on-show":function(t){e.$emit("on-show")}},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[e._t("popup-header",null,{options:e.options,value:e.currentValue}),e._v(" "),a("div",{staticClass:"popup-title"},[a("img",{attrs:{src:s("x0Ou"),alt:""},on:{click:e.hide}}),e._v(" "),a("span",[e._v("请选择")])]),e._v(" "),a("radio",{staticStyle:{"background-color":"#fff"},attrs:{options:e.options,"fill-mode":!1},on:{"on-change":e.onValueChange},scopedSlots:e._u([{key:"each-item",fn:function(t){return[e._t("each-item",[a("p",[a("img",{directives:[{name:"show",rawName:"v-show",value:t.icon,expression:"props.icon"}],staticClass:"vux-radio-icon",attrs:{src:t.icon}}),e._v(" "),a("span",{staticClass:"vux-radio-label"},[e._v(e._s(t.label))])])],{icon:t.icon,label:t.label,index:t.index})]}}]),model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}}),e._v(" "),e.showAddCard?a("group",{attrs:{gutter:10}},[a("cell",{attrs:{title:"添加卡片",isLink:!0},nativeOn:{click:function(t){return e.toAddCard(t)}}})],1):e._e()],2)],1)])},o=[],n={render:a,staticRenderFns:o};t.a=n},"UDD/":function(e,t,s){"use strict";var a=s("hRKE"),o=s.n(a),n=s("4YfN"),r=s.n(n),i=s("r0Vc"),c=s("Y9TT"),u=s.n(c),d=s("CKVb"),l=s("gpPJ"),h=s("cTn1"),p=s("sm8H"),m=s("Jp5S");delete i.a.value,t.a={name:"selectCard",directives:{TransferDom:m.a},props:r()({placeholder:String,readonly:Boolean},i.a,i.b,{showAddCard:{type:Boolean,default:!1}}),data:function(){return{showPopup:!1,currentValue:this.value}},computed:{displayValue:function(){var e=this;if(!this.options.length)return"";if("object"===o()(this.options[0])){var t=u()(this.options,function(t){return t.key===e.currentValue});if(t)return t.value}return this.currentValue}},components:{Group:d.a,Popup:h.a,Radio:p.a,Cell:l.a},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e),this.$emit("on-change",e)}},methods:{onValueChange:function(e){this.hide()},show:function(){this.readonly||(this.showPopup=!0)},hide:function(){this.showPopup=!1},toAddCard:function(){this.showPopup=!1,this.$router.push({name:"cdbank_add_credit"})}}}},Y0kP:function(e,t){},Y9TT:function(e,t){function s(e,t,s){if("function"==typeof Array.prototype.find)return e.find(t,s);s=s||this;var a,o=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(a=0;a<o;a++)if(t.call(s,e[a],a,e))return e[a]}e.exports=s},dl3a:function(e,t,s){"use strict";s.d(t,"a",function(){return n}),s.d(t,"b",function(){return r}),s.d(t,"c",function(){return i});var a=s("hRKE"),o=s.n(a),n=function(e){return"object"===(void 0===e?"undefined":o()(e))?e.value:e},r=function(e){return"object"===(void 0===e?"undefined":o()(e))?e.key:e},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(!e.length)return t;if("string"==typeof e[0])return t;var s=e.filter(function(e){return e.key===t});return s.length?s[0].value||s[0].label:t}},fPtN:function(e,t,s){"use strict";var a,o=s("a3Yh"),n=s.n(o),r=s("4YfN"),i=s.n(r),c=s("JGLT"),u=s("CKVb"),d=s("gpPJ"),l=s("fvyU"),h=s("IXui"),p=s("f4gh"),m=s("Jp5S"),f=s("HVJf"),v=s("QlY8");i()({},s.i(f.b)(["invocationResult","iosPlatform"]),{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data")},nextStepButton:function(){var e=this.PageData.cardNo,t=this.smsCode,s=this.pwd,a=this.phoneNo;return""!==e&&""!==t&&""!==s&&!0===/^1[3|4|5|7|8][0-9]{9}$/.test(a)}}),a={init:function(){var e=/^1[3|4|5|7|8][0-9]{9}$/;11===this.phoneNo.length&&e.test(this.phoneNo)?this.checkMobile=!1:(this.phoneNo="",this.checkMobile=!0),this.PageData=this.getMessage()},goBack:function(){window.client.goBack()},showPswKeyboard:function(){console.log("调用密码键盘"),window.client.showPswKeyboard({isSpecialPassWordRequired:!0,maxSize:"6",ps:"AE0"})},hidePswKeyboard:function(){console.log("隐藏密码键盘"),window.client.hidePswKeyboard()},showToastFunc:function(e){this.toastText=e,this.showToast=!0},initTradeTimestamp:function(){var e=new Date,t=e.getTime();localStorage.setItem("tradetimestamp",t)},resetTradeTimestamp:function(){var e=this,t=setTimeout(function(){e.initTradeTimestamp(),clearTimeout(t)},500)},getTradeTimestamp:function(e){return e.tradetimestamp=localStorage.getItem("tradetimestamp"),e},getSmsCode:function(){var e=this;if(!this.countting){var t=60;this.getCodeText=t+"s";var s=setInterval(function(){e.getCodeText=--t+"s",t||(clearInterval(s),e.countting=!1,e.getCodeText="获取")},1e3);this.countting=!0,this.getDebitSmsCode(),this.showToastFunc("已向尾号为"+this.phoneNo.substring(7,11)+"的手机号发送验证码，60s后方能重新获取，短信验证码120s内有效。")}},nextStep:function(){var e=this;window.client.request({url:"/api/MH0087.json",success:function(t){var s=t.invocationResult,a=s.root;"0"===a.ec?window.client.request({url:"/api/MH0087.json"}).then(function(t){var s=t.invocationResult.root,o=s.em,n=s.ec;if(s.cd.cardFlag){var r={em:o,ec:n,accountNo:e.PageData.cardNo};e.$router.push({name:"add_debit_success",params:r})}else{var i={setPayPwdInfo_Random:a.cd.setPayPwdInfo_Random,cardNo:e.PageData.cardNo,PageData:e.$route.params};e.$router.push({name:"add_details_password",params:i})}}):"EBMB2105"===a.em?e.$vux.confirm.prompt("此卡已添加，请到卡管理查看卡片",{onConfirm:function(){e.$router.push({name:"cdbank_credit_info"})}}):e.$vux.confirm.prompt(a.em,{onConfirm:function(){e.$router.push({name:"cdbank_credit_info"})}})}})},checkCardNo:function(){this.hidePswKeyboard();var e=this.pageParams.virtualCardNo||this.cardNo;""!=e&&null!=e&&0!=e.length&&e&&"undefined"!=e?e.length<16?this.showToastFunc("卡号不能低于16位，请重新输入"):e.match('[#\\~\\$\\@\\!\\*\\^\\<\\>\\"%\\&]')?this.showToastFunc("卡号只能为数字，请重新输入"):e.match("[0-9]")||this.showToastFunc("卡号只能为数字，请重新输入"):this.showToastFunc("卡号不能为空")},checkPhoneNo:function(){var e=/^1[3|4|5|7|8][0-9]{9}$/;return 11===this.phoneNo.length&&e.test(this.phoneNo)?this.checkMobile=!1:this.checkMobile=!0},phoneToast:function(){var e=/^1[3|4|5|7|8][0-9]{9}$/;11===this.phoneNo.length&&e.test(this.phoneNo)||this.showToastFunc("手机号输入不正确，请重新输入！")},checkSmsCode:function(e){this.hidePswKeyboard(),""==e?this.showToastFunc("短信验证码或取款密码不能为空"):isNaN(e)?this.showToastFunc("短信验证码只能为数字，请重新输入"):e.match('[#\\~\\$\\@\\!\\*\\^\\<\\>\\"%\\&]')?this.showToastFunc("短信验证码只能为数字，请重新输入"):6!=e.length&&this.showToastFunc("短信验证码长度为6位，请重新输入")},getDebitSmsCode:function(){var e=this,t=(this.getUserInfo,""),s=this.pageParams;""==s.virtualCardNo||void 0==s.virtualCardNo?(t=this.cardNo,t=this.numStrFormat(t,"2")):t=s.virtualCardNo;var a=t.substring(t.length-4,t.length),o=this.phoneNo,n={accountNo:t,atrACC:a,mobileNo:o,flag:"D"};window.client.request({url:"/api/MH0087.json",adapter:"CommonAdapter",procedure:"second_MH0087",parameters:n,success:function(t){var s=t.invocationResult,a=s.root;"0"==a.ec?"0"!=a.cd.optionFlag&&e.showToastFunc("您刚已获取了短信验证码，无需重新获取。"):e.showToastFunc(a.ec+":"+a.em)}})},certNo_Format:function(e,t){return"护照"==e?t.substr(0,4)+"****"+t.substr(6):"军官证"==e||"士兵证"==e||"警官证"==e?t.substr(0,3)+"****"+t.substr(4):"港澳来往内地通行证"==e?t.substr(0,4)+"****"+t.substr(6):"台湾同胞来往内地通行证"==e?t.substr(0,3)+"****"+t.substr(5):"外国人居留证"==e?t.substr(0,9)+"****"+t.substr(12):t.substr(0,4)+"****"+t.substr(t.length-4,4)},getMessage:function(){var e=this.$route.params,t=this.getUserInfo,s=t.data.customerNameCN,a=(t.data.certType,e.certName),o=t.data.certNo;o=this.certNo_Format(a,o);var n=this.numStrFormat(e.virtualCardNo,"1");return{name:this.getSurname(s)+"*",certNo:o,certName:a,cardNo:n,debitName:"广发银行 储蓄卡"}},numStrFormat:function(e,t){var s="";switch(e+="",t){case"1":s=e.replace(/(\d{4})/g,"$1 ");break;case"2":s=e.split(" ").join("");break;case"3":s=e.substr(0,4)+"****"+e.substr(e.length-4,4);break;default:s=e}return s},getSurname:function(e){var t=["欧阳","太史","端木","上官","司马","东方","独孤","南宫","万俟","闻人","夏侯","诸葛","尉迟","公羊","赫连","澹台","皇甫","宗政","濮阳","公冶","太叔","申屠","公孙","慕容","仲孙","钟离","长孙","宇文","司徒","鲜于","司空","闾丘","子车","亓官","司寇","巫马","公西","颛孙","壤驷","公良","漆雕","乐正","宰父","谷梁","拓跋","夹谷","轩辕","令狐","段干","百里","呼延","东郭","南门","羊舌","微生","公户","公玉","公仪","梁丘","公仲","公上","公门","公山","公坚","左丘","公伯","西门","公祖","第五","公乘","贯丘","公皙","南荣","东里","东宫","仲长","子书","子桑","即墨","达奚","褚师"];return-1==this.inArray(e.substr(0,2),t)?e.charAt(0):e.substr(0,2)},inArray:function(e,t,s){if(e.indexOf&&!s)return e.indexOf(t);for(var a=0;a<e.length;){if(s&&e[a][s]==t||!s&&e[a]===t)return a;a++}return-1},addDebitsubmit:function(){var e=this,t=this.cardNo;t=numStrFormat(t,"2");var s=this.phoneNo,a=this.smsCode,o=this.pwd,n={smsCode:a,accountNo:t,mobileNo:s,password:pwd||o,flag:"D"};window.client.request({url:"/api/MH0087.json",adapter:"CommonAdapter",procedure:"second_MH0087",parameters:this.getTradeTimestamp(n),success:function(t){e.resetTradeTimestamp();var s=t.root;if("0"==s.ec){var a=e.pageParms;e.requestMH0348(function(e){e?this.$router.push({name:"add_credit_success",pageParms:a}):this.$router.push({name:"add_credit_success",params:n})})}else if("EBMB2105"==s.em);else{var o=e.pageParms;o&&void 0!=o.CardType&&o.CardType}}})},requestMH0348:function(){var e={};window.client.request({url:"/api/MHMH0348.json",adapter:"CommonAdapter",procedure:"second_MH0348",parameters:e,success:function(e){"0"==e.root.ec&&e.root.cd.pswdStatus}})}},n()(a,"addDebitsubmit",function(){var e=this,t=this.cardNo;t=numStrFormat(t,"2");var s=this.phoneNo,a=this.smsCode,o=this.pwd,n={smsCode:a,accountNo:t,mobileNo:s,password:pwd||o,flag:"D"};window.client.request({url:"/api/MH0087.json",adapter:"CommonAdapter",procedure:"second_MH0087",parameters:this.getTradeTimestamp(n),success:function(t){e.resetTradeTimestamp();var s=t.root;if("0"==s.ec){var a=e.pageParms;e.requestMH0348(function(e){e?this.$router.push({name:"add_debit_success",pageParms:a}):this.$router.push({name:"add_debit_success",params:n})})}else if("EBMB2105"==s.em);else{var o=e.pageParms;o&&void 0!=o.CardType&&o.CardType}}})}),n()(a,"requestMH0348",function(){var e={};window.client.request({url:"/api/MHMH0348.json",adapter:"CommonAdapter",procedure:"second_MH0348",parameters:e,success:function(e){"0"==e.root.ec?e.root.cd.pswdStatus:e.root.em}})}),n()(a,"addCreditMH0321",function(){var e=this,t={};t.tranCode="MH0321",t.srcChannel="MH",t.accountNo=this.cardNo,t.busCode="AC",t.smsCode=this.smsCode,t.tempFlag="N",t.pushType="Y",t.mobileNo=this.phoneNo,window.client.request({url:"/api/MHMH0321.json",adapter:CommonAdapter,procedure:second_MH0321,parameters:t,success:function(t){var s=t.root,a=e.pageParms;(s.ec="0")&&e.requestMH0348(function(e){this.$router.push({name:"add_credit_success",pageParms:a})})}})}),n()(a,"addCreditMH0321",function(){var e=this,t={};t.tranCode="MH0321",t.srcChannel="MH",t.accountNo=this.cardNo,t.busCode="AC",t.smsCode=this.smsCode,t.tempFlag="N",t.pushType="Y",t.mobileNo=this.phoneNo,window.client.request({url:"/api/MHMH0321.json",adapter:CommonAdapter,procedure:second_MH0321,parameters:t,success:function(t){var s=t.root,a=e.pageParms;(s.ec="0")&&e.requestMH0348(function(e){this.$router.push({name:"add_credit_success",pageParms:a})})}})}),n()(a,"addCreditMH0321",function(){var e=this,t={};t.tranCode="MH0321",t.srcChannel="MH",t.accountNo=this.cardNo,t.busCode="AC",t.smsCode=this.smsCode,t.tempFlag="N",t.pushType="Y",t.mobileNo=this.phoneNo,window.client.request({url:"/api/MHMH0321.json",adapter:CommonAdapter,procedure:second_MH0321,parameters:t,success:function(t){var s=t.root,a=e.pageParms;(s.ec="0")&&e.requestMH0348(function(e){this.$router.push({name:"add_credit_success",pageParms:a})})}})}),c.a,l.a,u.a,d.a,h.a,p.a,m.a,v.a,m.a},jf31:function(e,t,s){"use strict";function a(e,t){for(var s=e.length;s--;)if(e[s]===t)return!0;return!1}var o=s("qWCq"),n=s("dl3a"),r=s("44WN");t.a={name:"radio",mixins:[o.a],filters:{getValue:n.a,getKey:n.b},props:s.i(r.a)(),created:function(){this.handleChangeEvent=!0},methods:{getValue:n.a,getKey:n.b,onFocus:function(){this.currentValue=this.fillValue||"",this.isFocus=!0}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){var t=a(this.options,e);""!==e&&t&&(this.fillValue=""),this.$emit("on-change",e,s.i(n.c)(this.options,e)),this.$emit("input",e)},fillValue:function(e){this.fillMode&&this.isFocus&&(this.currentValue=e)}},data:function(){return{fillValue:"",isFocus:!1,currentValue:this.value}}}},qyAu:function(e,t,s){"use strict";function a(e,t){for(var s=e.length;s--;)if(e[s]===t)return!0;return!1}var o=s("qWCq"),n=s("dl3a"),r=s("44WN");o.a,n.a,n.b,s.i(r.a)(),n.a,n.b},r0Vc:function(e,t,s){"use strict";s.d(t,"b",function(){return a}),s.d(t,"a",function(){return o});var a={options:{type:Array,required:!0},value:[String,Number],fillMode:{type:Boolean,default:!1},fillPlaceholder:{type:String,default:"其他"},fillLabel:{type:String,default:"其他"},disabled:Boolean,selectedLabelStyle:Object},o={title:[String,Number],value:[String,Number,Array],isLink:Boolean,isLoading:Boolean,inlineDesc:[String,Number],primary:{type:String,default:"title"},link:[String,Object],valueAlign:[String,Boolean,Number],borderIntent:{type:Boolean,default:!0},disabled:Boolean,arrowDirection:String,alignItems:String}},r36s:function(e,t){},sm8H:function(e,t,s){"use strict";function a(e){s("r36s")}var o=(s("qyAu"),s("jf31")),n=s("JwlZ"),r=s("C7Lr"),i=a,c=r(o.a,n.a,!1,i,null,null);t.a=c.exports},tcYz:function(e,t,s){"use strict";var a,o=s("a3Yh"),n=s.n(o),r=s("4YfN"),i=s.n(r),c=s("JGLT"),u=s("CKVb"),d=s("gpPJ"),l=s("fvyU"),h=s("IXui"),p=s("f4gh"),m=s("Jp5S"),f=s("HVJf"),v=s("QlY8");t.a={name:"add_debit",data:function(){return{phoneNo:"",checkMobile:!1,cardNo:"",smsCode:"",pwd:"",showToast:!1,toastText:"",getCodeText:"获取",countting:!1,PageData:"",pageParams:this.$route.params,option1:"身份证",options1:["身份证"],show1:!1}},computed:i()({},s.i(f.b)(["invocationResult","iosPlatform"]),{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data")},nextStepButton:function(){var e=this.PageData.cardNo,t=this.smsCode,s=this.pwd,a=this.phoneNo;return""!==e&&""!==t&&""!==s&&!0===/^1[3|4|5|7|8][0-9]{9}$/.test(a)}}),methods:(a={init:function(){var e=/^1[3|4|5|7|8][0-9]{9}$/;11===this.phoneNo.length&&e.test(this.phoneNo)?this.checkMobile=!1:(this.phoneNo="",this.checkMobile=!0),this.PageData=this.getMessage()},goBack:function(){window.client.goBack()},showPswKeyboard:function(){console.log("调用密码键盘"),window.client.showPswKeyboard({isSpecialPassWordRequired:!0,maxSize:"6",ps:"AE0"})},hidePswKeyboard:function(){console.log("隐藏密码键盘"),window.client.hidePswKeyboard()},showToastFunc:function(e){this.toastText=e,this.showToast=!0},initTradeTimestamp:function(){var e=new Date,t=e.getTime();localStorage.setItem("tradetimestamp",t)},resetTradeTimestamp:function(){var e=this,t=setTimeout(function(){e.initTradeTimestamp(),clearTimeout(t)},500)},getTradeTimestamp:function(e){return e.tradetimestamp=localStorage.getItem("tradetimestamp"),e},getSmsCode:function(){var e=this;if(!this.countting){var t=60;this.getCodeText=t+"s";var s=setInterval(function(){e.getCodeText=--t+"s",t||(clearInterval(s),e.countting=!1,e.getCodeText="获取")},1e3);this.countting=!0,this.getDebitSmsCode(),this.showToastFunc("已向尾号为"+this.phoneNo.substring(7,11)+"的手机号发送验证码，60s后方能重新获取，短信验证码120s内有效。")}},nextStep:function(){var e=this;window.client.request({url:"/api/MH0087.json",success:function(t){var s=t.invocationResult,a=s.root;"0"===a.ec?window.client.request({url:"/api/MH0087.json"}).then(function(t){var s=t.invocationResult.root,o=s.em,n=s.ec;if(s.cd.cardFlag){var r={em:o,ec:n,accountNo:e.PageData.cardNo};e.$router.push({name:"add_debit_success",params:r})}else{var i={setPayPwdInfo_Random:a.cd.setPayPwdInfo_Random,cardNo:e.PageData.cardNo,PageData:e.$route.params};e.$router.push({name:"add_details_password",params:i})}}):"EBMB2105"===a.em?e.$vux.confirm.prompt("此卡已添加，请到卡管理查看卡片",{onConfirm:function(){e.$router.push({name:"cdbank_credit_info"})}}):e.$vux.confirm.prompt(a.em,{onConfirm:function(){e.$router.push({name:"cdbank_credit_info"})}})}})},checkCardNo:function(){this.hidePswKeyboard();var e=this.pageParams.virtualCardNo||this.cardNo;""!=e&&null!=e&&0!=e.length&&e&&"undefined"!=e?e.length<16?this.showToastFunc("卡号不能低于16位，请重新输入"):e.match('[#\\~\\$\\@\\!\\*\\^\\<\\>\\"%\\&]')?this.showToastFunc("卡号只能为数字，请重新输入"):e.match("[0-9]")||this.showToastFunc("卡号只能为数字，请重新输入"):this.showToastFunc("卡号不能为空")},checkPhoneNo:function(){var e=/^1[3|4|5|7|8][0-9]{9}$/;return 11===this.phoneNo.length&&e.test(this.phoneNo)?this.checkMobile=!1:this.checkMobile=!0},phoneToast:function(){var e=/^1[3|4|5|7|8][0-9]{9}$/;11===this.phoneNo.length&&e.test(this.phoneNo)||this.showToastFunc("手机号输入不正确，请重新输入！")},checkSmsCode:function(e){this.hidePswKeyboard(),""==e?this.showToastFunc("短信验证码或取款密码不能为空"):isNaN(e)?this.showToastFunc("短信验证码只能为数字，请重新输入"):e.match('[#\\~\\$\\@\\!\\*\\^\\<\\>\\"%\\&]')?this.showToastFunc("短信验证码只能为数字，请重新输入"):6!=e.length&&this.showToastFunc("短信验证码长度为6位，请重新输入")},getDebitSmsCode:function(){var e=this,t=(this.getUserInfo,""),s=this.pageParams;""==s.virtualCardNo||void 0==s.virtualCardNo?(t=this.cardNo,t=this.numStrFormat(t,"2")):t=s.virtualCardNo;var a=t.substring(t.length-4,t.length),o=this.phoneNo,n={accountNo:t,atrACC:a,mobileNo:o,flag:"D"};window.client.request({url:"/api/MH0087.json",adapter:"CommonAdapter",procedure:"second_MH0087",parameters:n,success:function(t){var s=t.invocationResult,a=s.root;"0"==a.ec?"0"!=a.cd.optionFlag&&e.showToastFunc("您刚已获取了短信验证码，无需重新获取。"):e.showToastFunc(a.ec+":"+a.em)}})},certNo_Format:function(e,t){return"护照"==e?t.substr(0,4)+"****"+t.substr(6):"军官证"==e||"士兵证"==e||"警官证"==e?t.substr(0,3)+"****"+t.substr(4):"港澳来往内地通行证"==e?t.substr(0,4)+"****"+t.substr(6):"台湾同胞来往内地通行证"==e?t.substr(0,3)+"****"+t.substr(5):"外国人居留证"==e?t.substr(0,9)+"****"+t.substr(12):t.substr(0,4)+"****"+t.substr(t.length-4,4)},getMessage:function(){var e=this.$route.params,t=this.getUserInfo,s=t.data.customerNameCN,a=(t.data.certType,e.certName),o=t.data.certNo;o=this.certNo_Format(a,o);var n=this.numStrFormat(e.virtualCardNo,"1");return{name:this.getSurname(s)+"*",certNo:o,certName:a,cardNo:n,debitName:"广发银行 储蓄卡"}},numStrFormat:function(e,t){var s="";switch(e+="",t){case"1":s=e.replace(/(\d{4})/g,"$1 ");break;case"2":s=e.split(" ").join("");break;case"3":s=e.substr(0,4)+"****"+e.substr(e.length-4,4);break;default:s=e}return s},getSurname:function(e){var t=["欧阳","太史","端木","上官","司马","东方","独孤","南宫","万俟","闻人","夏侯","诸葛","尉迟","公羊","赫连","澹台","皇甫","宗政","濮阳","公冶","太叔","申屠","公孙","慕容","仲孙","钟离","长孙","宇文","司徒","鲜于","司空","闾丘","子车","亓官","司寇","巫马","公西","颛孙","壤驷","公良","漆雕","乐正","宰父","谷梁","拓跋","夹谷","轩辕","令狐","段干","百里","呼延","东郭","南门","羊舌","微生","公户","公玉","公仪","梁丘","公仲","公上","公门","公山","公坚","左丘","公伯","西门","公祖","第五","公乘","贯丘","公皙","南荣","东里","东宫","仲长","子书","子桑","即墨","达奚","褚师"];return-1==this.inArray(e.substr(0,2),t)?e.charAt(0):e.substr(0,2)},inArray:function(e,t,s){if(e.indexOf&&!s)return e.indexOf(t);for(var a=0;a<e.length;){if(s&&e[a][s]==t||!s&&e[a]===t)return a;a++}return-1},addDebitsubmit:function(){var e=this,t=this.cardNo;t=numStrFormat(t,"2");var s=this.phoneNo,a=this.smsCode,o=this.pwd,n={smsCode:a,accountNo:t,mobileNo:s,password:pwd||o,flag:"D"};window.client.request({url:"/api/MH0087.json",adapter:"CommonAdapter",procedure:"second_MH0087",parameters:this.getTradeTimestamp(n),success:function(t){e.resetTradeTimestamp();var s=t.root;if("0"==s.ec){var a=e.pageParms;e.requestMH0348(function(e){e?this.$router.push({name:"add_credit_success",pageParms:a}):this.$router.push({name:"add_credit_success",params:n})})}else if("EBMB2105"==s.em);else{var o=e.pageParms;o&&void 0!=o.CardType&&o.CardType}}})},requestMH0348:function(){var e={};window.client.request({url:"/api/MHMH0348.json",adapter:"CommonAdapter",procedure:"second_MH0348",parameters:e,success:function(e){"0"==e.root.ec&&e.root.cd.pswdStatus}})}},n()(a,"addDebitsubmit",function(){var e=this,t=this.cardNo;t=numStrFormat(t,"2");var s=this.phoneNo,a=this.smsCode,o=this.pwd,n={smsCode:a,accountNo:t,mobileNo:s,password:pwd||o,flag:"D"};window.client.request({url:"/api/MH0087.json",adapter:"CommonAdapter",procedure:"second_MH0087",parameters:this.getTradeTimestamp(n),success:function(t){e.resetTradeTimestamp();var s=t.root;if("0"==s.ec){var a=e.pageParms;e.requestMH0348(function(e){e?this.$router.push({name:"add_debit_success",pageParms:a}):this.$router.push({name:"add_debit_success",params:n})})}else if("EBMB2105"==s.em);else{var o=e.pageParms;o&&void 0!=o.CardType&&o.CardType}}})}),n()(a,"requestMH0348",function(){var e={};window.client.request({url:"/api/MHMH0348.json",adapter:"CommonAdapter",procedure:"second_MH0348",parameters:e,success:function(e){"0"==e.root.ec?e.root.cd.pswdStatus:e.root.em}})}),n()(a,"addCreditMH0321",function(){var e=this,t={};t.tranCode="MH0321",t.srcChannel="MH",t.accountNo=this.cardNo,t.busCode="AC",t.smsCode=this.smsCode,t.tempFlag="N",t.pushType="Y",t.mobileNo=this.phoneNo,window.client.request({url:"/api/MHMH0321.json",adapter:CommonAdapter,procedure:second_MH0321,parameters:t,success:function(t){var s=t.root,a=e.pageParms;(s.ec="0")&&e.requestMH0348(function(e){this.$router.push({name:"add_credit_success",pageParms:a})})}})}),n()(a,"addCreditMH0321",function(){var e=this,t={};t.tranCode="MH0321",t.srcChannel="MH",t.accountNo=this.cardNo,t.busCode="AC",t.smsCode=this.smsCode,t.tempFlag="N",t.pushType="Y",t.mobileNo=this.phoneNo,window.client.request({url:"/api/MHMH0321.json",adapter:CommonAdapter,procedure:second_MH0321,parameters:t,success:function(t){var s=t.root,a=e.pageParms;(s.ec="0")&&e.requestMH0348(function(e){this.$router.push({name:"add_credit_success",pageParms:a})})}})}),n()(a,"addCreditMH0321",function(){var e=this,t={};t.tranCode="MH0321",t.srcChannel="MH",t.accountNo=this.cardNo,t.busCode="AC",t.smsCode=this.smsCode,t.tempFlag="N",t.pushType="Y",t.mobileNo=this.phoneNo,window.client.request({url:"/api/MHMH0321.json",adapter:CommonAdapter,procedure:second_MH0321,parameters:t,success:function(t){var s=t.root,a=e.pageParms;(s.ec="0")&&e.requestMH0348(function(e){this.$router.push({name:"add_credit_success",pageParms:a})})}})}),a),components:{Confirm:c.a,XInput:l.a,Group:u.a,Cell:d.a,XButton:h.a,Toast:p.a,TransferDom:m.a,PopupRadio:v.a},directives:{TransferDom:m.a},mounted:function(){this.init()}}},uJdE:function(e,t){},x0Ou:function(e,t,s){e.exports=s.p+"static/img/nav_icon_close.png"}});