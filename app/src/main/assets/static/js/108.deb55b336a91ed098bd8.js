webpackJsonp([108],{"0NkC":function(e,t,a){"use strict";function n(e){a("n4v/")}var o=(a("lcof"),a("Uv5Y")),s=a("ORVi"),i=a("C7Lr"),r=n,u=i(o.a,s.a,!1,r,null,null);t.a=u.exports},"44WN":function(e,t,a){"use strict";t.a=function(){return{options:{type:Array,required:!0},value:[String,Number],fillMode:{type:Boolean,default:!1},fillPlaceholder:{type:String,default:"其他"},fillLabel:{type:String,default:"其他"},disabled:Boolean,selectedLabelStyle:Object}}},"8in4":function(e,t,a){"use strict";var n=a("mqrw"),o=a("gpPJ"),s=a("CKVb"),i=a("0NkC"),r=a("IXui"),u=a("lVae");t.a={name:"update",components:{Alert:n.a,Cell:o.a,Group:s.a,PopupRadio:i.a,XButton:r.a},data:function(){return{pageParams:this.$route.params,show:!1,selectedCard:"",projIsShow:!1,amountList:[],moreIsShow:!0,moreMoney:!1,last:!1,isSelected:!1,inputAmt:"",updateInfo:[],donateProjName:"",donateProjList:[],currentIndex:0,result:[]}},computed:{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data}},methods:{toSubmit:function(){this.$router.push({name:"donate_quota_donateSuccess",params:this.result})},getParams:function(){var e=this.getUserInfo.creditCardList,t=this.pageParams.donateProjName,n=this.pageParams.donateProj,o=this.pageParams.donateType,s=this.pageParams.donateAmt,i=this.pageParams.donateCode,r=this.pageParams.CARDNBR;this.updateInfo.dtypeName=a.i(u.a)(1*o),this.donateProjName=t;for(var l=0;l<e.length;l++)if(e[l].accountNo==r){var c=e[l].cardType;this.selectedCard=this.pageParams.CARDNBR+" "+c;break}t&&null!=t&&void 0!=t&&""!=t&&o&&("1"==o||"3"==o)&&(this.projIsShow=!0,this.getQuotaDonateProjectList(o)),"0"==o||"1"==o?(this.moreIsShow=!1,this.inputAmt=s):"2"==o?this.getQuotaDonateAmountList(!0,o,null,s,i):"3"==o&&this.getQuotaDonateAmountList(!0,o,n,s,i)},getQuotaDonateAmountList:function(e,t,a,n,o){var s=this;if(e){var i={tranCode:"MH0154",srcChannel:"MH",donateType:t};null!=a&&(i.donateProj=a),window.client.request({url:"/api/MH0154.json",encrypt:!0,isLogin:!0,funName:"second_MH0154",adapter:"CommonAdapter",params:i,success:function(e){var t=e.invocationResult.root;if("0"==t.ec){for(var a=t.cd.result.kColl,i=[],r=[],u=0;u<6;u++)r.push("¥"+a[u].donateAmt);s.updateInfo.selectMoney=r;for(var l=0;l<a.length;l++)i.push({key:"¥"+a[l].donateAmt,value:a[l].donateCode});a.length<=5&&(s.moreIsShow=!1),s.amountList=i,s.inputAmt=null!=n&&null!=o?n:s.amountList[0].key.replace(/¥/g,"")}else s.$vux.alert.show({content:t.em})}})}else{for(var r=[10,50,100,200,300,400,500,600,700,800,900,1e3],u=0;u<6;u++)this.selectMoney.push("¥"+r[u].donateAmt);for(var l=[],c=0;c<r.length;c++)l.push({key:"¥"+r[c]});this.amountList=l,this.inputAmt=null!=n&&null!=o?n:this.amountList[0].key.replace(/¥/g,"")}},getQuotaDonateProjectList:function(e){var t=this,a={tranCode:"MH0153",srcChannel:"MH",customerId:this.getUserInfo.customerId,donateType:e};window.client.request({url:"/api/MH0153.json",encrypt:!0,isLogin:!0,funName:"second_MH0153",adapter:"CommonAdapter",params:a,success:function(e){var a=e.invocationResult.root;if("0"==a.ec)for(var n=a.cd.result.kColl,o=0;o<n.length;o++)t.donateProjList.push({key:decodeURI(n[o].donateProjName),value:n[o].donateProj});else t.$vux.alert.show({content:a.em})}})},selectQuotaAmount:function(e){this.currentIndex=e,this.inputAmt=this.amountList[e].key},selectMore:function(){this.moreMoney=!0},selectMoreMoney:function(e){this.moreMoney=!1,this.updateInfo.moreMoney=this.amountList[e].key,this.updateInfo.moreMoney.replace("¥","")>=400?(this.currentIndex="",this.isSelected=!0,this.inputAmt=this.updateInfo.moreMoney,this.last=!0):(this.isSelected=!1,this.currentIndex=e,this.inputAmt=this.updateInfo.moreMoney)},updateSubmit:function(){var e=this,t=this.pageParams.CARDNBR,a=this.pageParams.donateType,n=this.pageParams.donateCode,o=(this.pageParams.donateTrueCode,this.updateInfo.selectMoney),s=this.pageParams.donateProj,i=this.donateProjName,r={tranCode:"MH0159",srcChannel:"MH",customerId:this.getUserInfo.customerId,CARDNBR:t,donateAmt:o,donateType:a,donateCode:n};"2"==a&&(r.donateTrueCode=""),s&&i&&(r.donateProj=s,r.donateProjName=encodeURI(i)),window.client.request({url:"/api/MH0159.json",encrypt:!0,isLogin:!0,funName:"second_MH0159",adapter:"CommonAdapter",params:r,success:function(t){e.result=t.invocationResult.root,e.show=!0}})}},created:function(){this.getParams()}}},JwlZ:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"weui-cells_radio",class:e.disabled?"vux-radio-disabled":""},[e._l(e.options,function(t,n){return a("label",{staticClass:"weui-cell weui-cell_radio weui-check__label",attrs:{for:"radio_"+e.uuid+"_"+n}},[a("div",{staticClass:"weui-cell__bd"},[e._t("each-item",[a("p",[a("img",{directives:[{name:"show",rawName:"v-show",value:t&&t.icon,expression:"one && one.icon"}],staticClass:"vux-radio-icon",attrs:{src:t.icon}}),e._v(" "),a("span",{staticClass:"vux-radio-label",style:e.currentValue===e.getKey(t)?e.selectedLabelStyle||"":""},[e._v(e._s(e._f("getValue")(t)))])])],{icon:t.icon,label:e.getValue(t),index:n,selected:e.currentValue===e.getKey(t)})],2),e._v(" "),a("div",{staticClass:"weui-cell__ft"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"weui-check",attrs:{type:"radio",id:e.disabled?"":"radio_"+e.uuid+"_"+n},domProps:{value:e.getKey(t),checked:e._q(e.currentValue,e.getKey(t))},on:{change:function(a){e.currentValue=e.getKey(t)}}}),e._v(" "),a("span",{staticClass:"weui-icon-checked"})])])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.fillMode,expression:"fillMode"}],staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label",attrs:{for:""}},[e._v(e._s(e.fillLabel))])]),e._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fillValue,expression:"fillValue"}],staticClass:"weui-input needsclick",attrs:{type:"text",placeholder:e.fillPlaceholder},domProps:{value:e.fillValue},on:{blur:function(t){e.isFocus=!1},focus:function(t){e.onFocus()},input:function(t){t.target.composing||(e.fillValue=t.target.value)}}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:""===e.value&&!e.isFocus,expression:"value==='' && !isFocus"}],staticClass:"weui-cell__ft"},[a("i",{staticClass:"weui-icon-warn"})])])],2)},o=[],s={render:n,staticRenderFns:o};t.a=s},ORVi:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("cell",{attrs:{title:e.title,value:e.currentValue,"is-link":!e.readonly,"value-align":e.valueAlign,"border-intent":e.borderIntent},nativeOn:{click:function(t){return e.show(t)}}},[!e.displayValue&&e.placeholder?a("span",{staticClass:"vux-cell-placeholder"},[e._v(e._s(e.placeholder))]):e._e(),e._v(" "),e.displayValue?a("span",{staticClass:"vux-cell-value"},[e._v(e._s(e.displayValue))]):e._e(),e._v(" "),a("span",{attrs:{slot:"icon"},slot:"icon"},[e._t("icon")],2),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{staticStyle:{"background-color":"#fff"},on:{"on-hide":function(t){e.$emit("on-hide")},"on-show":function(t){e.$emit("on-show")}},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[e._t("popup-header",null,{options:e.options,value:e.currentValue}),e._v(" "),a("radio",{attrs:{options:e.options,"fill-mode":!1},on:{"on-change":e.onValueChange},scopedSlots:e._u([{key:"each-item",fn:function(t){return[e._t("each-item",[a("p",[a("img",{directives:[{name:"show",rawName:"v-show",value:t.icon,expression:"props.icon"}],staticClass:"vux-radio-icon",attrs:{src:t.icon}}),e._v(" "),a("span",{staticClass:"vux-radio-label"},[e._v(e._s(t.label))])])],{icon:t.icon,label:t.label,index:t.index})]}}]),model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}})],2)],1)])},o=[],s={render:n,staticRenderFns:o};t.a=s},Uv5Y:function(e,t,a){"use strict";var n=a("hRKE"),o=a.n(n),s=a("4YfN"),i=a.n(s),r=a("gpPJ"),u=a("cTn1"),l=a("sm8H"),c=a("44WN"),d=a("Dvzy"),p=a("Jp5S"),h=a("qZvt"),v=a.n(h),f=a.i(d.a)();delete f.value,t.a={name:"popup-radio",components:{Popup:u.a,Radio:l.a,Cell:r.a},directives:{TransferDom:p.a},props:i()({placeholder:String,readonly:Boolean},f,a.i(c.a)()),computed:{displayValue:function(){var e=this;if(!this.options.length)return"";if("object"===o()(this.options[0])){var t=v()(this.options,function(t){return t.key===e.currentValue});if(t)return t.value}return this.currentValue}},methods:{onValueChange:function(e){this.hide()},show:function(){this.readonly||(this.showPopup=!0)},hide:function(){this.showPopup=!1}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e),this.$emit("on-change",e)}},data:function(){return{showPopup:!1,currentValue:this.value}}}},dl3a:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i}),a.d(t,"c",function(){return r});var n=a("hRKE"),o=a.n(n),s=function(e){return"object"===(void 0===e?"undefined":o()(e))?e.value:e},i=function(e){return"object"===(void 0===e?"undefined":o()(e))?e.key:e},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(!e.length)return t;if("string"==typeof e[0])return t;var a=e.filter(function(e){return e.key===t});return a.length?a[0].value||a[0].label:t}},heki:function(e,t,a){"use strict";function n(e){a("rziV")}Object.defineProperty(t,"__esModule",{value:!0});var o=(a("qNpA"),a("8in4")),s=a("y++Z"),i=a("C7Lr"),r=n,u=i(o.a,s.a,!1,r,null,null);t.default=u.exports},jf31:function(e,t,a){"use strict";function n(e,t){for(var a=e.length;a--;)if(e[a]===t)return!0;return!1}var o=a("qWCq"),s=a("dl3a"),i=a("44WN");t.a={name:"radio",mixins:[o.a],filters:{getValue:s.a,getKey:s.b},props:a.i(i.a)(),created:function(){this.handleChangeEvent=!0},methods:{getValue:s.a,getKey:s.b,onFocus:function(){this.currentValue=this.fillValue||"",this.isFocus=!0}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){var t=n(this.options,e);""!==e&&t&&(this.fillValue=""),this.$emit("on-change",e,a.i(s.c)(this.options,e)),this.$emit("input",e)},fillValue:function(e){this.fillMode&&this.isFocus&&(this.currentValue=e)}},data:function(){return{fillValue:"",isFocus:!1,currentValue:this.value}}}},lVae:function(e,t,a){"use strict";function n(e){var t="";switch(e){case 0:t="一次性不定向捐赠";break;case 1:t="一次性定向捐赠";break;case 2:t="每月定额捐赠";break;case 3:t="每月定额定向捐赠";break;case"一次性不定向捐赠":t=0;break;case"一次性定向捐赠":t=1;break;case"每月定额捐赠":t=2;break;case"每月定额定向捐赠":t=3;break;default:t=""}return t}t.a=n},lcof:function(e,t,a){"use strict";var n=a("hRKE"),o=a.n(n),s=a("4YfN"),i=a.n(s),r=a("gpPJ"),u=a("cTn1"),l=a("sm8H"),c=a("44WN"),d=a("Dvzy"),p=a("Jp5S"),h=a("qZvt"),v=a.n(h),f=a.i(d.a)();delete f.value;u.a,l.a,r.a,p.a,i()({placeholder:String,readonly:Boolean},f,a.i(c.a)())},"n4v/":function(e,t){},qNpA:function(e,t,a){"use strict";var n=a("mqrw"),o=a("gpPJ"),s=a("CKVb"),i=a("0NkC"),r=a("IXui"),u=a("lVae");n.a,o.a,s.a,i.a,r.a},qZvt:function(e,t,a){"use strict";function n(e,t,a){if("function"==typeof Array.prototype.find)return e.find(t,a);a=a||this;var n,o=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(n=0;n<o;n++)if(t.call(a,e[n],n,e))return e[n]}e.exports=n},qyAu:function(e,t,a){"use strict";function n(e,t){for(var a=e.length;a--;)if(e[a]===t)return!0;return!1}var o=a("qWCq"),s=a("dl3a"),i=a("44WN");o.a,s.a,s.b,a.i(i.a)(),s.a,s.b},r36s:function(e,t){},rziV:function(e,t){},sm8H:function(e,t,a){"use strict";function n(e){a("r36s")}var o=(a("qyAu"),a("jf31")),s=a("JwlZ"),i=a("C7Lr"),r=n,u=i(o.a,s.a,!1,r,null,null);t.a=u.exports},"y++Z":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("xcgb-box",[a("xcgb-head",{attrs:{title:"我的定额",keepAlive:!1,leftOptions:[{type:"left_arrow_black"}]}}),e._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"select-card"},[e._v(e._s(e.selectedCard))]),e._v(" "),a("div",[a("group",{attrs:{title:"捐赠信息"}},[a("cell",{staticClass:"donate-way",attrs:{title:"捐赠方式","is-link":""}},[e._v(e._s(e.updateInfo.dtypeName))]),e._v(" "),a("popup-radio",{directives:[{name:"show",rawName:"v-show",value:e.projIsShow,expression:"projIsShow"}],staticClass:"donate-way",attrs:{title:"捐赠项目",options:e.donateProjList,placeholder:"请选择"},model:{value:e.donateProjName,callback:function(t){e.donateProjName=t},expression:"donateProjName"}},[a("div",{staticClass:"select-tit",attrs:{slot:"popup-header"},slot:"popup-header"},[a("p",[e._v("选取捐赠项目")])])])],1)],1),e._v(" "),a("div",{staticClass:"donate-money"},[a("p",[e._v("捐赠金额"),a("span",[e._v(e._s(e.inputAmt))])]),e._v(" "),a("div",{staticClass:"select-money"},[e._l(e.updateInfo.selectMoney,function(t,n){return a("span",{class:{selected:n===e.currentIndex},on:{click:function(t){e.selectQuotaAmount(n)}}},[e._v(e._s(t))])}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.last,expression:"last"}],class:{selected:e.isSelected}},[e._v(e._s(e.updateInfo.moreMoney))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.moreIsShow,expression:"moreIsShow"}],on:{click:e.selectMore}},[e._v("更多")])],2)]),e._v(" "),a("div",{staticClass:"confirm"},[a("x-button",{attrs:{type:"warn"},nativeOn:{click:function(t){return e.updateSubmit(t)}}},[e._v("确定")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.moreMoney,expression:"moreMoney"}],staticClass:"moreMoney"},[a("div",{staticClass:"more-money-cot"},[a("p",[e._v("请选择捐赠金额")]),e._v(" "),e._l(e.amountList,function(t,n){return a("div",{on:{click:function(t){e.selectMoreMoney(n)}}},[e._v(e._s(t.key))])})],2)]),e._v(" "),a("alert",{on:{"on-hide":e.toSubmit},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",{staticClass:"submit-hint"},[a("p",[e._v("请确认捐赠信息")]),e._v(" "),a("p",[e._v("捐赠金额修改为"+e._s(e.inputAmt))])])])],1)],1)},o=[],s={render:n,staticRenderFns:o};t.a=s}});