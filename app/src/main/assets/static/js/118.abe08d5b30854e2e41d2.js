webpackJsonp([118],{"1Aa/":function(t,e,r){var o=r("adiS"),n=r("biYF")("iterator"),a=r("ZVlJ");t.exports=r("AKd3").isIterable=function(t){var e=Object(t);return void 0!==e[n]||"@@iterator"in e||a.hasOwnProperty(o(e))}},"4kbQ":function(t,e,r){t.exports=r.p+"static/img/virtual_tip.png"},"5uHF":function(t,e){},A1jW:function(t,e,r){"use strict";function o(t){r("5uHF")}var n=(r("riT+"),r("nzsO")),a=r("FtbH"),s=r("C7Lr"),i=o,c=s(n.a,a.a,!1,i,null,null);e.a=c.exports},FtbH:function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"selectCardBox",on:{click:function(e){t.showSelectCard=!0}}},[t.selectedCard.iconType?r("i",{staticClass:"bank-icon",class:t.selectedCard.iconType}):t._e(),t._v(" "),r("span",[t._v(t._s(t.selectedCard.key))]),t._v(" "),r("i",{staticClass:"arrow"})]),t._v(" "),r("select-card",{attrs:{cardList:t.selelctCardArr},on:{clickNormalItem:t.clickNormalItem},model:{value:t.showSelectCard,callback:function(e){t.showSelectCard=e},expression:"showSelectCard"}})],1)},n=[],a={render:o,staticRenderFns:n};e.a=a},KH7x:function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=r("MGgt"),a=o(n),s=r("HzJ8"),i=o(s);e.default=function(){function t(t,e){var r=[],o=!0,n=!1,a=void 0;try{for(var s,c=(0,i.default)(t);!(o=(s=c.next()).done)&&(r.push(s.value),!e||r.length!==e);o=!0);}catch(t){n=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if((0,a.default)(Object(e)))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},MGgt:function(t,e,r){t.exports={default:r("hWTF"),__esModule:!0}},"a/VP":function(t,e,r){t.exports=r.p+"static/img/note_01.png"},dyxK:function(t,e){},gJGU:function(t,e,r){"use strict";function o(t){r("dyxK")}Object.defineProperty(e,"__esModule",{value:!0});var n=(r("wRvF"),r("jbGf")),a=r("m+H5"),s=r("C7Lr"),i=o,c=s(n.a,a.a,!1,i,null,null);e.default=c.exports},hWTF:function(t,e,r){r("A1pn"),r("IsPG"),t.exports=r("1Aa/")},jbGf:function(t,e,r){"use strict";var o=r("A1jW"),n=r("mqrw"),a=r("JGLT"),s=r("CKVb"),i=r("fvyU"),c=r("IXui");e.a={name:"virtualCardQuery",components:{Alert:n.a,Confirm:a.a,Group:s.a,XInput:i.a,XButton:c.a,selectCardComp:o.a},data:function(){return{show:!1,inputPwd:!0,smsCode:!1,currentCardNo:"",cordMobileNo:"",cardSpecies:"",getCodeText:"获取",btn:!0,pwd:"",msgCode:"",nextParam:{},pactText:"",localtime:""}},computed:{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data}},methods:{goHome:function(){this.$router.push({name:"home_index"})},toEnsure:function(){this.$router.push({name:"cdbank_add_credit"})},toCancel:function(){window.client.goBack(-1)},getCreditInfo:function(){var t="20180207174830",e=new Date,r=t.substring(0,4),o=t.substring(5,7),n=t.substring(8,10);console.log(e.setFullYear(r,o-1,n)),e.setDate(e.getDate()-30);var a=e.getFullYear(),s=e.getMonth()+1<10?"0"+(e.getMonth()+1):""+(e.getMonth()+1),i=e.getDate()<10?"0"+e.getDate():""+e.getDate(),c=a+s+i;console.log(c);var d=this.getUserInfo.creditCardList||[],u=this.getUserInfo.freeLoansCardList||[],l=d.concat(u);this.currentCardNo=this.getUserInfo.defaultAccountNo?this.getUserInfo.defaultAccountNo:l[0].accountNo;for(var p=0;p<l.length;p++)l[p].accountNo==this.currentCardNo&&(this.cardSpecies=l[p].cardType+"("+this.currentCardNo.substr(this.currentCardNo.length-4,4)+")");l&&0!=l.length?this.getHint():this.show=!0},getHint:function(){var t=this,e={tranCode:"MH00l6",srcChannel:"MH",pactNo:"MH100062"};window.client.request({ifpUrl:"/mp/MP1012.do",url:"/api/MH0016.json",funName:"second_MH0016",adapter:"CommonAdapter",encrypt:!0,isLogin:!0,parameters:e,success:function(e){var r=e;t.pactText=r.pactText}})},handleSelectCard:function(t){this.currentCardNo=t.value,this.cardSpecies=t.key,this.pwd="",this.inputPwd=!0,this.smsCode=!1,this.btn=!0},getLocalTime:function(){var t=this;window.client.request({ifpUrl:"/mp/MP0002.do",url:"/api/getLocalTime.json",success:function(e){t.localtime=e.currentTime}})},toNext:function(){var t=this;if(""==this.pwd||void 0==this.pwd)return void this.$vux.toast.show({width:"4rem",text:"提现密码不能为空，请重新输入",type:"text"});if(6!=this.pwd.length)return void this.$vux.toast.show({width:"4rem",text:"提现密码长度小于6位，请重新输入",type:"text"});var e={tranCode:"MH0236",srcChannel:"MH",accountNo:this.currentCardNo,accPassword:this.pwd,mobileNo:this.getUserInfo.mobileNo,customerId:this.getUserInfo.customerId};window.client.request({ifpUrl:"/mp/MP1200.do",url:"/api/MH0236.json",adapter:"CommonAdapter",funName:"second_MH0236",isLogin:!0,encrypt:!0,parameters:e,processException:function(e){"CW0000IS"==e.errorCode&&t.$vux.toast.show({text:"提现密码错误，请重新输入",type:"text"})},success:function(r){t.getLocalTime();var o=r.cardStatus,n=r.contributeFlag;e.transferFlowNoNew="MH"+t.localtime+"status","P"==n?"1"==o?(t.inputPwd=!1,t.smsCode=!0,t.btn=!1,t.nextParam.coreMobile=r.mobileNo):"0"==o&&t.$vux.toast.show({text:"信用卡异常，无法受理",type:"text"}):t.$vux.toast.show({text:"非主卡，无法查询",type:"text"})}})},getMsgCode:function(){var t=this;if("获取"==this.getCodeText){var e=(this.getUserInfo.mobileNo,{tranCode:"MH0240",srcChannel:"MH",mobileNo:"MH",busCode:"XN",SMSID:"M1",TEMPLATEID:"081M100104",STDINFOTYP:encodeURI("虚拟卡查询"),smsLimitFlag:"Y",accountNo:this.currentCardNo,SMSFlag:"1"});window.client.request({ifpUrl:"/mp/MP1108.do",url:"/api/MH0240.json",adapter:"CommonAdapter",funName:"second_MH0240",isLogin:!0,encrypt:!0,parameters:e,success:function(e){if(t.getLocalTime(),t.cordMobileNo=e.mobileNo,"0"!=e.optionFlag)t.$vux.toast.show({text:"短信验证码超时，请重新发送",type:"text"});else{t.$vux.toast.show({width:"4rem",text:"已发送至手机尾号"+t.cordMobileNo.substr(t.cordMobileNo.length-4,4),type:"text"});var r=60;t.getCodeText=--r+"s";var o=setInterval(function(){t.getCodeText=--r+"s",r||(clearInterval(o),t.getCodeText="获取")},1e3)}}})}},toConfirm:function(){var t=this;if(""==this.msgCode||void 0==this.msgCode)return void this.$vux.toast.show({width:"4rem",text:"短信验证码不能为空，请重新输入",type:"text"});if(6!=this.msgCode.length)return void this.$vux.toast.show({width:"4rem",text:"短信验证码长度小于6位，请重新输入",type:"text"});var e={tranCode:"MH0237",srcChannel:"MH",creditCardNo:this.currentCardNo,mobileNo:this.cordMobileNo,smsCode:this.msgCode,busCode:"XN",customerId:this.getUserInfo.customerId};window.client.request({ifpUrl:"/mp/MP1201.do",url:"/api/MH0237.json",adapter:"CommonAdapter",funName:"second_MH0237",isLogin:!0,encrypt:!0,parameters:e,processException:function(e){"PA040304"==e.errorCode&&t.$vux.toast.show({text:"短信验证码格式错误，请重新输入",type:"text"})},success:function(r){t.getLocalTime(),e.transferFlowNoNew="MH"+t.localtime+"status",t.nextParam.virtualCardInfo=r.virtualCardInfo,t.nextParam.creditCardNo=t.currentCardNo,t.nextParam.cardSpecies=t.cardSpecies,t.$router.push({name:"virtual_card_virtualCard",params:t.nextParam})}})}},created:function(){this.getCreditInfo()}}},"m+H5":function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("xcgb-box",[o("xcgb-head",{attrs:{title:"虚拟卡查询",keepAlive:!1,leftOptions:[{type:"left_arrow_red"}],rightOptions:[{type:"index_icon"}]},on:{rightHandler:t.goHome}}),t._v(" "),o("div",{staticClass:"main"},[o("confirm",{on:{"on-confirm":t.toEnsure,"on-cancel":t.toCancel},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("div",{staticClass:"confirm-hint"},[o("img",{attrs:{src:r("4kbQ")}}),t._v(" "),o("p",[t._v("尊敬的用户，您还未添加我行信用卡，请先进行添加。")])])]),t._v(" "),o("select-card-comp",{on:{callback:t.handleSelectCard}}),t._v(" "),o("div",{staticClass:"inputPwd"},[o("group",[t.inputPwd?o("x-input",{attrs:{title:"提现密码",type:"password",max:6,placeholder:"请输入信用卡提现密码"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}}):o("x-input",{attrs:{title:"提现密码",type:"password",disabled:"",placeholder:"******"}})],1)],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.smsCode,expression:"smsCode"}],staticClass:"smsCode"},[o("span",[t._v("短信验证码")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.msgCode,expression:"msgCode"}],attrs:{type:"tel",maxlength:"6",placeholder:"请输入"},domProps:{value:t.msgCode},on:{input:function(e){e.target.composing||(t.msgCode=e.target.value)}}}),t._v(" "),o("span",{class:["gain",{counting:"获取"!=t.getCodeText}],on:{click:function(e){t.getMsgCode()}}},[t._v(t._s(t.getCodeText))])]),t._v(" "),o("div",{staticClass:"hint"},[o("div",{staticClass:"hint-tit"},[o("img",{attrs:{src:r("a/VP")}}),t._v(" "),o("span",[t._v("温馨提示 :")])]),t._v(" "),o("p",[t._v(t._s(t.pactText))])])],1),t._v(" "),o("footer",[o("div",{staticClass:"footer"},[t.btn?o("x-button",{attrs:{type:"warn"},nativeOn:{click:function(e){return t.toNext(e)}}},[t._v("下一步")]):o("x-button",{attrs:{type:"warn"},nativeOn:{click:function(e){return t.toConfirm(e)}}},[t._v("确定")])],1)])],1)},n=[],a={render:o,staticRenderFns:n};e.a=a},nzsO:function(t,e,r){"use strict";var o=r("HzJ8"),n=r.n(o),a=r("KH7x"),s=r.n(a);e.a={name:"selectCardComp",data:function(){return{selectedCard:{iconType:"",key:""},selelctCardArr:{normal:[]},showSelectCard:!1}},computed:{getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data}},methods:{clickNormalItem:function(t){this.selectedCard=t,this.$emit("callback",t)}},created:function(){var t=[],e=this.getUserInfo.creditCardList,r=this.getUserInfo.defaultAccountNo,o=!0,a=!1,i=void 0;try{for(var c,d=n()(e.entries());!(o=(c=d.next()).done);o=!0){var u=c.value,l=s()(u,2),p=(l[0],l[1]),f=p.cardType+"("+p.accountNo.substr(p.accountNo.length-4,4)+")",h=p.accountNo;t.push({key:f,value:h,iconType:"CGB",selected:!1,cardName:p.cardType})}}catch(t){a=!0,i=t}finally{try{!o&&d.return&&d.return()}finally{if(a)throw i}}if(""===r||void 0===r)t[0].selected=!0,this.selectedCard=t[0];else{var m=!0,v=!1,C=void 0;try{for(var g,x=n()(e.entries());!(m=(g=x.next()).done);m=!0){var w=g.value,b=s()(w,2),y=b[0];r===b[1].accountNo&&(t[y].selected=!0,this.selectedCard=t[y])}}catch(t){v=!0,C=t}finally{try{!m&&x.return&&x.return()}finally{if(v)throw C}}}this.selelctCardArr.normal=t}}},"riT+":function(t,e,r){"use strict";var o=r("HzJ8"),n=(r.n(o),r("KH7x"));r.n(n)},wRvF:function(t,e,r){"use strict";var o=r("A1jW"),n=r("mqrw"),a=r("JGLT"),s=r("CKVb"),i=r("fvyU"),c=r("IXui");n.a,a.a,s.a,i.a,c.a,o.a}});