webpackJsonp([140],{"/q99":function(t,e,s){"use strict";var o=s("3cXf"),i=s.n(o),a=s("zu3n"),n=s("CKVb"),r=s("gpPJ");XcgbBox,a.a,n.a,r.a},"0Y3Q":function(t,e,s){"use strict";var o=s("1KUA"),i=s.n(o),a=s("rLbt"),n=s("ONqH");e.a={name:"x-img",mixins:[n.a],created:function(){this.$vux&&this.$vux.bus&&this.$vux.bus.$on("vux:after-view-enter",this.init)},methods:{init:function(){var t=this;this.blazy&&this.blazy.destroy(),this.$el.src=this.defaultSrc,this.$el.className=this.$el.className.replace("b-loaded",""),this.blazy=new i.a({scroller:this.scroller,container:this.container,selector:"#vux-ximg-"+this.uuid,offset:t.offset,errorClass:t.errorClass,successClass:t.successClass,separator:t.separator,success:function(e){t.$emit("on-success",t.src,e)},error:function(e,s){t.$emit("on-error",t.src,e,s)}})}},mounted:function(){var t=this;this.$el.setAttribute("id","vux-ximg-"+this.uuid),this.$nextTick(function(){setTimeout(function(){t.init()},t.delay)}),s.i(a.a)()},computed:{currentSrc:function(){return s.i(a.b)()&&this.webpSrc?this.webpSrc:this.src}},props:{src:String,webpSrc:String,defaultSrc:{type:String,default:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="},errorClass:String,successClass:String,offset:{type:Number,default:100},scroller:Object,container:String,delay:{type:Number,default:0},separator:String},watch:{src:function(t){this.init()}},beforeDestroy:function(){this.blazy&&this.blazy.destroy(),this.blazy=null,this.$vux&&this.$vux.bus&&this.$vux.bus.$off("vux:after-view-enter",this.init)}}},"1KUA":function(t,e,s){var o,i;!function(a,n){o=n,void 0!==(i="function"==typeof o?o.call(e,s,e,t):o)&&(t.exports=i)}(0,function(){"use strict";function t(t){var s=t._util;if(s.elements=u(t.options.selector),s.count=s.elements.length,s.destroyed&&(s.destroyed=!1,t.options.container&&p(t.options.container,function(t){m(t,"scroll",s.validateT)}),m(window,"resize",s.saveViewportOffsetT),m(window,"resize",s.validateT),m(window,"scroll",s.validateT),t.options.scroller)){var o=t.options.scroller._xscroll,i=o.userConfig.useOriginScroll?"scroll":"scrollend";o.on("afterrender",s.validateT,t),o.on(i,s.validateT,t)}e(t)}function e(t){for(var e=t._util,o=0;o<e.count;o++){var i=e.elements[o];(s(i)||c(i,t.options.successClass))&&(t.load(i),e.elements.splice(o,1),e.count--,o--)}0===e.count&&t.destroy()}function s(t){var e=t.getBoundingClientRect();return e.right>=h.left&&e.bottom>=h.top&&e.left<=h.right&&e.top<=h.bottom}function o(t,e,s){if(!c(t,s.successClass)&&(e||s.loadInvisible||t.offsetWidth>0&&t.offsetHeight>0)){var o=t.getAttribute(v)||t.getAttribute(s.src);if(o){var u=o.split(s.separator),d=u[g&&u.length>1?1:0],b=r(t,"img");if(b||void 0===t.src){var h=new Image,I=function(){s.error&&s.error(t,"invalid"),l(t,s.errorClass),f(h,"error",I),f(h,"load",_)},_=function(){if(b){a(t,d),n(t,y,s.srcset);var e=t.parentNode;e&&r(e,"picture")&&p(e.getElementsByTagName("source"),function(t){n(t,y,s.srcset)}),s.scroller&&s.scroller.reset()}else t.style.backgroundImage='url("'+d+'")';i(t,s),f(h,"load",_),f(h,"error",I)};m(h,"error",I),m(h,"load",_),a(h,d)}else a(t,d),i(t,s)}else r(t,"video")?(p(t.getElementsByTagName("source"),function(t){n(t,A,s.src)}),t.load(),i(t,s)):(s.error&&s.error(t,"missing"),l(t,s.errorClass))}}function i(t,e){l(t,e.successClass),e.success&&e.success(t),t.removeAttribute(e.src),p(e.breakpoints,function(e){t.removeAttribute(e.src)})}function a(t,e){t[A]=e}function n(t,e,s){var o=t.getAttribute(s);o&&(t[e]=o,t.removeAttribute(s))}function r(t,e){return t.nodeName.toLowerCase()===e}function c(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")}function l(t,e){c(t,e)||(t.className+=" "+e)}function u(t){for(var e=[],s=document.querySelectorAll(t),o=s.length;o--;e.unshift(s[o]));return e}function d(t){h.bottom=(window.innerHeight||document.documentElement.clientHeight)+t,h.right=(window.innerWidth||document.documentElement.clientWidth)+t}function m(t,e,s){t.attachEvent?t.attachEvent&&t.attachEvent("on"+e,s):t.addEventListener(e,s,!1)}function f(t,e,s){t.detachEvent?t.detachEvent&&t.detachEvent("on"+e,s):t.removeEventListener(e,s,!1)}function p(t,e){if(t&&e)for(var s=t.length,o=0;o<s&&!1!==e(t[o],o);o++);}function b(t,e,s){var o=0;return function(){var i=+new Date;i-o<e||(o=i,t.apply(s,arguments))}}var v,h,g,A="src",y="srcset";return function(s){if(!document.querySelectorAll){var i=document.createStyleSheet();document.querySelectorAll=function(t,e,s,o,a){for(a=document.all,e=[],t=t.replace(/\[for\b/gi,"[htmlFor").split(","),s=t.length;s--;){for(i.addRule(t[s],"k:v"),o=a.length;o--;)a[o].currentStyle.k&&e.push(a[o]);i.removeRule(0)}return e}}var a=this,n=a._util={};n.elements=[],n.destroyed=!0,a.options=s||{},a.options.error=a.options.error||!1,a.options.offset=a.options.offset||100,a.options.success=a.options.success||!1,a.options.selector=a.options.selector||".b-lazy",a.options.separator=a.options.separator||"|",a.options.container=!!a.options.container&&document.querySelectorAll(a.options.container),a.options.errorClass=a.options.errorClass||"b-error",a.options.breakpoints=a.options.breakpoints||!1,a.options.loadInvisible=a.options.loadInvisible||!1,a.options.successClass=a.options.successClass||"b-loaded",a.options.validateDelay=a.options.validateDelay||25,a.options.saveViewportOffsetDelay=a.options.saveViewportOffsetDelay||50,a.options.srcset=a.options.srcset||"data-srcset",a.options.src=v=a.options.src||"data-src",g=window.devicePixelRatio>1,h={},h.top=0-a.options.offset,h.left=0-a.options.offset,a.revalidate=function(){t(this)},a.load=function(t,e){var s=this.options;void 0===t.length?o(t,e,s):p(t,function(t){o(t,e,s)})},a.destroy=function(){var t=this,e=t._util;t.options.container&&p(t.options.container,function(t){f(t,"scroll",e.validateT)}),f(window,"scroll",e.validateT),f(window,"resize",e.validateT),f(window,"resize",e.saveViewportOffsetT),t.scroller&&t.scroller._xscroll&&t.scroller._xscroll.off("scroll scrollend afterrender",e.validateT,t.scroller._xscroll),e.count=0,e.elements.length=0,e.destroyed=!0},n.validateT=b(function(){e(a)},a.options.validateDelay,a),n.saveViewportOffsetT=b(function(){d(a.options.offset)},a.options.saveViewportOffsetDelay,a),d(a.options.offset),p(a.options.breakpoints,function(t){if(t.width>=window.screen.width)return v=t.src,!1}),setTimeout(function(){t(a)})}})},FGyy:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement;return(t._self._c||e)("img",{staticClass:"vux-x-img",attrs:{src:t.defaultSrc,"data-src":t.currentSrc}})},i=[],a={render:o,staticRenderFns:i};e.a=a},X04K:function(t,e,s){"use strict";function o(t){s("zKZt")}Object.defineProperty(e,"__esModule",{value:!0});var i=(s("/q99"),s("nKkF")),a=s("ZEdX"),n=s("C7Lr"),r=o,c=n(i.a,a.a,!1,r,null,null);e.default=c.exports},"ZE+c":function(t,e){},ZEdX:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("xcgb-box",{staticClass:"ticket-detail"},[s("xcgb-head",{attrs:{title:"详情",keepAlive:!1,leftOptions:[{type:"left_arrow_black"}]}}),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"info"},[s("x-img",{staticClass:"pic",attrs:{src:t.rootPath+t.mbaItem.mbaActDetailImg}}),t._v(" "),s("p",{staticClass:"title"},[t._v(t._s(t.mbaItem.mbaName))])],1),t._v(" "),s("group",{attrs:{gutter:"0"}},[s("cell",[s("div",{staticClass:"status",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"status1",class:{no:"1"===t.mbaItem.mbaIsRefund}},[t._v("随时退")]),t._v(" "),s("div",{staticClass:"status2",class:{no:"1"===t.mbaItem.mbaIsBespeak}},[t._v("需预约")])]),t._v(" "),s("div",{staticClass:"sold"},[t._v(t._s(t.soldNum))])])],1),t._v(" "),t.payShow?s("group",[s("cell",{attrs:{title:"支付方式"}},[s("div",{staticClass:"pay"},[t._v(t._s(t.payMode))])])],1):t._e(),t._v(" "),s("group",[s("cell",{attrs:{title:"可用门店"}}),t._v(" "),s("cell",{attrs:{title:t.shopItem.cmi_merchant_name}}),t._v(" "),s("cell",{attrs:{title:t.shopItem.mmi_merchant_addr}}),t._v(" "),s("cell",{attrs:{title:"最近门店"}}),t._v(" "),s("cell",{attrs:{title:"查看全部门店","is-link":"",link:{name:"cdbank_branchandMerchant_map",params:{mbaId:t.mbaItem.mbaId}}}})],1),t._v(" "),s("group",{staticClass:"desc"},[s("cell",{attrs:{title:t.descTitle}}),t._v(" "),s("cell",[s("div",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"title"},[t._v("活动时间")]),t._v(" "),s("div",[t._v(t._s(t.validTime))]),t._v(" "),s("div",{staticClass:"info-title"},[t._v(t._s(t.descInfoTitle))]),t._v(" "),s("div",[t._v(t._s(t.mbaItem.mbaGoodsDesc))])])])],1),t._v(" "),s("div",{staticClass:"footer"},[s("div",{staticClass:"left"},[t._v("￥"+t._s(t.goodItem.goods_price))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.buyBtn,expression:"buyBtn"}],staticClass:"right",attrs:{type:"button",disabled:t.canBuy},domProps:{value:t.buyBtn},on:{click:t.clickBuy,input:function(e){e.target.composing||(t.buyBtn=e.target.value)}}})])],1)],1)},i=[],a={render:o,staticRenderFns:i};e.a=a},nKkF:function(t,e,s){"use strict";var o=s("3cXf"),i=s.n(o),a=s("zu3n"),n=s("CKVb"),r=s("gpPJ");e.a={name:"ticketDetail",data:function(){return{rootPath:"http://localhost:8081/mock/public",mbaItem:{},goodItem:{},shopItem:{},payShow:!1,payMode:"",validTime:"",descTitle:"",descInfoTitle:"",canBuy:!1,soldNum:""}},components:{XcgbBox:XcgbBox,XImg:a.a,Group:n.a,Cell:r.a},computed:{buyBtn:function(){return this.canBuy?"抢光了":"立即抢购"}},created:function(){this.requestMba()},methods:{clickBuy:function(){var t={};t.orderType="0",t.mbaId=this.mbaItem.mbaId,t.mbaName=this.mbaItem.mbaName,t.mbaMallGoodsId=this.mbaItem.mbaMallGoodsId,t.mbaMaxPoints=this.mbaItem.mbaMaxPoints,t.mbaPayMode=this.mbaItem.mbaPayMode,t.mbaCouponBatchId=this.mbaItem.mbaCouponBatchId,t.mbaPayNum="1",t.goods_price=this.goodItem.goods_price,t.unitIntegral=this.goodItem.unitIntegral,t.bestRate=this.goodItem.bestRate},refreshMba:function(){"1"===this.mbaItem.mbaPayMode?this.payMode="现金":"2"===this.mbaItem.mbaPayMode?this.payMode="现金+积分":"3"===this.mbaItem.mbaPayMode&&(this.payMode="积分");var t=this.mbaItem.mbaStarttime.substr(0,4)+"."+this.mbaItem.mbaStarttime.substr(4,2)+"."+this.mbaItem.mbaStarttime.substr(6,2),e=this.mbaItem.mbaEndtime.substr(0,4)+"."+this.mbaItem.mbaEndtime.substr(4,2)+"."+this.mbaItem.mbaEndtime.substr(6,2);this.validTime=t+" - "+e,"1"===this.mbaItem.mbaType?(this.descTitle="使用须知",this.descInfoTitle="活动细则",this.payShow=!1,+this.mbaItem.remainNum>=0&&(this.soldNum="剩余"+this.mbaItem.remainNum),+this.mbaItem.drawNum>=+this.mbaItem.mbaQuota?this.canBuy=!1:this.canBuy=!0):(this.descTitle="购买须知",this.descInfoTitle="商品描述",this.payShow=!0)},refreshGoods:function(){"0"===this.goodItem.goods_backlog&&(this.canBuy=!1),this.soldNum="已售"+this.goodItem.soldNum},requestMba:function(){var t=this,e={};e.tranCode="MSMH0045",e.srcChannel="MH",e.mbaChannel="MH",e.mbaId=this.$route.params.mbaId,e.mbaCouponBatchId=this.$route.params.mbaCouponBatchId,e.mbaMallGoodsId=this.$route.params.mbaMallGoodsId,window.client.request({url:"/api/MSMH0045.json",adapter:"CommonAdapter",procedure:"MSMH0045",parameters:"["+i()(e)+"]",success:function(e){e.isSuccessful&&(t.mbaItem=e.root.cd,t.requestGoods(t.mbaItem.mbaMallGoodsId),t.requestShopInfo(t.mbaItem.mbaId),t.refreshMba())}})},requestGoods:function(t){var e=this,s={};s.tranCode="MAL313",s.origin="09",s.goods_id=t,s.query_type="0",s.cust_id="",window.client.request({url:"/api/MAL313.json",adapter:"CommonAdapter",procedure:"MAL313",parameters:"["+i()(s)+"]",success:function(t){t.isSuccessful&&(e.goodItem=t.Envelope.Body,e.refreshGoods())}})},requestShopInfo:function(t){var e={};e.longitude="23.0607756343",e.latitude="113.1507879495",e.mbaId=t,e.srcChannel="MH",e.tranCode="MSMH0047",e.sortMode="3",window.client.request({url:"/api/MSMH0047.json",adapter:"CommonAdapter",procedure:"MSMH0047",parameters:"["+i()(e)+"]",success:function(t){t.isSuccessful}})}}}},rAHL:function(t,e,s){"use strict";var o=s("1KUA"),i=s.n(o),a=s("rLbt"),n=s("ONqH");n.a,String,String,String,String,String,Number,Object,String,Number,String},rLbt:function(t,e,s){"use strict";function o(){if("undefined"!=typeof window&&window.localStorage&&"object"===("undefined"==typeof localStorage?"undefined":n()(localStorage))&&(!localStorage.getItem(r)||"available"!==localStorage.getItem(r)&&"disable"!==localStorage.getItem(r))){var t=document.createElement("img");t.onload=function(){try{localStorage.setItem(r,"available")}catch(t){}},t.onerror=function(){try{localStorage.setItem(r,"disable")}catch(t){}},t.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="}}function i(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&o(),"undefined"!=typeof window&&!!window.localStorage&&"available"===window.localStorage.getItem(r)}e.a=o,e.b=i;var a=s("hRKE"),n=s.n(a),r="can_use_webp";o()},zKZt:function(t,e){},zu3n:function(t,e,s){"use strict";function o(t){s("ZE+c")}var i=(s("rAHL"),s("0Y3Q")),a=s("FGyy"),n=s("C7Lr"),r=o,c=n(i.a,a.a,!1,r,null,null);e.a=c.exports}});