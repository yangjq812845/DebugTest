webpackJsonp([161],{"2hw5":function(t,e,a){"use strict";var r=a("hArn");e.a={name:"check-icon",components:{Icon:r.a},methods:{updateValue:function(){this.$emit("update:value",!this.value)}},props:{value:{type:Boolean,default:!1},type:{type:String,default:"default"}}}},"8B/q":function(t,e,a){"use strict";var r=a("hRKE"),n=a.n(r),o=a("HzJ8"),s=a.n(o),i=a("CKVb"),l=a("gpPJ"),c=a("fvyU"),u=a("JGLT"),p=a("neaj"),d=a("iBUI");e.a={name:"activityResult",data:function(){return{isGather:{0:!0,1:!1},isModify:{0:!1,1:"disabled"},storeInfo:{"身份证号":"certNo","姓名":"customerNameCN","手机号码":"mobileNo"},cardShow:!1,cardFlag:!1,cardArr:{},curCard:"",show:!1,check:!0,showcheckIcon:"",tipHead:"",tipCont:"",tipConform:!1,routeParams:{},kColl:[],kCollSelected:{},reverseList:[],getUserInfo:this.$store.state.invocationResult["WL-Authentication-Success"].UserInfoAuthRealm.attributes.data,cardParams:"",pltProdLevl1:"",infoParams:"",headerParams:""}},components:{Group:i.a,Cell:l.a,XInput:c.a,Confirm:u.a,CheckIcon:p.a},methods:{goHome:function(){this.$router.go(-2)},toast:function(t){this.$vux.toast.show({type:"text",text:t,width:"60%"})},selectCardShow:function(){this.cardFlag=!0},clickNormalCard:function(t){this.curCard=t},onConfirm:function(){this.$router.push({name:"cdbank_add_credit"})},pactText:function(){this.tipConform=!0,this.tipHead=this.routeParams.mai_proto_name,this.tipCont=this.routeParams.mai_proto_content},agreeGoBack:function(){this.tipConform=!1},inquireInfo:function(){var t=this;this.showcheckIcon="0"==this.routeParams.mai_isuseproto,this.routeParams.result.some(function(e){return t.kColl=e.kColl,"mhApplyInfoList"==e.id}),this.kColl=this.kColl.map(function(e){if("卡号"==e.applyName)return t.cardShow=!0,e.realValue="**************",t.kCollSelected=e,!1;if("0"==e.isPreFill){var a=t.getUserInfo[t.storeInfo[e.applyName]];t.reverseList.push({key:_.protect(a),value:a}),e.realValue=_.protect(a)}else e.realValue="";return e})},recommendCard:function(){var t=this,e=void 0;(e=this.routeParams.cardId?this.routeParams.cardId:this.routeParams.buttonUrl1?this.routeParams.buttonUrl1:this.routeParams.buttonUrl?this.routeParams.buttonUrl:"")&&window.client.request({url:"/api/MSMH0084.json",adapter:"MPBank",procedure:"MSMH0084",parameters:{tranCode:"MSMH0084",acaId:e,srcChannel:"MH"},success:function(e){var a=e.invocationResult,r=a.root.cd;t.cardParams="&raffleBreak4="+r.acaSalesId+"&raffleBreak3="+r.acaExtendArea+"&raffleBreak2="+r.acaTradeCode+"&raffleBreak1="+r.acaId},error:function(){}})},goApply:function(){var t=this;this.params=this.kColl,this.infoParams="";var e=!0,a=!1,r=void 0;try{for(var o,i=s()(this.params);!(e=(o=i.next()).done);e=!0){var l=o.value,c=function(e){e=0==e?t.kCollSelected:e;var a=/(.*)+(\*{4})/;"卡号"==e.applyName&&(e.realValue=t.curCard.value),a.test(e.realValue)&&(e.realValue=t.reverseList.find(function(t){return t.key==e.realValue}).value);var r=/^[a-zA-Z\d]\w[a-zA-Z\d]$/,n=/(^\d*$)|(^\S+\s+\S+$)/,o=/(^\d{15}$)|(^\d{17}([0-9]|X|x)$)/,s=r=/^1[3|4|5|7|8][0-9]{9}$/,i=/[#\\~\\,\\$\\!\\*\\<\\>\\"\\<\\>\\"%\\&]/g;if("0"==e.inputValue&&""==e.realValue)return t.toast(e.applyName+"不能为空!"),{v:void 0};if("身份证号"==e.applyName){if(i.test(e.realValue)||!o.test(e.realValue))return t.toast(e.applyName+"格式错误，请重新输入。"),{v:void 0}}else if("姓名"==e.applyName){if(i.test(e.realValue)||e.realValue.length<2)return t.toast(e.applyName+"格式错误，请重新输入。"),{v:void 0}}else if("手机号码"==e.applyName){if(i.test(e.realValue)||!n.test(e.realValue)||11!==e.realValue.length||!s.test(e.realValue))return t.toast(e.applyName+"格式错误，请重新输入。"),{v:void 0}}else if("卡号"==e.applyName&&i.test(e.realValue))return t.toast(e.applyName+"格式错误，请重新输入。"),{v:void 0};t.infoParams+="&mhApplyInfoList.isGather="+e.isGather+"&mhApplyInfoList.applyNam=e"+e.applyName+"&mhApplyInfoList.isPreFill="+e.isPreFill+"&mhApplyInfoList.isModify="+e.isModify+"\n&mhApplyInfoList.applySeqNo="+e.applySeqNo+"&mhApplyInfoList.act_id="+e.act_id+"&mhApplyInfoList.inputValue="+e.realValue+"&mhApplyInfoList.order="+e.order,l=e}(l);if("object"===(void 0===c?"undefined":n()(c)))return c.v}}catch(t){a=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw r}}if(!this.check)return void this.toast("您需要先同意该协议");this.headerParams="&tranCode=MHYC13&act_id="+this.routeParams.actId+"&cardType="+this.pltProdLevl1+"&certType="+this.getUserInfo.certType+this.cardParams+this.infoParams,console.log(this.headerParams),console.log("pltProdLevl1",this.pltProdLevl1),window.client.request({url:"/api/MHYC13.json",adapter:"MPBank",procedure:"MHYC13",parameters:this.headerParams,success:function(e){t.$router.push({name:"activity_result",params:[{MHYC13_resultData:e},{detail_resultData:t.routeParams}]})},error:function(){}})}},created:function(){var t=this;window.client.request({url:"/api/MHYC09.json",success:function(e){var a=e.invocationResult;t.routeParams=a.root.cd,t.tipHead=t.routeParams.mai_proto_name,t.inquireInfo();var r=t.getUserInfo.defaultAccountNo;t.cardArr=d.a.cardList(r).cardArr,t.curCard=d.a.cardList(r).curCard,t.pltProdLevl1=d.a.cardList(r).pltProdLevl1,t.recommendCard()},error:function(){}})}}},IaAm:function(t,e){},OmWI:function(t,e){},SPHO:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vux-check-icon",on:{click:t.updateValue}},[a("icon",{directives:[{name:"show",rawName:"v-show",value:"default"===t.type&&t.value,expression:"type === 'default' && value"}],attrs:{type:"success"}}),t._v(" "),a("icon",{directives:[{name:"show",rawName:"v-show",value:"plain"===t.type&&t.value,expression:"type === 'plain' && value"}],attrs:{type:"success_circle"}}),t._v(" "),a("icon",{directives:[{name:"show",rawName:"v-show",value:!t.value,expression:"!value"}],attrs:{type:"circle"}}),t._v(" "),a("span",[t._t("default")],2)],1)},n=[],o={render:r,staticRenderFns:n};e.a=o},UIrI:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("xcgb-box",[t.tipConform?t._e():a("xcgb-head",{attrs:{title:"活动详情",keepAlive:!1,leftOptions:[{type:"left_arrow_black"}],rightOptions:[{type:"index_icon"}]},on:{rightHandler:t.goHome}}),t._v(" "),t.tipConform?t._e():a("div",{staticClass:"main"},[a("group",{staticClass:"info",attrs:{gutter:"0"}},t._l(t.kColl,function(e,r){return t.isGather[e.isGather]&&"卡号"!==e.applyName?a("x-input",{key:r,attrs:{disabled:t.isModify[e.isModify],title:e.applyName,placeholder:"请输入"+e.applyName},model:{value:e.realValue,callback:function(a){t.$set(e,"realValue",a)},expression:"item.realValue"}}):t._e()})),t._v(" "),t.cardShow?a("group",{staticClass:"selected",attrs:{gutter:"0"}},[a("cell",{attrs:{"is-link":""},nativeOn:{click:function(e){return t.selectCardShow(e)}}},[t.curCard.iconType?a("i",{class:"icon-bank-"+t.curCard.iconType,attrs:{slot:"title"},slot:"title"}):t._e(),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.curCard.key))])])],1):t._e(),t._v(" "),a("select-card",{attrs:{cardList:t.cardArr},on:{clickNormalItem:t.clickNormalCard},model:{value:t.cardFlag,callback:function(e){t.cardFlag=e},expression:"cardFlag"}}),t._v(" "),t.showcheckIcon?a("check-icon",{staticClass:"tips",attrs:{value:t.check,type:"plain"},on:{"update:value":function(e){t.check=e}}},[t._v("我已阅读并同意"),a("a",{on:{click:function(e){e.stopPropagation(),t.pactText()}}},[t._v("《"+t._s(t.tipHead)+"》")])]):t._e(),t._v(" "),a("button",{on:{click:function(e){t.goApply()}}},[t._v("报名")]),t._v(" "),a("confirm",{on:{"on-confirm":t.onConfirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("p",[t._v("尊敬的用户，您还未添加我行信用卡，请先进行添加。")])])],1),t._v(" "),t.tipConform?a("xcgb-head",{attrs:{leftOptions:[{type:"left_arrow_black",preventGoBack:!0}],title:t.tipHead},on:{leftHandler:t.agreeGoBack}}):t._e(),t._v(" "),t.tipConform?a("div",{staticClass:"main tipText",domProps:{innerHTML:t._s(t.tipCont)}}):t._e()],1)},n=[],o={render:r,staticRenderFns:n};e.a=o},VBDF:function(t,e,a){"use strict";var r=a("hRKE"),n=a.n(r),o=a("HzJ8"),s=a.n(o),i=a("CKVb"),l=a("gpPJ"),c=a("fvyU"),u=a("JGLT"),p=a("neaj"),d=a("iBUI");i.a,l.a,c.a,u.a,p.a},iBUI:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var r={checkSession:function(t){try{if(null==t||void 0==t.status||"0"==t.status)return!1;var e=t.userLogonType;return!("10"==e|"20"==e)||-1}catch(t){return!1}},lastLoginVerify:function(t){return(new Date(t)-new Date("2018-01-20"))/864e5<=15},timeFormat:function(t){return 14==t.length?t.substring(0,4)+"-"+t.substring(4,6)+"-"+t.substring(6,8)+" "+t.substring(8,10)+":"+t.substring(10,12)+":"+t.substring(12,14):t.length>14?t.substring(0,4)+"-"+t.substring(4,6)+"-"+t.substring(6,8)+" "+t.substring(8,10)+":"+t.substring(10,12)+":"+t.substring(12,14)+":"+t.substring(14,t.length):t},getTime:function(t){return parseInt(Date.parse(t)/1e3)},cardList:function(t){var e=__Vue__.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data.creditCardList,a=void 0,r=void 0,n={normal:[]};r=_(e).map("pltProdLevl1").value().join("|")+"|",console.log("我是数据值",r),n.normal=n.normal.concat(_.transform(e,function(t,e){var a=e.cardType,r=e.accountNo,n=e.flag,o=void 0===n?null:n,s=e.accountType;t.push({iconType:"CGB",key:_.protect(r)+" 广发"+a,value:r,flag:o,accountType:s})})),a=t?_.findIndex(n.normal,{value:t}):"0";var o=n.normal[a];return n.normal[a].selected=!0,{cardArr:n,curCard:o,pltProdLevl1:r}}}},neaj:function(t,e,a){"use strict";function r(t){a("OmWI")}var n=(a("s7ZW"),a("2hw5")),o=a("SPHO"),s=a("C7Lr"),i=r,l=s(n.a,o.a,!1,i,null,null);e.a=l.exports},s7ZW:function(t,e,a){"use strict";var r=a("hArn");r.a,Boolean,String},yfPA:function(t,e,a){"use strict";function r(t){a("IaAm")}Object.defineProperty(e,"__esModule",{value:!0});var n=(a("VBDF"),a("8B/q")),o=a("UIrI"),s=a("C7Lr"),i=r,l=s(n.a,o.a,!1,i,"data-v-6a030c52",null);e.default=l.exports}});