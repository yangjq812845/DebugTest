webpackJsonp([199],{"0nm8":function(t,s,i){"use strict";function a(t){i("1M3J")}Object.defineProperty(s,"__esModule",{value:!0});var e=(i("rs6A"),i("NPb+")),c=i("R6Yx"),n=i("C7Lr"),l=a,o=n(e.a,c.a,!1,l,null,null);s.default=o.exports},"1M3J":function(t,s){},"NPb+":function(t,s,i){"use strict";var a=i("4YfN"),e=i.n(a),c=i("HVJf");s.a={name:"list",data:function(){return{showAllClassify:!1,barFixed:!1,activeList:[],src:[],classifyFirst:[],classifySecond:[{actId:"",activityId:"",activityName:"不限分类"}],listName:"",listId:"",countriesName:"",countryId:"",activityId:"",bgIsRed:!1,currentIndex:"0",secondId:[],offerId:"",secondSelected:""}},computed:e()({},i.i(c.b)("shareStore",["data"])),created:function(){this.listName=this.$store.state.shareStore.data.classifiyName||"不限分类",this.listId=this.$store.state.shareStore.data.classifiyId,this.countriesName=this.$store.state.shareStore.data.countriesName||"不限地区",this.countryId=this.$store.state.shareStore.data.countryId,this.getClassifyInfo(this.listId),this.getListInfo()},methods:{classifyIsShow:function(){this.showAllClassify=!this.showAllClassify},handleScroll:function(t){t.target.scrollTop>266?this.barFixed=!0:this.barFixed=!1},goCountry:function(){this.$router.push({name:"visa_country"})},First:function(t,s){this.listId=null,this.currentIndex=t,this.activityId=s.activityId;for(var i=0;i<this.secondId.length;i++)this.activityId==this.secondId[i].params.activityId&&(this.classifySecond=this.secondId[i].root.cd.result.kColl);this.getClassifyInfo(this.activityId),this.listId=this.activityId},Second:function(t){this.bgIsRed=!1,this.listName=t.activityName,this.showAllClassify=!1,this.getListInfo(),this.secondSelected=t.activityId},listDetail:function(t){this.$router.push({name:"visa_details"}),this.data.offerId=t.offerId},getClassifyInfo:function(t){var s=this;window.client.request({url:"/api/MSMH0064.json",adapter:"MPBank",parameters:"[ 'tranCode': 'MSMH0064','srcChannel': 'MH','activityType': actId ? '1' :'0','activityId': actId ? actId : ''} ]",success:function(i){s.classifyFirst=[{activityId:"",activityName:"不限分类"}];for(var a=i.MSMH0064List[0].root.cd.result.kColl,e=0;e<a.length;e++)s.classifyFirst.push(a[e]);""==t||void 0==t?s.classifySecond=[{actId:"",activityId:"",activityName:"不限分类"}]:s.classifySecond.push({actId:"",activityId:"",activityName:"全部"});for(var c=i.MSMH0064List.length,n=1;n<c;n++){s.secondId.push(i.MSMH0064List[n]);var l=i.MSMH0064List[n].params.activityId,o=i.MSMH0064List[n].root.cd.result.kColl;s.listId==l&&(s.classifySecond=o)}},error:function(){console.log("接口MSMH0064错误")}})},getListInfo:function(){var t=this;window.client.request({url:"/api/MSMH0067.json",adapter:"MPBank",parameters:"['countryCode': "+this.countryId+",'rf': 'XML','turnPageBeginPos': '1','tranCode': 'MSMH0067','openChannel': 'MH',activityId: "+this.listId+"','turnPageShowNum': '5','secondActivityId': "+this.secondSelected+",'srcChannel': 'MH','modState': '0'} ]",success:function(s){for(var i=s.root.cd.result.kColl,a=0;a<i.length;a++){t.activeList.push(i[a]),i[a].imageListIcollStr=JSON.parse(i[a].imageListIcollStr);for(var e=0;e<i[a].imageListIcollStr.length;e++)i[a].imageListIcollStr[e].imageFileHeight.indexOf("300")>-1&&e%2==0&&t.src.push(i[a].imageListIcollStr[e])}},error:function(){console.log("接口MSMH0067错误")}})}}}},R6Yx:function(t,s,i){"use strict";var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("xcgb-box",[a("xcgb-head",{attrs:{keepAlive:!1,title:"活动列表",leftOptions:[{type:"left_arrow_black"}]}},[a("img",{staticClass:"visa-list-logo",attrs:{slot:"overwrite-title",src:i("dfk0")},slot:"overwrite-title"})]),t._v(" "),a("div",{staticClass:"main",on:{scroll:t.handleScroll}},[a("div",{staticClass:"visa-list-banner",on:{touchmove:function(t){t.preventDefault()}}},[a("img",{attrs:{src:i("gBHT"),width:"100%"}})]),t._v(" "),a("div",{staticClass:"visa-classify",class:[!0===t.barFixed?"isFixed":""]},[a("div",{staticClass:"visa-list-table ",on:{touchmove:function(t){t.preventDefault()}}},[a("div",{staticClass:"list_table-title",on:{click:function(s){t.goCountry()}}},[a("span",{staticClass:"list_table-name"},[t._v(t._s(t.countriesName))]),t._v(" "),a("span",{staticClass:"icon-arrow-nor"})]),t._v(" "),a("div",{staticClass:"list_table-title",on:{click:function(s){t.classifyIsShow()}}},[a("span",{staticClass:"list_table-name"},[t._v(t._s(t.listName))]),t._v(" "),a("span",{class:[t.showAllClassify?"icon-arrow-sel":"icon-arrow-nor"]})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAllClassify,expression:"showAllClassify"}],staticClass:"list-classify"},[a("div",{staticClass:"cgb_classifyFirst"},t._l(t.classifyFirst,function(s,i){return a("div",{staticClass:"classifyFirst",class:{bgIsRed:i===t.currentIndex||t.listId===s.activityId},on:{click:function(a){t.First(i,s)}}},[t._v(t._s(s.activityName))])})),t._v(" "),a("div",{staticClass:"cgb_classifySecond"},t._l(t.classifySecond,function(s){return a("div",{staticClass:"classifySecond",class:{bgIsRed:s.activityName===t.listName},on:{click:function(i){t.Second(s)}}},[t._v(t._s(s.activityName))])}))])]),t._v(" "),t._l(t.activeList,function(s,i){return a("div",{key:i,staticClass:"list-content",on:{click:function(i){t.listDetail(s)}}},[a("div",[a("img",{attrs:{src:t.src[i].fileLocation}})]),t._v(" "),a("div",{staticClass:"list-intro"},[a("p",{staticClass:"active-name"},[t._v(t._s(s.offerTitle))]),t._v(" "),a("p",{staticClass:"active-auth"},[t._v(t._s(s.merchant))])])])})],2)],1)},e=[],c={render:a,staticRenderFns:e};s.a=c},dfk0:function(t,s,i){t.exports=i.p+"static/img/detil-logo@3x.png"},gBHT:function(t,s,i){t.exports=i.p+"static/img/KV@3x.png"},rs6A:function(t,s,i){"use strict";var a=i("4YfN"),e=i.n(a),c=i("HVJf");e()({},i.i(c.b)("shareStore",["data"]))}});