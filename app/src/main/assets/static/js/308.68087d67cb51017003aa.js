webpackJsonp([308],{"20Gs":function(t,e){},KjgG:function(t,e,r){"use strict";var a=r("4YfN"),n=r.n(a),o=r("JGLT"),s=r("gpPJ"),i=r("CKVb"),u=r("fvyU"),l=r("IXui"),c=r("HVJf");n()({},r.i(c.b)(["invocationResult","iosPlatform"]),{status:function(){return!/^([3-9]{1})(\d{15}|\d{18})$/.test(this.newCard)},getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data},addMask:function(){return this.newCard.replace(/^(\d{4})\d+(\d{4})$/,function(t,e){return t+"****"+e})}}),o.a,s.a,i.a,u.a,l.a},MY1j:function(t,e,r){"use strict";function a(t){r("20Gs")}Object.defineProperty(e,"__esModule",{value:!0});var n=(r("KjgG"),r("UmRj")),o=r("UEyH"),s=r("C7Lr"),i=a,u=s(n.a,o.a,!1,i,null,null);e.default=u.exports},UEyH:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("xcgb-box",[a("xcgb-head",{attrs:{keepAlive:!1,title:"添加卡片",leftOptions:[{type:"left_arrow_black"}]}}),t._v(" "),a("div",{staticClass:"main register-index"},[a("group",{attrs:{title:"请添加持卡人本人的银行卡"}},[a("x-input",{attrs:{max:19,placeholder:"请输入您的银行卡号"},model:{value:t.newCard,callback:function(e){t.newCard=e},expression:"newCard"}}),t._v(" "),a("img",{attrs:{src:r("gBdB")},on:{click:t.getCode}})],1),t._v(" "),a("x-button",{attrs:{"action-type":"button",disabled:t.status},nativeOn:{click:function(e){return t.nextStep(e)}}},[t._v("下一步")]),t._v(" "),a("confirm",{attrs:{title:t.confirmTitle,"confirm-text":t.confirmSelectText},on:{"on-confirm":t.comfirmBtn},model:{value:t.showComfirm,callback:function(e){t.showComfirm=e},expression:"showComfirm"}},[a("p",{staticClass:"tips"},[t._v(t._s(t.confirmText))])])],1)],1)},n=[],o={render:a,staticRenderFns:n};e.a=o},UmRj:function(t,e,r){"use strict";var a=r("4YfN"),n=r.n(a),o=r("JGLT"),s=r("gpPJ"),i=r("CKVb"),u=r("fvyU"),l=r("IXui"),c=r("HVJf");e.a={name:"register",data:function(){return{newCard:"",currentVersion:"0.0.1",confirmText:"账户不存在或格式错误，请输入正确的账户",showComfirm:!1,confirmTitle:"",confirmSelectText:"确定",isUpdateCallFun:!1,createdData:""}},computed:n()({},r.i(c.b)(["invocationResult","iosPlatform"]),{status:function(){return!/^([3-9]{1})(\d{15}|\d{18})$/.test(this.newCard)},getUserInfo:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data},addMask:function(){return this.newCard.replace(/^(\d{4})\d+(\d{4})$/,function(t,e){return t+"****"+e})}}),components:{Confirm:o.a,Cell:s.a,Group:i.a,XInput:u.a,XButton:l.a},methods:{getCode:function(){console.log("调用相机扫描号码")},showNumKeyBoard:function(){console.log("调用数字键盘")},comfirmBtn:function(){this.newCard=""},nextStep:function(){this.isCreditNobRight(),this.judgeCredit(),this.$store.commit("addCreditStore/setPageData",{key:"addDetails",value:{virtualCardNo:this.newCard,certName:"身份证"}})},isCreditNobRight:function(){if(!/^([3-9]{1})(\d{15}|\d{18})$/.test(this.newCard)||this.newCard.length<16)return void(this.showComfirm=!0)},judgeCredit:function(){var t=this,e={cardNo:this.newCard};window.client.request({url:"/api/MH0414.json",adapter:"CommonAdapter",procedure:"second_MH0414",parameters:[e],success:function(e){var r=e.invocationResult,a={virtualCardNo:t.newCard},n=r.root;"0"==n.ec?("Y"==n.cd.cardType&&t.add_debit_certType_MH0003(function(t){var e=t.certName;a.certName=e,this.$router.push({name:"registerDebit",params:a}),this.$store.commit("addCreditStore/setPageData",{key:"addDetails",value:a})}),"C"==n.cd.cardType&&t.$router.push({name:"registerList",params:a}),"T"==n.cd.cardType&&t.$router.push({name:"registerOtherBank",params:{virtualCardNo:t.newCard,addCardType:"0",CardType:""}})):(t.showComfirm=!0,t.confirmText=n.em)}})},add_debit_certType_MH0003:function(t){var e={},r=this;e.tranCode="MH0003",e.srcChannel="MH",window.client.request({url:"/api/MH0003.json",adapter:"CommonAdapter",procedure:"MH0003",parameters:[e],success:function(e){var a=e.root;if("0"==a.ec){var n=r.standardData(a.cd,"iAprParameter").result.kColl,o="",s=r.getUserInfo.certType;console.log(n[0].aprValue),n.map(function(t){console.log(t),t.aprValue===s&&(o=t.aprShowMsg)}),""!==o?(r.$router.push({name:"add_details",params:{newCard:r.newCard}}),t.call(r,{certName:o})):(r.showComfirm=!0,r.confirmText="没有对应的证件信息")}else r.showComfirm=!0,r.confirmText=a.em}})},standardData:function(t,e){var r={result:{kColl:[]}};if(t.result.length>1){for(var a=0;a<t.result.length;a++)if(t.result[a].id==e){void 0==t.reult[a].kColl||(t.result[a].kColl.length>1?r.result.kColl=t.result[a].kColl:r.result.kColl.push(t.result[a].kColl));break}}else void 0==t.result.kColl||(t.result.kColl.length>1?r.result.kColl=t.result.kColl:r.result.kColl.push(t.result.kColl));for(var a in t)"result"!=a&&(r[a]=t[a]);return r},getUser:function(){return this.$store.getters.getStateKey("WL-Authentication-Success.UserInfoAuthRealm.attributes.data").data}}}}});